{"version":3,"sources":["model/playerProfile.ts","model/powerRanking.ts","model/houseguest.ts","utils/utilities.ts","utils/relationshipMap.ts","components/playerPortrait/selectedPortrait.ts","model/color.ts","components/playerPortrait/houseguestPortraitController.ts","components/playerPortrait/houseguestPortrait.tsx","components/playerPortrait/houseguestToPortrait.tsx","components/tooltip/tooltip.tsx","components/playerPortrait/portraits.tsx","components/memoryWall/memoryWall.tsx","components/nextEpisodeButton/nextEpisodeButton.tsx","components/playerPortrait/setupPortrait.tsx","utils/ai/classifyRelationship.ts","components/castingScreen/importLinks.tsx","components/playerPortrait/subtitle.tsx","model/portraitDisplayMode.ts","components/viewsBar/viewBarTag.tsx","components/layout/box.tsx","components/viewsBar/viewBar.tsx","components/episode/episodes.tsx","components/episode/pregameEpisode.tsx","components/castingScreen/randomXButton.tsx","components/layout/text.ts","components/layout/centered.tsx","components/castingScreen/castingScreen.tsx","subjects/subjects.tsx","theme/theme.ts","components/topbar/themeSwitch.tsx","components/topbar/topBar.tsx","components/pregameScreen/pregameScreen.tsx","utils/BbRandomGenerator.ts","model/gameState.ts","model/season.ts","components/episode/scene.tsx","utils/ai/aiUtils.ts","utils/ai/aiApi.ts","components/mainPage/fullscreenButton.tsx","components/episode/scenes/votingTable.tsx","model/logging/voteType.tsx","components/episode/scenes/juryVoteScene.tsx","components/episode/bigBrotherFinale.tsx","components/episode/scenes/finalHohCompScene.tsx","components/episode/scenes/finalEvictionScene.tsx","components/episode/gameOver.tsx","model/logging/episodelog.ts","components/episode/episodeFactory.ts","components/episode/bigBrotherEpisode.tsx","components/episode/scenes/hohCompScene.tsx","components/episode/scenes/nomCeremonyScene.tsx","components/episode/scenes/vetoCompScene.tsx","components/episode/scenes/vetoCeremonyScene.tsx","components/episode/scenes/evictionScene.tsx","components/sidebar/sidebarController.ts","components/sidebar/sidebar.tsx","components/mainPage/mainContentArea.tsx","components/mainPage/mainPage.tsx","components/mainPage/mainPageController.ts","theme/globalTheme.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["PlayerProfile","init","Object","classCallCheck","this","name","imageURL","assign","PowerRanking","beats","outOf","Error","createClass","key","get","Houseguest","_PlayerProfile","_this","possibleConstructorReturn","getPrototypeOf","call","isEvicted","isJury","id","nominations","hohWins","povWins","popularity","deltaPopularity","relationships","powerRanking","superiors","Set","getFriendEnemyCount","friends","enemies","assertThisInitialized","inherits","value","villain","roundTwoDigits","number","Math","round","newRelationshipMap","size","exclude","result","i","selectPlayer","player","getSelectedPlayer","selectedPlayer$","next","componentToHex","c","hex","toString","length","Rgb","r","g","b","concat","interpolateColor","min","max","percent","toHex","selectedColor","HouseguestPortraitController","view","subs","refreshData","data","props","setState","comparePowerRankings","defaultState","selectedPlayer","undefined","state","displayMode","backgroundColor","_this2","push","subscribe","displayMode$","forEach","sub","unsubscribe","has","Subtitle","styled","small","_templateObject","MemoryWallPortrait","div","_templateObject2","_ref","theme","portraitBorder","Evicted","_templateObject3","Jury","_templateObject4","Normal","img","_templateObject5","Grayscale","_templateObject6","Sepia","_templateObject7","HouseguestPortrait","_React$Component","controller","isNullOrUndefined","subtitle","Img","imageClass","getImageClass","generateSubtitle","detailed","Portrait","react_default","a","createElement","onClick","style","src","height","width","React","Component","houseguestToPortrait","houseguest","houseguestPortrait_HouseguestPortrait","Text","p","tooltip_templateObject","Tooltip","visible","Popover_default","position","isOpen","content","text","onMouseEnter","onMouseLeave","children","PortraitWrapper","className","centered","tooltip","tooltip_Tooltip","Portraits","rows","houseguests","memoryWallPortrait","MemoryWall","margin","maxWidth","NextEpisodeButton","switchSceneRelative","RelationshipType","EditPortrait","setupPortrait_templateObject","Input","input","setupPortrait_templateObject2","Noselect","setupPortrait_templateObject3","XButton","setupPortrait_templateObject4","SetupPortrait","textAlign","onDoubleClick","onDelete","imageUrl","onChange","spellCheck","ImportLinks","lines","split","profiles","line","temp","pop","replace","substr","indexOf","onSubmit","event","target","RelationshipTypeToSymbol","FRIEND","ENEMY","PAWN","QUEEN","classifyRelationship","heroPopularity","villainPopularity","relationship","benefitsHero","benefitsVillain","Friend","Pawn","Queen","Enemy","addPopularityLine","hero","popularitySubtitle","deltaPop","statePopularity","getDeltaPopularity","addCompsLine","compWins","lineHeight","popularityMinColor","popularityMaxColor","popularityMode","minColor","maxColor","extremePopularity","x","xSquared","extremeValues","_addFriendshipCountTi","titles","friendOrEnemyTitle","map","txt","count","Relationship","friendEnemyCountTitle","addFriendshipCountTitles","arguments","powerMaxColor","powerMinColor","powerMode","toFloat","_","ViewBarTag","selected","mode","_this3","disabled","background","toRgba","cursor","ShadowBox","box_templateObject","_ref2","overlay","StyledBox","box_templateObject2","_ref3","bodyArea","DividerBox","Box","ViewsBox","viewBar_templateObject","ViewsBar","viewBarTag_ViewBarTag","Episode","scenes","title","gameState","type","arrowsEnabled","viewsBar","hasViewsbar","PregameEpisodeType","eliminates","canPlayWith","n","PregameEpisode","_Episode","PregameScreen","cast","RandomButton","_useState","useState","_useState2","slicedToArray","setNumber","random","parseInt","NumericInput","marginLeft","test","HasText","text_templateObject","text_templateObject2","NoMargin","centered_templateObject","Center","centered_templateObject2","Centered","noMargin","CenteredBold","CenteredItallic","CastingScreen","appendProfiles","newState","objectSpread","profile","players","submit","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","newCast","cast$","mainContentStream$","newEpisode","GameState","stop","amount","shuffle","slice","handleUpload","handleFiles","files","handleDrop","newName","splice","_this4","setupPortrait_SetupPortrait","deleteMethod","handleChange","_this5","FileDrop","onDrop","importLinks_ImportLinks","text_Input","multiple","getFiles","file","match","lastIndexOf","URL","createObjectURL","lightTheme","bg","toggleBorder","gradient","link","evictedCell","grayCell","lightGrayCell","winnerCell","runnerUpCell","nomineeCell","hohCell","tableCellBorder","darkTheme","ThemeSwitcher","window","matchMedia","matches","setTheme","theme$","TopbarLink","topBar_templateObject","EditCastLink","castingScreen_CastingScreen","getCast","EditSeasonLink","Topbar","marginTop","BehaviorSubject","episodes$","switchEpisode$","Subject","episode","isFullscreen$","BbRandomGenerator","seed","rng","prand","xorshift128plus","_this$rng$next","_this$rng$next2","_prand$uniformIntDist","uniformIntDistribution","_prand$uniformIntDist2","_this$rng$next3","_this$rng$next4","rng$","castNames","string","hash","charCodeAt","hashcode","getById","houseguestCache","inclusions","exclusions","excludedIds","hg","filter","includes","randomPlayer","options","randomInt","nonEvictedHouseguests","getJurors","inJury","remainingPlayers","finalJurySize","phase","previousHOH","log","Array","MutableGameState","copy","cloneDeep","Scene","render","favouriteIndex","callback","highestIndex","highestScore","Infinity","currentScore","lowestScore","lowestIndex","doesHeroWinTheFinale","hgs","jury","heroVotes","villainVotes","juror","heroShouldTargetSuperiors","totalPlayers","castEvictionVote","nominees","nom0","nom1","zeroIsInferior","oneIsInferior","cutthroatVote","nonVote","decision","reason","nonTarget","excuse","targetIsFriend","nonTargetIsNonFriend","nonTargetIsFriend","targetIsNonFriend","cutthroatVoteJury","r0","r1","vote","nominateNPlayers","hitlist","hitList","trueOptions","useGoldenVetoPreJury","save","rel0","relationshipWith","rel1","FullscreenIcon","fullscreenButton_templateObject","FullscreenButton","getValue","EndgameTableCell","td","votingTable_templateObject","EndgameTable","table","votingTable_templateObject2","Gray","votingTable_templateObject3","White","votingTable_templateObject4","_ref4","votingTable_templateObject5","_ref5","WinnerCell","votingTable_templateObject6","_ref6","RunnerUpCell","votingTable_templateObject7","_ref7","NomineeCell","_templateObject8","_ref8","HohCell","_templateObject9","_ref9","BlackRow","tr","_templateObject10","generateVotingTable","masterLog","houseguestCells","evictionOrder","topRowCells","preVetoCells","vetoCells","postVetoCells","evictedCells","winnerCells","cells","colSpan","generateTopRow","nominationsPreVeto","rowSpan","generatePreVetoRow","vetoWinner","generateVetoRow","nominationsPostVeto","generatePostVetoRow","voteTextLine1","soleVoter","votesInMajority","votingTable_Evicted","evicted","generateEvictedRow","runnerUp","winner","_arr","entries","votes","_i","_ref12","_ref11","WinnerVote","RunnerUpVote","winnerRow","topRow","preVetoRow","vetoRow","postVetoRow","blackRow","houseguestRows","evictedRow","evictionColSpan","weeks","reverse","weekText","tempList","voteKey","getKey","NormalVote","NomineeVote","HoHVote","hohText","hohVote","juryVoteScene","initialGameState","newGameState","jurors","finalists","castJuryVote","currentLog","votesFor0","votesFor1","voteCountText","scene","BigBrotherFinale","generateBbFinale","currentGameState","hohCompScene","finalHoH","finalEviction","_finalHohCompScene","final3","enduranceWinner","enduranceLosers","skillWinner","portraits_Portrait","finalHohCompScene","_finalHohCompScene2","_finalEvictionScene","HoH","_castEvictionVote","evictee","survivor","hoh","evictHouseguest","finalEvictionScene","_finalEvictionScene2","_juryVoteScene","_juryVoteScene2","juryScene","BigBrotherFinaleEpisode","GameOver","GameOverEpisode","EpisodeLog","EpisodeFactory","episodeType","iMap","j","jMap","impression","randomFloat","firstImpressions","heroWinsTheFinale","add","populateSuperiors","house","sum","targetId","calculatePopularity","updatePopularity","rel","updateFriendCounts","finalState","BigBrotherVanilla","nomCeremonyScene","_generateHohCompScene","previousHoh","newHoH","generateHohCompScene","_generateHohCompScene2","vetoCompScene","povWinner","_generateNomCeremonyS","nom2","noms","generateNomCeremonyScene","_generateNomCeremonyS2","vetoCeremonyScene","_generateVetoCompScen","choices","povPlayers","everyoneWillPlay","introText","extras","generateVetoCompScene","_generateVetoCompScen2","evictionScene","_generateVetoCeremony","initialNominees","povTarget","descisionText","vetoChoice","useGoldenVeto","replacementSpeech","nameAReplacement","finalNominees","toConsumableArray","replacementNom","replacementIndex","findIndex","generateVetoCeremonyScene","_generateVetoCeremony2","_generateEvictionScen","lastVoter","logic","tieVote","tieBreaker","displayHoH","generateEvictionScene","_generateEvictionScen2","BigBrotherVanillaEpisode","generateBbVanilla","generateGameOver","delete","Season","factory","nextEpisode","SidebarController","subscriptions","season","selectedEpisode","delta","selectedScene","renderedScenes","targetScene","lastEpisode","episodes","switchToScene","newPlayerCount","nextEpisodeType","whichEpisodeType","renderEpisode","onNewEpisode","_switchToScene","index","_x","apply","keyCode","_handleKeyDown","bind","Sidebar","document","addEventListener","handleKeyDown","destroy","minWidth","getEpisodes","episodeKey","breakKey","getHighlight","getSelectedEpisode","MainContentAreaWrapper","mainContentArea_templateObject","MainContentArea","contentStream","prevProps","prevState","scrollTo","MainPage","fullscreen","inject","hideOnFullscreen","display","wrapperStyle","overflow","sidebar_Sidebar","overflowX","mainContentArea_MainContentArea","MainPageController","page","GlobalStyles","createGlobalStyle","globalTheme_templateObject","App","styled_components_browser_esm","Fragment","mainPage_MainPage","Boolean","location","hostname","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.170c5fd2.chunk.js","sourcesContent":["export class PlayerProfile {\n    readonly name: string = \"\";\n    readonly imageURL: string = \"\";\n    constructor(init: PlayerProfile) {\n        if (!init) {\n            return;\n        }\n        Object.assign(this, init);\n    }\n}\n","export class PowerRanking {\n    readonly beats: number;\n    readonly outOf: number;\n    get toFloat(): number {\n        return this.beats / this.outOf;\n    }\n\n    constructor(beats: number, outOf: number) {\n        if (outOf === 0) throw new Error(\"Power ranking attempted to divide by zero\");\n        this.beats = beats;\n        this.outOf = outOf;\n    }\n}\n","import { PlayerProfile } from \"./playerProfile\";\nimport { RelationshipMap } from \"../utils\";\nimport { PowerRanking } from \"./powerRanking\";\n\ninterface HouseguestInit extends PlayerProfile {\n    id: number;\n    relationships: RelationshipMap;\n}\n\nexport class Houseguest extends PlayerProfile {\n    public isEvicted: boolean = false;\n    public isJury: boolean = false;\n\n    readonly id: number = 0;\n\n    public nominations: number = 0;\n    public hohWins: number = 0;\n    public povWins: number = 0;\n\n    // Popularity ranges from -1 to 1\n    public popularity: number = 0;\n    public deltaPopularity: number = 0;\n    readonly relationships: RelationshipMap = {};\n\n    // power rankings range from 0 to 1\n    public powerRanking: PowerRanking = new PowerRanking(0, 1);\n    readonly superiors: Set<number> = new Set<number>();\n\n    public relationshipWith(villain: Houseguest): number {\n        return this.relationships[villain.id];\n    }\n\n    public getFriendEnemyCount: () => { friends: number; enemies: number } = () => {\n        return { friends: 0, enemies: 0 };\n    };\n\n    constructor(init: HouseguestInit) {\n        super(init);\n        Object.assign(this, init);\n    }\n}\n","export function hashcode(string: string): number {\n    let hash = 0,\n        i,\n        chr;\n    if (string.length === 0) return hash;\n    for (i = 0; i < string.length; i++) {\n        chr = string.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0;\n    }\n    return hash;\n}\n\nexport function roundTwoDigits(number: number | undefined) {\n    if (!number) {\n        return 0;\n    }\n    return Math.round(number * 100);\n}\n\nexport function max(a: number, b: number) {\n    return a > b ? a : b;\n}\n\nexport function extremeValues(x: number | undefined): number {\n    if (!x) {\n        return 0;\n    }\n    const xSquared = x * x;\n    if (x >= 0) {\n        return -xSquared + 2 * x;\n    } else {\n        return xSquared + 2 * x;\n    }\n}\n","export interface RelationshipMap {\n    [id: number]: number;\n}\n\nexport function newRelationshipMap(size: number, exclude: number): RelationshipMap {\n    const result: RelationshipMap = {};\n    for (let i = 0; i < size; i++) {\n        if (i !== exclude) result[i] = 0;\n    }\n    return result;\n}\n","import { Houseguest } from \"../../model\";\nimport { RelationshipMap } from \"../../utils\";\nimport { getSelectedPlayer, selectedPlayer$ } from \"../../subjects/subjects\";\n\nexport interface SelectedPlayerData {\n    id: number;\n    popularity: number;\n    relationships: RelationshipMap;\n    isEvicted: boolean;\n    superiors?: Set<number>;\n}\n\nexport function selectPlayer(player: SelectedPlayerData | null) {\n    if (!player || (getSelectedPlayer() && (getSelectedPlayer() as Houseguest).id === player.id)) {\n        selectedPlayer$.next(null);\n    } else {\n        selectedPlayer$.next(player);\n    }\n}\n","function componentToHex(c: any) {\n    var hex = Math.round(c).toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nexport class Rgb {\n    public r: number;\n    public g: number;\n    public b: number;\n    public toHex() {\n        return \"#\" + componentToHex(this.r) + componentToHex(this.g) + componentToHex(this.b);\n    }\n    public toRgba(): string {\n        return `rgba(${this.r}, ${this.g}, ${this.b}, 1)`;\n    }\n    constructor(r: number, g: number, b: number) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n    }\n}\n\nexport function interpolateColor(min: Rgb, max: Rgb, percent: number): string {\n    return new Rgb(\n        min.r + percent * (max.r - min.r),\n        min.g + percent * (max.g - min.g),\n        min.b + percent * (max.b - min.b)\n    ).toHex();\n}\n","import { PortraitProps, HouseguestPortrait, PortraitState } from \"../memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport { selectedPlayer$, displayMode$, getSelectedPlayer } from \"../../subjects/subjects\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport { Rgb } from \"../../model/color\";\nimport { PowerRanking } from \"../../model/powerRanking\";\n\nconst selectedColor = new Rgb(51, 255, 249);\n\nexport class HouseguestPortraitController {\n    private subs: Subscription[] = [];\n    private view: HouseguestPortrait;\n    constructor(view: HouseguestPortrait) {\n        this.view = view;\n    }\n\n    get defaultState() {\n        return {\n            popularity: this.view.props.popularity,\n            displayMode: displayMode$.value,\n            powerRanking: this.view.props.powerRanking\n        };\n    }\n\n    public backgroundColor(props: PortraitProps): undefined | string {\n        const selectedPlayer = getSelectedPlayer();\n        if (selectedPlayer !== null && selectedPlayer.id === props.id) {\n            return selectedColor.toHex();\n        }\n        return props.isEvicted ? undefined : this.view.state.displayMode.backgroundColor(this.view.state);\n    }\n\n    public subscribe() {\n        const subs: Subscription[] = [];\n        subs.push(\n            selectedPlayer$.subscribe({\n                next: this.refreshData\n            })\n        );\n        subs.push(\n            displayMode$.subscribe({\n                next: displayMode => this.view.setState({ displayMode })\n            })\n        );\n        this.subs = subs;\n    }\n\n    public unsubscribe() {\n        this.subs.forEach(sub => sub.unsubscribe());\n    }\n\n    private comparePowerRankings(data: SelectedPlayerData): PowerRanking {\n        // 0 is blue. 1 is orange\n        if (!data.superiors) return new PowerRanking(0, 1);\n        const id = this.view.props.id === undefined ? -1 : this.view.props.id;\n        return data.superiors.has(id) ? new PowerRanking(1, 1) : new PowerRanking(0, 1);\n    }\n\n    private refreshData = (data: SelectedPlayerData | null) => {\n        if (!data) {\n            this.view.setState(this.defaultState);\n        } else {\n            if (data.id !== this.view.props.id) {\n                this.view.setState({\n                    popularity: data.relationships[this.view.props.id!],\n                    powerRanking: this.comparePowerRankings(data)\n                });\n            } else {\n                this.view.setState({ popularity: 2, powerRanking: new PowerRanking(2, 1) });\n            }\n        }\n    };\n}\n","import React from \"react\";\nimport { selectPlayer } from \"./selectedPortrait\";\nimport { isNullOrUndefined } from \"util\";\nimport { RelationshipMap } from \"../../utils\";\nimport _ from \"lodash\";\nimport { HouseguestPortraitController } from \"./houseguestPortraitController\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst Subtitle = styled.small`\n    font-weight: 100;\n    font-size: small;\n`;\n\nconst MemoryWallPortrait = styled.div`\n    margin: 5px;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n    color: black;\n    border-radius: 5px;\n    text-align: center;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n`;\n\nconst Evicted = styled(MemoryWallPortrait)`\n    font-weight: 100;\n    color: grey;\n    background-color: #111111;\n`;\n\nconst Jury = styled(MemoryWallPortrait)`\n    font-weight: 100;\n    color: #c3ae88;\n    background-color: #5d5340;\n    filter: brightness(0.6);\n`;\n\nconst Normal = styled.img`\n    width: 100%;\n    width: -moz-available; /* For Mozzila */\n    width: -webkit-fill-available; /* For Chrome */\n    width: stretch; /* Unprefixed */\n`;\n\nconst Grayscale = styled(Normal)`\n    filter: grayscale(100%);\n`;\n\nconst Sepia = styled(Normal)`\n    filter: sepia(100%);\n`;\n\nexport interface PortraitProps {\n    imageURL: string;\n    name: string;\n    id?: number;\n    relationships?: RelationshipMap;\n    isEvicted?: boolean;\n    isJury?: boolean;\n    popularity?: number;\n    powerRanking?: PowerRanking;\n    deltaPopularity?: number;\n    detailed?: boolean;\n    superiors?: Set<number>;\n    getFriendEnemyCount?: () => { friends: number; enemies: number };\n}\n\nexport interface PortraitState {\n    popularity?: number;\n    powerRanking?: PowerRanking;\n    displayMode: PortraitDisplayMode;\n}\nexport class HouseguestPortrait extends React.Component<PortraitProps, PortraitState> {\n    private controller: HouseguestPortraitController;\n\n    public constructor(props: PortraitProps) {\n        super(props);\n        this.controller = new HouseguestPortraitController(this);\n        this.state = this.controller.defaultState;\n    }\n\n    public componentDidMount() {\n        if (isNullOrUndefined(this.props.id)) {\n            return;\n        }\n        this.controller.subscribe();\n    }\n\n    public componentWillUnmount() {\n        this.controller.unsubscribe();\n    }\n\n    private onClick(): void {\n        if (isNullOrUndefined(this.props.id) || !this.props.relationships) {\n            return;\n        }\n        const data = {\n            id: this.props.id,\n            relationships: this.props.relationships,\n            isEvicted: !!this.props.isEvicted,\n            popularity: this.props.popularity || 0,\n            superiors: this.props.superiors,\n        };\n        selectPlayer(data);\n    }\n\n    public render() {\n        const props = this.props;\n        const Img = getImageClass(props);\n        let subtitle: any[] = [];\n        subtitle = this.state.displayMode.generateSubtitle(this.props, this.state, !!props.detailed);\n\n        let Portrait = MemoryWallPortrait;\n        if (props.isJury) {\n            Portrait = Jury;\n        } else if (props.isEvicted) {\n            Portrait = Evicted;\n        }\n        return (\n            <Portrait\n                onClick={() => this.onClick()}\n                style={{\n                    backgroundColor: this.controller.backgroundColor(props),\n                }}\n            >\n                <Img src={props.imageURL} style={{ height: 100, width: \"-moz-available\" }} />\n                <br />\n                {props.name}\n                <br />\n                {<Subtitle>{subtitle}</Subtitle>}\n            </Portrait>\n        );\n    }\n}\n\nfunction getImageClass(props: PortraitProps) {\n    let imageClass = props.isEvicted ? Grayscale : Normal;\n    imageClass = props.isJury ? Sepia : imageClass;\n    return imageClass;\n}\n","import { ProfileHouseguest, HouseguestPortrait } from \"../memoryWall\";\nimport React from \"react\";\n\nexport function houseguestToPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={false} />;\n}\n\nexport function memoryWallPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={true} />;\n}\n","import React from \"react\";\nimport Popover from \"react-tiny-popover\";\nimport styled from \"styled-components\";\n\nconst Text = styled.p`\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n`;\n\ninterface TooltipProps {\n    text: string;\n    children: any;\n}\n\ninterface ToolTipState {\n    visible: boolean;\n}\n\nexport class Tooltip extends React.Component<TooltipProps, ToolTipState> {\n    constructor(props: TooltipProps) {\n        super(props);\n        this.state = { visible: false };\n    }\n\n    public render() {\n        return (\n            <Popover\n                position={[\"top\", \"bottom\"]}\n                isOpen={this.state.visible}\n                content={<Text>{this.props.text}</Text>}\n            >\n                <div\n                    onMouseEnter={() => this.setState({ visible: true })}\n                    onMouseLeave={() => this.setState({ visible: false })}\n                >\n                    {this.props.children}\n                </div>\n            </Popover>\n        );\n    }\n}\n","import React from \"react\";\nimport { ProfileHouseguest } from \"../memoryWall\";\nimport { houseguestToPortrait, memoryWallPortrait } from \"./houseguestToPortrait\";\nimport { Tooltip } from \"../tooltip/tooltip\";\n\nlet key = -1;\n\nfunction PortraitWrapper(props: { centered?: boolean; children: any }): JSX.Element {\n    return (\n        <div\n            key={key++}\n            className={`columns is-gapless is-mobile is-multiline ${props.centered ? \"is-centered\" : \"\"}`}\n        >\n            {props.children}\n        </div>\n    );\n}\n\nexport function Portrait(props: { houseguest: ProfileHouseguest; centered?: boolean }): JSX.Element {\n    const result = (\n        <PortraitWrapper centered={props.centered}>{houseguestToPortrait(props.houseguest)}</PortraitWrapper>\n    );\n    if (props.houseguest.tooltip) {\n        return (\n            <PortraitWrapper centered={props.centered}>\n                <Tooltip text={props.houseguest.tooltip}>{houseguestToPortrait(props.houseguest)}</Tooltip>\n            </PortraitWrapper>\n        );\n    }\n    return result;\n}\n\nexport function Portraits(props: {\n    houseguests: ProfileHouseguest[];\n    centered?: boolean;\n    detailed?: boolean;\n}): JSX.Element {\n    const rows: JSX.Element[] = [];\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    props.houseguests.forEach((houseguest: ProfileHouseguest) => {\n        let result;\n        if (props.detailed) {\n            result = memoryWallPortrait(houseguest, key++);\n        } else {\n            result = houseguestToPortrait(houseguest, key++);\n        }\n        if (houseguest.tooltip) {\n            result = <Tooltip text={houseguest.tooltip}>{result}</Tooltip>;\n        }\n        rows.push(result);\n    });\n    return (\n        <div className={`columns is-gapless is-mobile is-multiline ${props.centered && \"is-centered\"}`}>\n            {rows}\n        </div>\n    );\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { Portraits } from \"../playerPortrait/portraits\";\nimport { RelationshipMap } from \"../../utils\";\nexport interface IMemoryWallProps {\n    readonly houseguests: ProfileHouseguest[];\n}\n\nexport interface ProfileHouseguest extends PlayerProfile {\n    id?: number;\n    relationships?: RelationshipMap;\n    isEvicted?: boolean;\n    isJury?: boolean;\n    popularity?: number;\n    deltaPopularity?: number;\n    hohWins?: number;\n    povWins?: number;\n    nominations?: number;\n    tooltip?: string;\n    getFriendEnemyCount?: () => { friends: number; enemies: number };\n}\n\nexport function MemoryWall(props: IMemoryWallProps): JSX.Element {\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    return (\n        <div\n            style={{\n                margin: \"auto\",\n                maxWidth: props.houseguests.length < 26 ? 700 : -1,\n            }}\n        >\n            <Portraits houseguests={props.houseguests} centered={true} detailed={true} />\n        </div>\n    );\n}\n","import React from \"react\";\nimport { switchSceneRelative } from \"../../subjects/subjects\";\n\nexport function NextEpisodeButton(): JSX.Element {\n    return (\n        <button className=\"button is-primary\" onClick={() => switchSceneRelative(1)}>\n            Continue\n        </button>\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface SetupPortraitProps {\n    name: string;\n    imageUrl: string;\n    onDelete: () => void;\n    onChange: (arg0: Event) => void;\n}\n\ninterface SetupPortraitState {\n    name: string;\n}\n\nconst EditPortrait = styled.div`\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid grey;\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n`;\n\nconst Input = styled.input`\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n`;\n\nconst Noselect = styled.div`\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n`;\n\nconst XButton = styled(Noselect)`\n    color: #df4040;\n\n    :active {\n        color: #ff7133;\n        background-color: #ffd8c7;\n    }\n    :hover {\n        color: red;\n        background-color: #ffe1ea;\n    }\n`;\n\nexport class SetupPortrait extends React.Component<SetupPortraitProps, SetupPortraitState> {\n    // TODO: When you click on the text, you can edit the text.\n\n    public constructor(props: SetupPortraitProps) {\n        super(props);\n        this.state = { name: props.name };\n    }\n\n    public UNSAFE_componentWillReceiveProps(props: SetupPortraitProps) {\n        this.setState({ name: props.name });\n    }\n\n    public render() {\n        return (\n            <EditPortrait>\n                <div style={{ textAlign: \"center\" }}>\n                    <XButton className=\"x-button\" onDoubleClick={() => this.props.onDelete()}>\n                        ✘\n                    </XButton>\n                    <img src={this.props.imageUrl} style={{ width: 100, height: 100 }} />\n                    <br />\n                    <Input onChange={() => this.props.onChange} spellCheck={false} value={this.state.name} />\n                </div>\n            </EditPortrait>\n        );\n    }\n}\n","export enum RelationshipType {\n    Friend = \"FRIEND\",\n    Queen = \"QUEEN\",\n    Pawn = \"PAWN\",\n    Enemy = \"ENEMY\"\n}\n\nexport const RelationshipTypeToSymbol = { FRIEND: \"♥\", ENEMY: \"💔\", PAWN: \"PAWN\", QUEEN: \"QUEEN\" };\n\nexport function classifyRelationship(\n    heroPopularity: number,\n    villainPopularity: number,\n    relationship: number\n): RelationshipType {\n    const benefitsHero = relationship > heroPopularity;\n    const benefitsVillain = relationship > villainPopularity;\n    if (benefitsHero && benefitsVillain) {\n        return RelationshipType.Friend;\n    } else if (benefitsHero && !benefitsVillain) {\n        return RelationshipType.Pawn;\n    } else if (!benefitsHero && benefitsVillain) {\n        return RelationshipType.Queen;\n    }\n    return RelationshipType.Enemy;\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\n\ninterface ImportLinksProps {\n    onSubmit: (profiles: PlayerProfile[]) => void;\n    className?: string;\n}\n\nexport class ImportLinks extends React.Component<ImportLinksProps, any> {\n    public constructor(props: ImportLinksProps) {\n        super(props);\n        this.state = { text: \"\" };\n    }\n\n    private onSubmit() {\n        const lines = this.state.text.split(/\\r?\\n/);\n        // ugly, but it works.\n        const profiles: PlayerProfile[] = [];\n        lines.forEach((line: string) => {\n            const temp = line.split(\"/\").pop();\n            let name = temp\n                ? temp\n                      .split(\"#\")[0]\n                      .split(\"?\")[0]\n                      .replace(/\\.[^/.]+$/, \"\")\n                      .replace(/[-_]/g, \" \")\n                : null;\n\n            if (line.substr(0, line.indexOf(\" \"))) {\n                name = line.substr(line.indexOf(\" \") + 1);\n            }\n            if (name) {\n                profiles.push({\n                    name,\n                    imageURL: line\n                });\n            }\n        });\n        this.props.onSubmit(profiles);\n        this.setState({ text: \"\" });\n    }\n\n    public render() {\n        return (\n            <div className={this.props.className}>\n                <textarea\n                    className=\"textarea\"\n                    onChange={event => {\n                        this.setState({ text: event.target.value });\n                    }}\n                    value={this.state.text}\n                />\n                <button onClick={() => this.onSubmit()}>Import links</button>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { roundTwoDigits } from \"../../utils\";\nimport { ProfileHouseguest, PortraitProps, PortraitState } from \"../memoryWall\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport {\n    RelationshipTypeToSymbol,\n    RelationshipType as Relationship,\n    classifyRelationship\n} from \"../../utils/ai/classifyRelationship\";\nimport { getSelectedPlayer } from \"../../subjects/subjects\";\n\nexport function generatePowerSubtitle(\n    hero: PortraitProps,\n    state: PortraitState,\n    _: boolean | undefined\n): any[] {\n    let key = 0;\n    let subtitle: any[] = [];\n    key = addPopularityLine(state, hero, !!_, subtitle, key);\n    key = addCompsLine(hero, subtitle, key);\n    if (!hero.isEvicted && state.powerRanking) {\n        const data = getSelectedPlayer() as SelectedPlayerData | null;\n        if (data && data.id !== hero.id) {\n            subtitle.push(<div key={key++}>{`${state.powerRanking!.beats > 0 ? \"LOSE\" : \"WIN\"}`}</div>);\n        } else if (data && data.id === hero.id) {\n            subtitle.push(<div key={key++}>I WOULD</div>);\n        } else {\n            subtitle.push(\n                <div key={key++}>{`WINS ${state.powerRanking.beats}/${state.powerRanking.outOf}`}</div>\n            );\n        }\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return subtitle;\n}\n\nexport function generatePopularitySubtitle(\n    hero: PortraitProps,\n    state: PortraitState,\n    detailed: boolean = false\n): any[] {\n    let key = 0;\n    let subtitle: any[] = [];\n    // popularity\n    key = addPopularityLine(state, hero, detailed, subtitle, key);\n    // competition wins\n    key = addCompsLine(hero, subtitle, key);\n    // friendship count / relationship classification titles\n    ({ subtitle, key } = addFriendshipCountTitles(hero, subtitle, key));\n    return subtitle;\n}\n\nfunction addFriendshipCountTitles(hero: PortraitProps, subtitle: any[], key: number) {\n    if (!hero.isEvicted) {\n        const data = getSelectedPlayer() as SelectedPlayerData | null;\n        if (data && data.id !== hero.id) {\n            const titles = friendOrEnemyTitle(hero, data);\n            subtitle = subtitle.concat(titles.map(txt => <div key={key++}>{txt}</div>));\n        } else {\n            const titles = friendEnemyCountTitle(hero);\n            subtitle = subtitle.concat(titles.map(txt => <div key={key++}>{txt}</div>));\n        }\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return { subtitle, key };\n}\n\nfunction addPopularityLine(\n    state: { popularity?: number },\n    hero: PortraitProps,\n    detailed: boolean,\n    subtitle: any[],\n    key: number\n) {\n    let popularity = state.popularity;\n    if (popularity && (popularity > 1 || popularity < -1)) {\n        popularity = hero.popularity;\n    }\n    if (popularity && !hero.isEvicted) {\n        let popularitySubtitle = `${roundTwoDigits(popularity)}%`;\n        const deltaPop = getDeltaPopularity(hero, popularity);\n        if (detailed && deltaPop !== 0) {\n            const arrow = deltaPop > 0 ? \" | ↑\" : \" | ↓\";\n            popularitySubtitle += `${arrow} ${deltaPop}%`;\n        }\n        subtitle.push(<div key={key++}>{popularitySubtitle}</div>);\n    }\n    return key;\n}\n\nfunction addCompsLine(hero: PortraitProps, subtitle: any[], key: number) {\n    if (compWins(hero)) {\n        subtitle.push(<div key={key++}>{`${compWins(hero)}`}</div>);\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return key;\n}\n\nfunction getDeltaPopularity(houseguest: PortraitProps, statePopularity: number) {\n    if (roundTwoDigits(houseguest.popularity) !== roundTwoDigits(statePopularity)) {\n        return 0;\n    }\n    return houseguest.deltaPopularity ? roundTwoDigits(houseguest.deltaPopularity) : 0;\n}\n\nfunction compWins(houseguest: ProfileHouseguest): string {\n    return `${houseguest.hohWins ? `♔ ${houseguest.hohWins}` : \"\"}${\n        houseguest.povWins && houseguest.hohWins\n            ? `|🛇 ${houseguest.povWins}`\n            : houseguest.povWins\n            ? `🛇 ${houseguest.povWins}`\n            : \"\"\n    }${(houseguest.hohWins || houseguest.povWins) && houseguest.nominations ? \"|\" : \"\"}${\n        houseguest.nominations ? `✘ ${houseguest.nominations}` : \"\"\n    }`;\n}\n\nfunction friendOrEnemyTitle(hero: PortraitProps, villain: SelectedPlayerData): string[] {\n    const titles: string[] = [];\n    titles.push(\n        RelationshipTypeToSymbol[\n            classifyRelationship(hero.popularity || 0, villain.popularity, hero.relationships![villain.id])\n        ]\n    );\n    return titles;\n}\n\nfunction friendEnemyCountTitle(hero: PortraitProps): string[] {\n    const titles: string[] = [];\n    const count = hero.getFriendEnemyCount ? hero.getFriendEnemyCount() : { friends: 0, enemies: 0 };\n    titles.push(\n        `${count.friends} ${RelationshipTypeToSymbol[Relationship.Friend]} | ${count.enemies} ${\n            RelationshipTypeToSymbol[Relationship.Enemy]\n        }`\n    );\n    return titles;\n}\n","import { Rgb, interpolateColor } from \"./color\";\nimport { PortraitState, PortraitProps } from \"../components/memoryWall\";\nimport { extremeValues } from \"../utils\";\nimport { generatePopularitySubtitle, generatePowerSubtitle } from \"../components/playerPortrait/subtitle\";\n\nexport interface PortraitDisplayMode {\n    minColor: Rgb;\n    maxColor: Rgb;\n    backgroundColor: (state: PortraitState) => string;\n    generateSubtitle: (props: PortraitProps, state: PortraitState, detailed?: boolean) => any[];\n}\n\nconst popularityMinColor = new Rgb(252, 137, 137);\nconst popularityMaxColor = new Rgb(137, 252, 137);\n\nexport const popularityMode: PortraitDisplayMode = {\n    minColor: popularityMinColor,\n    maxColor: popularityMaxColor,\n    backgroundColor: (state: PortraitState) => {\n        const popularity = state.popularity;\n\n        const extremePopularity = extremeValues(popularity);\n        const percent = (extremePopularity + 1) / 2;\n        return interpolateColor(popularityMinColor, popularityMaxColor, percent);\n    },\n    generateSubtitle: generatePopularitySubtitle\n};\n\nconst powerMaxColor = new Rgb(255, 204, 94);\nconst powerMinColor = new Rgb(192, 181, 255);\nexport const powerMode: PortraitDisplayMode = {\n    minColor: powerMinColor,\n    maxColor: powerMaxColor,\n    backgroundColor: (state: PortraitState) => {\n        const powerRanking = state.powerRanking;\n        if (powerRanking === undefined) return \"\";\n\n        return interpolateColor(powerMinColor, powerMaxColor, powerRanking.toFloat);\n    },\n    generateSubtitle: generatePowerSubtitle\n};\n","import React from \"react\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { displayMode$ } from \"../../subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nfunction setDisplayMode(p: PortraitDisplayMode) {\n    displayMode$.next(p);\n}\n\ninterface ViewBarTagProps {\n    mode: PortraitDisplayMode;\n    text: string;\n    disabled?: boolean;\n}\n\nexport class ViewBarTag extends React.Component<ViewBarTagProps, { selected: boolean }> {\n    private sub: Subscription | null = null;\n\n    public constructor(props: ViewBarTagProps) {\n        super(props);\n        this.state = { selected: props.mode === displayMode$.value };\n    }\n\n    public componentDidMount() {\n        this.sub = displayMode$.subscribe({\n            next: (mode) => {\n                if (mode !== this.props.mode) {\n                    this.setState({ selected: false });\n                }\n            },\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    public render() {\n        const name = \"level-item tag is-medium is-light\";\n        const style = getStyle(this.props);\n        return (\n            <span\n                className={name}\n                style={style}\n                onClick={() => {\n                    !this.props.disabled && setDisplayMode(this.props.mode);\n                    !this.props.disabled && this.setState({ selected: true });\n                }}\n            >\n                {styleText(this.props.text, this.state.selected)}\n            </span>\n        );\n    }\n}\n\nfunction styleText(text: string, selected: boolean): JSX.Element {\n    return selected ? <b>{text}</b> : <i>{text}</i>;\n}\n\nfunction getStyle(props: ViewBarTagProps) {\n    return props.disabled\n        ? {}\n        : {\n              background: `linear-gradient(90deg, ${props.mode.minColor.toRgba()} 0%, ${props.mode.maxColor.toRgba()} 100%)`,\n              cursor: \"pointer\",\n          };\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ShadowBox = styled.div`\n    box-shadow: ${({ theme }: { theme: ColorTheme }) =>\n        theme.name === \"light\" ? \"0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1)\" : \"\"};\n    border-radius: 6px;\n    margin-left: 3px;\n    margin-right: 3px;\n    background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nconst StyledBox = styled.div`\n    margin-left: 3px;\n    margin-right: 3px;\n    margin-bottom: 3px;\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bodyArea};\n`;\n\nexport function DividerBox(props: any): JSX.Element {\n    return <ShadowBox className={props.className || \"\"}>{props.children}</ShadowBox>;\n}\n\nexport function Box(props: any): JSX.Element {\n    return (\n        <StyledBox style={props.style} className={`box ${props.className || \"\"}`}>\n            {props.children}\n        </StyledBox>\n    );\n}\n","import React from \"react\";\nimport { popularityMode, powerMode } from \"../../model/portraitDisplayMode\";\nimport { ViewBarTag } from \"./viewBarTag\";\nimport { Box } from \"../layout/box\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ViewsBox = styled(Box)`\n    background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nexport function ViewsBar() {\n    return (\n        <ViewsBox className=\"level is-mobile\" key=\"viewsbar\">\n            <ViewBarTag mode={popularityMode} text={\"Relationships\"}></ViewBarTag>\n            <ViewBarTag mode={powerMode} text={\"Power Rankings\"}></ViewBarTag>\n            <ViewBarTag mode={powerMode} disabled={true} text={\"Cliques [Coming Soon™]\"}></ViewBarTag>\n        </ViewsBox>\n    );\n}\n","import React from \"react\";\nimport { GameState } from \"../../model/gameState\";\nimport { Scene } from \"./scene\";\nimport { ViewsBar } from \"../viewsBar/viewBar\";\n\nexport interface InitEpisode {\n    scenes: Scene[];\n    title: string;\n    content: JSX.Element;\n    gameState: GameState;\n    type: EpisodeType;\n}\n\nexport class Episode {\n    readonly scenes: Scene[];\n    readonly title: string;\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type: EpisodeType;\n    readonly arrowsEnabled: boolean = true;\n    get render(): JSX.Element {\n        const viewsBar = this.type.hasViewsbar ? <ViewsBar /> : null;\n        return (\n            <div>\n                {viewsBar}\n                {this.content}\n            </div>\n        );\n    }\n\n    constructor(init: InitEpisode) {\n        this.scenes = init.scenes;\n        this.title = init.title;\n        this.content = init.content;\n        this.gameState = init.gameState;\n        this.type = init.type;\n    }\n}\n\nexport interface EpisodeType {\n    readonly canPlayWith: (n: number) => boolean;\n    readonly eliminates: number;\n    readonly arrowsEnabled: boolean;\n    readonly hasViewsbar: boolean;\n}\n","import React from \"react\";\nimport { Episode, EpisodeType } from \"./episodes\";\nimport { PregameScreen } from \"../pregameScreen/pregameScreen\";\nimport { GameState } from \"../../model/gameState\";\n\nconst PregameEpisodeType: EpisodeType = {\n    eliminates: 0,\n    canPlayWith: (n: number) => {\n        return n > 2;\n    },\n    arrowsEnabled: true,\n    hasViewsbar: false\n};\n\nexport class PregameEpisode extends Episode {\n    readonly title = \"Pregame\";\n    readonly scenes = [];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = PregameEpisodeType;\n\n    public constructor(gameState: GameState) {\n        super({\n            title: \"Pregame\",\n            scenes: [],\n            content: <PregameScreen cast={gameState.houseguests} />,\n            gameState,\n            type: PregameEpisodeType\n        });\n        this.gameState = gameState;\n        this.content = <PregameScreen cast={gameState.houseguests} />;\n    }\n}\n","import React, { useState } from \"react\";\n\ninterface RandomButtonProps {\n    random: (n: number) => void;\n}\n\nexport function RandomButton(props: RandomButtonProps): JSX.Element {\n    const [number, setNumber] = useState(\"16\");\n    return (\n        <div>\n            <button\n                disabled={number === \"\"}\n                className=\"button is-primary\"\n                onClick={() => props.random(parseInt(number))}\n            >\n                Random\n            </button>\n            <NumericInput value={number} onChange={setNumber} />\n        </div>\n    );\n}\n\ninterface NumericInputProps {\n    value: string;\n    onChange: (newValue: string) => void;\n}\n\nfunction NumericInput(props: NumericInputProps) {\n    return (\n        <input\n            className=\"input\"\n            type=\"text\"\n            style={{ width: \"3em\", marginLeft: 5 }}\n            value={props.value}\n            onChange={event => {\n                const value = event.target.value;\n                if (/^\\d*$/g.test(value)) {\n                    props.onChange(value);\n                }\n            }}\n        />\n    );\n}\n","import styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nexport const HasText = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport const Input = styled.input`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface TextProps {\n    noMargin?: boolean;\n    children?: any;\n}\n\nconst NoMargin = styled.div`\n    text-align: center;\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\nconst Center = styled.p`\n    text-align: center;\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport function Centered(props: TextProps): JSX.Element {\n    if (props.noMargin) return <NoMargin>{props.children}</NoMargin>;\n    return <Center>{props.children} </Center>;\n}\n\nexport function CenteredBold(props: TextProps): JSX.Element {\n    return (\n        <Centered noMargin={props.noMargin}>\n            <b>{props.children} </b>\n        </Centered>\n    );\n}\n\nexport function CenteredItallic(props: TextProps): JSX.Element {\n    return (\n        <Centered noMargin={props.noMargin}>\n            <i>{props.children} </i>\n        </Centered>\n    );\n}\n","import React from \"react\";\nimport FileDrop from \"react-file-drop\";\nimport { PlayerProfile, GameState } from \"../../model\";\nimport { SetupPortrait } from \"../playerPortrait/setupPortrait\";\nimport { ImportLinks } from \"./importLinks\";\nimport { PregameScreen } from \"../pregameScreen/pregameScreen\";\nimport { PregameEpisode } from \"../episode/pregameEpisode\";\nimport { shuffle } from \"lodash\";\nimport { RandomButton } from \"./randomXButton\";\nimport { selectPlayer } from \"../playerPortrait/selectedPortrait\";\nimport { mainContentStream$, newEpisode, updateCast } from \"../../subjects/subjects\";\nimport { HasText, Input } from \"../layout/text\";\nimport { Centered } from \"../layout/centered\";\n\ninterface CastingScreenState {\n    players: PlayerProfile[];\n}\n\ninterface CastingScreenProps {\n    cast?: PlayerProfile[];\n}\n\nexport class CastingScreen extends React.Component<CastingScreenProps, CastingScreenState> {\n    constructor(props: CastingScreenProps) {\n        super(props);\n        this.state = { players: props.cast || [] };\n    }\n\n    private handleChange(i: number) {\n        return (event: any) => {\n            const newName = event.target.value.replace(/\\r?\\n|\\r/g, \"\");\n            const newState = { ...this.state };\n            newState.players[i] = new PlayerProfile({\n                imageURL: newState.players[i].imageURL,\n                name: newName,\n            });\n            this.setState(newState);\n        };\n    }\n\n    private deleteMethod(i: number) {\n        return () => {\n            const newState = { ...this.state };\n            newState.players.splice(i, 1);\n            this.setState(newState);\n        };\n    }\n\n    private getFiles() {\n        const players = this.state.players;\n        if (!players) {\n            return;\n        }\n        const rows: JSX.Element[] = [];\n        let i = 0;\n        players.forEach((player) =>\n            rows.push(\n                <SetupPortrait\n                    name={player.name}\n                    imageUrl={player.imageURL}\n                    onDelete={this.deleteMethod(i)}\n                    onChange={this.handleChange(i)}\n                    key={(++i).toString()}\n                />\n            )\n        );\n        return <div className=\"columns is-gapless is-mobile is-multiline is-centered\">{rows}</div>;\n    }\n\n    private appendProfiles = (profiles: PlayerProfile[]) => {\n        const newState = { ...this.state };\n        profiles.forEach((profile) => newState.players.push(profile));\n        this.setState(newState);\n    };\n\n    private submit = async () => {\n        updateCast(this.state.players);\n        mainContentStream$.next(<PregameScreen cast={this.state.players} />);\n        selectPlayer(null);\n        await newEpisode(null);\n        await newEpisode(new PregameEpisode(new GameState(this.state.players)));\n    };\n\n    private random = (amount: number) => {\n        let players = this.state.players;\n        players = shuffle(players);\n        players = players.slice(0, amount);\n        this.setState({ players });\n    };\n\n    public render() {\n        return (\n            <FileDrop onDrop={this.handleDrop}>\n                <HasText className=\"level\">\n                    <ImportLinks onSubmit={this.appendProfiles} />\n                    <div className=\"level-item\">\n                        <button className=\"button is-danger\" onClick={() => this.setState({ players: [] })}>\n                            Delete all\n                        </button>\n                    </div>\n                    <div className=\"level-item\">\n                        <RandomButton random={this.random} />\n                    </div>\n                    <div className=\"level-item\">\n                        <button\n                            className=\"button is-primary\"\n                            disabled={this.state.players.length < 3}\n                            onClick={this.submit}\n                        >\n                            Submit\n                        </button>\n                    </div>\n                </HasText>\n                <Input type=\"file\" multiple onChange={this.handleUpload} />\n                {this.state.players.length === 0 && <Centered>~ Drop images ~</Centered>}\n                {this.getFiles()}\n            </FileDrop>\n        );\n    }\n\n    private handleUpload = (event: any) => {\n        this.handleFiles(event.target.files);\n    };\n\n    private handleDrop = (files: FileList | null, event: React.DragEvent) => {\n        if (!files) return;\n        this.handleFiles(files);\n    };\n\n    private handleFiles(files: FileList) {\n        const newState = { ...this.state };\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            if (file.type.match(/image\\/*/)) {\n                newState.players.push(\n                    new PlayerProfile({\n                        name: file.name.substr(0, file.name.lastIndexOf(\".\")) || file.name,\n                        imageURL: URL.createObjectURL(file),\n                    })\n                );\n            }\n        }\n        this.setState(newState);\n    }\n}\n","import { BehaviorSubject, Subject } from \"rxjs\";\nimport { PregameScreen } from \"../components/pregameScreen/pregameScreen\";\nimport { Episode, PlayerProfile } from \"../model\";\nimport { SelectedPlayerData } from \"../components/playerPortrait/selectedPortrait\";\nimport React from \"react\";\nimport { PortraitDisplayMode, popularityMode } from \"../model/portraitDisplayMode\";\nimport { ColorTheme, lightTheme } from \"../theme/theme\";\n\n// What is currently being displayed.\nexport const mainContentStream$ = new BehaviorSubject(<PregameScreen cast={[]} />);\n// Push episodes to this subject to add them to the sidebar. Null resets everything.\nexport const episodes$ = new BehaviorSubject<Episode | null>(null);\n// Forcibly switches to an episode. Used when adding a new episode.\nexport const switchEpisode$ = new Subject<number>();\nexport function newEpisode(episode: Episode | null) {\n    episodes$.next(episode);\n}\nexport function switchSceneRelative(n: number) {\n    switchEpisode$.next(n);\n}\n// the list of players in the game\nexport const cast$ = new BehaviorSubject<PlayerProfile[]>([]);\nexport function updateCast(newCast: PlayerProfile[]) {\n    cast$.next(newCast);\n}\nexport function getCast(): PlayerProfile[] {\n    return cast$.value;\n}\n// The player that the user has clicked on.\nexport const selectedPlayer$ = new BehaviorSubject<SelectedPlayerData | null>(null);\nexport function getSelectedPlayer() {\n    return selectedPlayer$.value;\n}\n\n// The display mode selected by the viewsbar.\nexport const displayMode$ = new BehaviorSubject<PortraitDisplayMode>(popularityMode);\n\n// If the screen is fullscreen or not.\nexport const isFullscreen$ = new BehaviorSubject<boolean>(false);\n\nexport const theme$ = new Subject<ColorTheme>();\n","export interface ColorTheme {\n    name: string;\n    bg: string;\n    text: string;\n    toggleBorder: string;\n    gradient: string;\n    bodyArea: string;\n    link: string;\n    mark: string;\n    overlay: string;\n    evictedCell: string;\n    grayCell: string;\n    winnerCell: string;\n    lightGrayCell: string;\n    runnerUpCell: string;\n    nomineeCell: string;\n    hohCell: string;\n    portraitBorder: string;\n    tableCellBorder: string;\n}\n\nexport const lightTheme: ColorTheme = {\n    name: \"light\",\n    bg: \"#fff\",\n    text: \"#363537\",\n    toggleBorder: \"#FFF\",\n    gradient: \"linear-gradient(#39598A, #79D7ED)\",\n    bodyArea: \"#fff\",\n    link: \"blue\",\n    mark: \"yellow\",\n    overlay: \"fff\",\n    evictedCell: \"#fa8072\",\n    grayCell: \"#eaecf0\",\n    lightGrayCell: \"#f8f9fa\",\n    winnerCell: \"#73fb76\",\n    runnerUpCell: \"#d1e8ef\",\n    nomineeCell: \"#959ffd\",\n    hohCell: \"#CCFFCC\",\n    portraitBorder: \"gray\",\n    tableCellBorder: \"#a2a9b1\",\n};\n\nexport const darkTheme: ColorTheme = {\n    name: \"dark\",\n    bg: \"#121212\",\n    text: \"#FAFAFA\",\n    bodyArea: \"#363537\",\n    toggleBorder: \"#6B8096\",\n    gradient: \"linear-gradient(#091236, #1E215D)\",\n    link: \"lightblue\",\n    mark: \"#7e006d\",\n    overlay: \"#444346\",\n    evictedCell: \"#9d4c43\",\n    grayCell: \"#5e5e5e\",\n    lightGrayCell: \"#404040\",\n    runnerUpCell: \"#9fbec882\",\n    nomineeCell: \"#6c75d0\",\n    winnerCell: \"#00ac04\",\n    hohCell: \"#3f783f\",\n    portraitBorder: \"#484848\",\n    tableCellBorder: \"#53575b\",\n};\n","import React, { useState } from \"react\";\nimport { theme$ } from \"../../subjects/subjects\";\nimport { darkTheme, lightTheme } from \"../../theme/theme\";\n\nexport function ThemeSwitcher() {\n    const [theme, setTheme] = useState(\n        window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\"\n    );\n    const toggleTheme = () => {\n        if (theme === \"light\") {\n            setTheme(\"dark\");\n            theme$.next(darkTheme);\n        } else {\n            setTheme(\"light\");\n            theme$.next(lightTheme);\n        }\n    };\n\n    const className = `button ${theme === \"dark\" ? `is-dark` : \"is-light\"}`;\n    return (\n        <div className={className} onClick={toggleTheme}>\n            {theme === \"light\" ? \"Dark mode\" : \"Light mode\"}\n        </div>\n    );\n}\n","import React from \"react\";\nimport { CastingScreen } from \"../castingScreen/castingScreen\";\nimport { mainContentStream$, getCast } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\nimport { ThemeSwitcher } from \"./themeSwitch\";\nimport { ColorTheme } from \"../../theme/theme\";\nimport { Box } from \"../layout/box\";\n\nconst TopbarLink = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.link};\n    cursor: pointer;\n`;\n\nexport function EditCastLink(): JSX.Element {\n    return (\n        <TopbarLink\n            onClick={() => {\n                mainContentStream$.next(<CastingScreen cast={getCast()} />);\n            }}\n        >\n            Edit Cast\n        </TopbarLink>\n    );\n}\n\nexport function EditSeasonLink(): JSX.Element {\n    return (\n        <TopbarLink\n            onClick={() => {\n                mainContentStream$.next(<CastingScreen cast={getCast()} />);\n            }}\n        >\n            Edit Season\n        </TopbarLink>\n    );\n}\n\nexport function Topbar(props: { style?: any }): JSX.Element {\n    const style = { ...{ marginTop: 30 }, ...(props.style || {}) };\n    return (\n        <Box className=\"level is-mobile\" style={style}>\n            <div className=\"level-item\">\n                <EditCastLink />\n            </div>\n            <div className=\"level-item\">\n                <EditSeasonLink />\n            </div>\n            <div className=\"level-item\">\n                <ThemeSwitcher />\n            </div>\n        </Box>\n    );\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { EditCastLink } from \"../topbar/topBar\";\nimport { HasText } from \"../layout/text\";\n\ninterface PregameScreenProps {\n    cast: PlayerProfile[];\n}\n\nexport function PregameScreen(props: PregameScreenProps): JSX.Element {\n    if (props.cast.length === 0) {\n        return (\n            <HasText>\n                Cast is empty. <EditCastLink />\n            </HasText>\n        );\n    }\n    return (\n        <HasText>\n            Welcome to Big Brother!\n            <MemoryWall houseguests={props.cast} />\n            <NextEpisodeButton />\n        </HasText>\n    );\n}\n","import prand from \"pure-rand\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { hashcode } from \"./utilities\";\nimport { cast$ } from \"../subjects/subjects\";\n\nexport class BbRandomGenerator {\n    private rng: prand.RandomGenerator;\n\n    public randomFloat(): number {\n        let result: number;\n        [result, this.rng] = this.rng.next();\n        return result / 2147483647.0;\n    }\n\n    public randomInt(a: number, b: number): number {\n        let result: number;\n        [result, this.rng] = prand.uniformIntDistribution(a, b, this.rng);\n        return result;\n    }\n\n    public flipCoin(): boolean {\n        let result: number;\n        [result, this.rng] = this.rng.next();\n        return result % 2 === 0;\n    }\n\n    public seed(seed: number) {\n        this.rng = prand.xorshift128plus(seed);\n    }\n\n    public constructor(seed: number) {\n        this.rng = prand.xorshift128plus(seed);\n    }\n}\n\nexport function rng() {\n    return rng$.value;\n}\n\nconst rng$ = new BehaviorSubject(new BbRandomGenerator(0));\n\nconst castSub = cast$.subscribe({\n    next: cast => {\n        let castNames = \"\";\n        cast.forEach(houseguest => (castNames += houseguest.name));\n        rng$.next(new BbRandomGenerator(hashcode(castNames)));\n    }\n});\n","import { Houseguest } from \"./houseguest\";\nimport { PlayerProfile } from \"./playerProfile\";\nimport _ from \"lodash\";\nimport { newRelationshipMap, rng } from \"../utils\";\nimport { finalJurySize, getFinalists } from \"./season\";\nimport { EpisodeLog } from \"./logging/episodelog\";\n\nexport function getById(gameState: GameState, id: number): Houseguest {\n    return gameState.houseguestCache[id];\n}\n\nexport function exclude(inclusions: Houseguest[], exclusions: Houseguest[]) {\n    const excludedIds = exclusions.map(hg => hg.id);\n    return inclusions.filter(hg => !excludedIds.includes(hg.id) && !hg.isEvicted);\n}\n\nexport function randomPlayer(inclusions: Houseguest[], exclusions: Houseguest[] = []): Houseguest {\n    if (inclusions.length === 0) {\n        throw new Error(\"Tried to get a random player from a list of 0 players.\");\n    }\n    const options = exclude(inclusions, exclusions);\n    const choice = rng().randomInt(0, options.length - 1);\n\n    return options[choice];\n}\n\nexport function nonEvictedHouseguests(gameState: GameState) {\n    return gameState.houseguests.filter(hg => !hg.isEvicted);\n}\nexport function getJurors(gameState: GameState): Houseguest[] {\n    return gameState.houseguests.filter(hg => hg.isJury);\n}\n\nexport function inJury(gameState: GameState): Boolean {\n    return gameState.remainingPlayers - getFinalists() <= finalJurySize();\n}\n\nexport function calculatePopularity(hero: Houseguest, house: Houseguest[]) {\n    let sum = 0;\n    let count = 0;\n    const targetId = hero.id;\n    house.forEach(houseguest => {\n        if (houseguest.id !== targetId) {\n            count++;\n            sum += houseguest.relationships[targetId];\n        }\n    });\n    return count === 0 ? 0 : sum / count;\n}\n\nexport class GameState {\n    // Current state of the game after a phase.\n\n    readonly houseguestCache: { [id: number]: Houseguest } = {};\n    readonly houseguests: Houseguest[] = [];\n    readonly remainingPlayers: number = 0;\n    readonly phase: number = 0;\n    readonly previousHOH?: Houseguest;\n    readonly log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: PlayerProfile[] | GameState) {\n        if (!(init instanceof Array)) {\n            Object.assign(this, init);\n        } else {\n            const profiles = init as PlayerProfile[];\n            this.remainingPlayers = profiles.length;\n            profiles.forEach((profile, i) => {\n                const hg: Houseguest = new Houseguest({\n                    ...profile,\n                    id: i,\n                    relationships: newRelationshipMap(profiles.length, i)\n                });\n                this.houseguestCache[i] = hg;\n                this.houseguests.push(hg);\n            });\n        }\n    }\n}\n\nexport class MutableGameState {\n    public houseguests: Houseguest[] = [];\n    public houseguestCache: { [id: number]: Houseguest } = {};\n    public remainingPlayers: number = 0;\n    public phase: number = 0;\n    public previousHOH?: Houseguest;\n    public log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: GameState | MutableGameState) {\n        const copy = _.cloneDeep(init);\n        Object.assign(this, copy);\n    }\n}\n","import { BigBrotherVanilla } from \"../components/episode/bigBrotherEpisode\";\nimport { EpisodeFactory } from \"../components/episode/episodeFactory\";\nimport { GameState } from \"./gameState\";\nimport { EpisodeType, Episode } from \".\";\nimport { BigBrotherFinale } from \"../components/episode/bigBrotherFinale\";\nimport { cast$ } from \"../subjects/subjects\";\nimport { GameOver } from \"../components/episode/gameOver\";\n\nexport function finalJurySize() {\n    return jurors;\n}\n\nlet jurors = 7;\nconst sub = cast$.subscribe({\n    next: newCast => {\n        let players = newCast.length;\n        players = Math.round(players * 0.55);\n        if (players % 2 === 0) {\n            players--;\n        }\n        jurors = players;\n    }\n});\n\nexport function getFinalists() {\n    return 2;\n}\n\nexport class Season {\n    private factory: EpisodeFactory;\n\n    public constructor() {\n        this.factory = new EpisodeFactory();\n    }\n\n    // In the future, this would all be customizable,\n    // and not just all big brother episodes by default.\n\n    public renderEpisode(gameState: GameState, type: EpisodeType): Episode {\n        return this.factory.nextEpisode(gameState, type);\n    }\n\n    public whichEpisodeType(players: number) {\n        if (players === 3) {\n            return BigBrotherFinale;\n        }\n        if (players === 2) {\n            return GameOver;\n        }\n        return BigBrotherVanilla;\n    }\n}\n","import React from \"react\";\nimport { GameState } from \"../../model/gameState\";\nimport { ViewsBar } from \"../viewsBar/viewBar\";\ninterface InitScene {\n    readonly title: string;\n    readonly gameState: GameState;\n    readonly content: JSX.Element;\n}\nexport class Scene {\n    readonly title: string = \"\";\n    readonly gameState: GameState = new GameState([]);\n    readonly content: JSX.Element = <div>{`Error while rendering ${this.title}`}</div>;\n    public render: JSX.Element;\n    public constructor(init: Partial<InitScene>) {\n        Object.assign(this, init);\n        this.render = (\n            <div>\n                <ViewsBar />\n                {this.content}\n            </div>\n        );\n    }\n}\n","import { Houseguest, inJury, GameState } from \"../../model\";\n\nexport const relationship = (hero: Houseguest, villain: Houseguest) => hero.relationships[villain.id];\n\nexport function favouriteIndex(hero: Houseguest, options: Houseguest[]) {\n    // Return the index of the houseguest that hero has the best relationship with.\n    return highestScore(hero, options, relationship);\n}\n\nexport function highestScore(\n    hero: Houseguest,\n    options: Houseguest[],\n    callback: (hero: Houseguest, villain: Houseguest) => number\n) {\n    let highestIndex = 0;\n    let highestScore = -Infinity;\n    options.forEach((villain, i) => {\n        const currentScore = callback(hero, villain);\n        if (currentScore > highestScore) {\n            highestIndex = i;\n            highestScore = currentScore;\n        }\n    });\n    return highestIndex;\n}\nexport function lowestScore(\n    hero: Houseguest,\n    options: Houseguest[],\n    callback: (hero: Houseguest, villain: Houseguest) => number\n) {\n    let lowestIndex = 0;\n    let lowestScore = Infinity;\n    options.forEach((villain, i) => {\n        const currentScore = callback(hero, villain);\n        if (currentScore < lowestScore) {\n            lowestIndex = i;\n            lowestScore = currentScore;\n        }\n    });\n    return lowestIndex;\n}\n\nexport function doesHeroWinTheFinale(\n    hgs: { hero: Houseguest; villain: Houseguest },\n    jury: Houseguest[]\n): boolean {\n    const hero = hgs.hero;\n    const villain = hgs.villain;\n    let heroVotes = 0;\n    let villainVotes = 0;\n    jury.forEach(juror => {\n        if (juror.id === hero.id || juror.id === villain.id) {\n            return;\n        }\n        if (relationship(hero, juror) > relationship(villain, juror)) {\n            heroVotes++;\n        } else {\n            villainVotes++;\n        }\n    });\n    return heroVotes > villainVotes;\n}\n\nexport function heroShouldTargetSuperiors(hero: Houseguest, gameState: GameState): boolean {\n    const totalPlayers = gameState.remainingPlayers;\n    const superiors = hero.superiors.size;\n    // const inferiors = totalPlayers - 1 - hero.superiors.size;\n\n    // Old logic: Target the larger group. If they are equal, target superiors.\n    // return superiors >= inferiors;\n\n    // New logic: Target superiors unless you are in the top 25% of the playerlist.\n    return superiors / totalPlayers >= 0.25;\n}\n\n// TODO: this function can just honestly die. it's only used in nomination logic (which sucks anyways)\n// when I do the new logic, I think people who are dead center should target their superiors. works in F5.\n\nexport function hitList(hero: Houseguest, options: Houseguest[], gameState: GameState): Set<number> {\n    let result = options;\n    // jury logic is not affected by someone who is dead center in power rankings\n    if (inJury(gameState) && heroShouldTargetSuperiors(hero, gameState)) {\n        if (hero.superiors.size * 2 < gameState.remainingPlayers - 1) {\n            result = options.filter(hg => !hero.superiors.has(hg.id));\n        } else {\n            result = options.filter(hg => hero.superiors.has(hg.id));\n        }\n    } else {\n    }\n    return new Set(result.map(hg => hg.id));\n}\n","import { Houseguest, GameState, nonEvictedHouseguests, inJury, exclude } from \"../../model\";\nimport { favouriteIndex, relationship, lowestScore, hitList, heroShouldTargetSuperiors } from \"./aiUtils\";\nimport { classifyRelationship, RelationshipType as Relationship } from \"./classifyRelationship\";\n\ninterface NumberWithLogic {\n    decision: number;\n    reason: string;\n}\n\ninterface HouseguestWithLogic {\n    decision: Houseguest | null;\n    reason: string;\n}\n\n// Return the index of the eviction target.\nexport function castEvictionVote(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): NumberWithLogic {\n    if (inJury(gameState)) {\n        return cutthroatVoteJury(hero, nominees, gameState);\n    } else {\n        return cutthroatVote(hero, nominees);\n    }\n}\n\nfunction cutthroatVoteJury(hero: Houseguest, nominees: Houseguest[], gameState: GameState): NumberWithLogic {\n    const nom0 = nominees[0];\n    const nom1 = nominees[1];\n    const zeroIsInferior = !hero.superiors.has(nom0.id);\n    const oneIsInferior = !hero.superiors.has(nom1.id);\n    // if there is no sup/inf difference, no point in doing special logic for it\n    if (zeroIsInferior === oneIsInferior) {\n        return cutthroatVote(hero, nominees);\n    }\n    // Don't evict the last person in the game you can beat\n    if (gameState.remainingPlayers - hero.superiors.size - 1 === 1 && (zeroIsInferior || oneIsInferior)) {\n        const nonVote = zeroIsInferior ? 0 : 1;\n        return {\n            decision: zeroIsInferior ? 1 : 0,\n            reason: `I can't evict ${nominees[nonVote].name}, because they are the last person I can beat.`\n        };\n    }\n    const target = heroShouldTargetSuperiors(hero, gameState) === oneIsInferior ? 0 : 1;\n    const nonTarget = target ? 0 : 1;\n    const excuse = heroShouldTargetSuperiors(hero, gameState)\n        ? `I can't beat ${nominees[target].name} in the end.`\n        : `I need to keep ${nominees[nonTarget].name} around as a shield.`;\n    const targetIsFriend =\n        classifyRelationship(\n            hero.popularity,\n            nominees[target].popularity,\n            hero.relationships[nominees[target].id]\n        ) === Relationship.Friend;\n    const nonTargetIsNonFriend =\n        classifyRelationship(\n            hero.popularity,\n            nominees[nonTarget].popularity,\n            hero.relationships[nominees[nonTarget].id]\n        ) !== Relationship.Friend;\n    const nonTargetIsFriend = !nonTargetIsNonFriend;\n    const targetIsNonFriend = !targetIsFriend;\n    // the only reason to not evict your target is if he is your only friend on the block\n    if (targetIsFriend && nonTargetIsNonFriend) {\n        return { decision: nonTarget, reason: `${nominees[nonTarget].name} is my enemy.` };\n    } else if (targetIsFriend && nonTargetIsFriend) {\n        return { decision: target, reason: `Both noms are my friends, but ${excuse}` };\n    } else if (targetIsNonFriend && nonTargetIsNonFriend) {\n        return { decision: target, reason: `Neither of the noms are my friends, but ${excuse}` };\n    } else {\n        return { decision: target, reason: `${excuse}` };\n    }\n}\n\n// TODO: only works for 2 nominees\nfunction cutthroatVote(hero: Houseguest, nominees: Houseguest[]): NumberWithLogic {\n    const nom0 = nominees[0];\n    const nom1 = nominees[1];\n    const r0 = classifyRelationship(hero.popularity, nom0.popularity, hero.relationships[nom0.id]);\n    const r1 = classifyRelationship(hero.popularity, nom1.popularity, hero.relationships[nom1.id]);\n    if (r0 === Relationship.Enemy && r1 === Relationship.Enemy) {\n        return {\n            decision: nom0.popularity > nom1.popularity ? 0 : 1,\n            reason: \"Both noms are my enemies, so I voted for the more popular one.\"\n        };\n    } else if (\n        (r0 === Relationship.Enemy && r1 !== Relationship.Enemy) ||\n        (r1 === Relationship.Enemy && r0 !== Relationship.Enemy)\n    ) {\n        const vote = r0 === Relationship.Enemy ? 0 : 1;\n        return { decision: vote, reason: `${nominees[vote].name} is my enemy.` };\n    } else if (\n        (r0 !== Relationship.Friend && r1 === Relationship.Friend) ||\n        (r1 !== Relationship.Friend && r0 === Relationship.Friend)\n    ) {\n        const vote = r0 !== Relationship.Friend ? 0 : 1;\n        const nonVote = vote === 0 ? 1 : 0;\n        return { decision: vote, reason: `${nominees[nonVote].name} is my friend.` };\n    }\n    const vote = lowestScore(hero, nominees, relationship);\n    return {\n        decision: vote,\n        reason: `Both noms are my friends. but I like ${nominees[vote === 0 ? 1 : 0].name} more.`\n    };\n}\n\n// TODO: target and pawn based nominations, different pre and post jury.\nexport function nominateNPlayers(\n    hero: Houseguest,\n    options: Houseguest[],\n    gameState: GameState,\n    n: number\n): NumberWithLogic[] {\n    const result: NumberWithLogic[] = [];\n    const hitlist = hitList(hero, options, gameState);\n    let trueOptions = options.filter(hg => hitlist.has(hg.id));\n    if (trueOptions.length === 0) {\n        // if there are no options, we must sadly deviate from the hit list\n        trueOptions = options;\n    }\n    while (result.length < n) {\n        const decision = trueOptions[lowestScore(hero, trueOptions, relationship)];\n        const reason = \"I think you are ugly\";\n        result.push({ decision: decision.id, reason });\n        trueOptions = exclude(trueOptions, [decision]);\n        if (trueOptions.length === 0) {\n            trueOptions = options.filter(hg => !hitlist.has(hg.id));\n        }\n    }\n    return result;\n}\n\nexport function useGoldenVeto(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): HouseguestWithLogic {\n    let result: HouseguestWithLogic;\n    if (hero.id == nominees[0].id || hero.id == nominees[1].id) {\n        result = { decision: hero, reason: \"I am going to save myself.\" };\n    } else {\n        if (inJury(gameState)) {\n            // Note that I am currently not using the post-jury veto logic, primarily because it sucks at the moment\n            result = useGoldenVetoPreJury(hero, nominees);\n        } else {\n            result = useGoldenVetoPreJury(hero, nominees);\n        }\n        if (nonEvictedHouseguests(gameState).length === 4) {\n            result = {\n                decision: null,\n                reason: \"It doesn't make sense to use the veto here.\"\n            };\n        }\n    }\n    return result || null;\n}\n\n// works with any number of nominees\nfunction useGoldenVetoPostJury(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): HouseguestWithLogic {\n    let save = -1;\n    let reason = \"No reason specified.\";\n    let potentialSave: Houseguest | null = null;\n    let alwaysSave: Houseguest | null = null;\n    // identify potential save targets\n    nominees.forEach((nominee: Houseguest) => {\n        const relationship = classifyRelationship(\n            hero.popularity,\n            nominee.popularity,\n            hero.relationships[nominee.id]\n        );\n        const shouldTargetSuperiors = heroShouldTargetSuperiors(hero, gameState);\n        const nomineeIsSuperior: boolean = hero.superiors.has(nominee.id);\n        // always save the last person you can beat\n        if (gameState.remainingPlayers - hero.superiors.size - 1 === 1 && !nomineeIsSuperior) {\n            alwaysSave = nominee;\n            reason = `I have to save ${nominee.name}, because they are the last person I can beat.`;\n        }\n        // must be a friend and a non-target\n        // TODO: some people have the entire game as targets. they shouldn't be affected. --------------------------\n        if (relationship === Relationship.Friend && nomineeIsSuperior !== shouldTargetSuperiors) {\n            const excuse = heroShouldTargetSuperiors(hero, gameState)\n                ? `I can beat them in the end.`\n                : `I need to keep them around as a shield.`;\n            if (potentialSave) {\n                potentialSave =\n                    hero.relationshipWith(nominee) > hero.relationshipWith(potentialSave)\n                        ? nominee\n                        : potentialSave;\n            } else {\n                reason = `${nominee.name} is my friend, and ${excuse} `;\n                potentialSave = nominee;\n            }\n        }\n    });\n    if (alwaysSave) {\n        return { decision: alwaysSave, reason };\n    } else if (potentialSave) {\n        return { decision: potentialSave, reason };\n    } else {\n        return { decision: null, reason: \"Not sure what to put here yet.\" };\n    }\n}\n\nfunction useGoldenVetoPreJury(hero: Houseguest, nominees: Houseguest[]): HouseguestWithLogic {\n    let save = -1;\n    let reason = \"Neither of these nominees are my friends.\";\n    const rel0 = classifyRelationship(\n        hero.popularity,\n        nominees[0].popularity,\n        hero.relationshipWith(nominees[0])\n    );\n    const rel1 = classifyRelationship(\n        hero.popularity,\n        nominees[1].popularity,\n        hero.relationshipWith(nominees[1])\n    );\n    // basic logic that only saves friends. Doesn't take into account jury stuff.\n    if (rel0 === Relationship.Friend && rel1 !== Relationship.Friend) {\n        save = 0;\n        reason = `${nominees[0].name} is my friend.`;\n    } else if (rel1 === Relationship.Friend && rel0 !== Relationship.Friend) {\n        save = 1;\n        reason = `${nominees[1].name} is my friend.`;\n    } else if (rel0 === Relationship.Friend && rel1 === Relationship.Friend) {\n        save = Math.max(nominees[0].popularity, nominees[1].popularity) === nominees[0].popularity ? 0 : 1;\n        reason = `Both nominees are my friends, but I like ${nominees[save].name} more.`;\n    }\n    return { decision: nominees[save], reason };\n}\n\n// Returns the index of the finalist with the highest relationship with juror\nexport function castJuryVote(juror: Houseguest, finalists: Houseguest[]): number {\n    return favouriteIndex(juror, finalists);\n}\n","import React from \"react\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\n\nconst FullscreenIcon = styled.img`\n    position: -webkit-sticky;\n    position: sticky;\n    top: 20px;\n    right: 20px;\n`;\n\nexport function FullscreenButton(): JSX.Element {\n    return (\n        <FullscreenIcon\n            src={\n                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAASElEQVRIiWNgGAUEACMa/z+R6ohWz0Sqi0gFLIRcQAAQDAGa+2DoWzAKRgH1wX8G3OULWfqHfkYbsNIUPR5IrQ/gYLQsGngAAEPgCRZjAdYSAAAAAElFTkSuQmCC\"\n            }\n            className=\"button is-rounded\"\n            onClick={() => {\n                isFullscreen$.next(!isFullscreen$.getValue());\n            }}\n        />\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { EpisodeLog } from \"../../../model/logging/episodelog\";\nimport { CenteredBold, Centered, CenteredItallic } from \"../../layout/centered\";\nimport { GameState, getById } from \"../../../model\";\nimport { VoteType, WinnerVote, RunnerUpVote } from \"../../../model/logging/voteType\";\nimport { FullscreenButton } from \"../../mainPage/fullscreenButton\";\nimport { ColorTheme } from \"../../../theme/theme\";\n\nexport const EndgameTableCell = styled.td`\n    padding: 0.1em 0.4em;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n`;\n\nconst EndgameTable = styled.table`\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n    border-collapse: collapse;\n`;\n\nconst Gray = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.grayCell};\n`;\n\nconst White = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.lightGrayCell};\n`;\n\nconst Evicted = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.evictedCell};\n`;\n\nexport const WinnerCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.winnerCell};\n`;\n\nexport const RunnerUpCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.runnerUpCell};\n`;\n\nexport const NomineeCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.nomineeCell};\n`;\n\nexport const HohCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.hohCell};\n`;\n\nconst BlackRow = styled.tr`\n    height: 0.4em;\n    background-color: #000000;\n`;\n\nexport function generateVotingTable(gameState: GameState): JSX.Element {\n    const masterLog: EpisodeLog[] = gameState.log;\n    const houseguestCells: JSX.Element[][] = [];\n    gameState.houseguests.forEach((hg, i) => {\n        houseguestCells[hg.id] = [\n            <Gray key={`hg-name---${i}`}>\n                <CenteredBold noMargin={true}>{hg.name}</CenteredBold>\n            </Gray>,\n        ];\n    });\n    const evictionOrder: number[] = [];\n    const topRowCells: JSX.Element[] = [];\n    const preVetoCells: JSX.Element[] = [];\n    const vetoCells: JSX.Element[] = [];\n    const postVetoCells: JSX.Element[] = [];\n    const evictedCells: JSX.Element[] = [];\n    const winnerCells: JSX.Element[] = [];\n    masterLog.forEach((log, i) => {\n        generateTopRow(log, i, topRowCells, masterLog.length - 1);\n        generatePreVetoRow(log, i, preVetoCells);\n        generateVetoRow(log, i, vetoCells);\n        generatePostVetoRow(log, i, postVetoCells);\n        generateEvictedRow(log, i, evictedCells, gameState);\n        if (!log) return;\n        evictionOrder.push(log.evicted);\n        if (log.runnerUp !== undefined) evictionOrder.push(log.runnerUp);\n        if (log.winner !== undefined) evictionOrder.push(log.winner);\n        // add each of the votes to the houseguest cells\n        for (const [key, value] of Object.entries(log.votes)) {\n            // typescript for .. in loops kinda suck so i need to do a sketchy type conversion\n            const id: number = (key as unknown) as number;\n            const vote: VoteType = value;\n            houseguestCells[id].push(vote.render(gameState));\n        }\n        if (log.winner !== undefined && log.runnerUp !== undefined) {\n            houseguestCells[log.winner].push(new WinnerVote().render(gameState));\n            houseguestCells[log.runnerUp].push(new RunnerUpVote().render(gameState));\n            evictedCells.push(\n                <RunnerUpCell>\n                    <CenteredBold noMargin={true}>{getById(gameState, log.runnerUp).name}</CenteredBold>\n                    <Centered noMargin={true}>\n                        <small>Finalist</small> {/** TODO: put \"X votes\" here instead. */}\n                    </Centered>\n                </RunnerUpCell>\n            );\n            winnerCells.push(\n                <WinnerCell>\n                    <CenteredBold noMargin={true}>{getById(gameState, log.winner).name}</CenteredBold>\n                    <Centered noMargin={true}>\n                        <small>Winner</small>\n                    </Centered>\n                </WinnerCell>\n            );\n        }\n    });\n    preVetoCells.push(\n        <White key={`preveto--finale`} rowSpan={3}>\n            <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n        </White>\n    );\n    const winnerRow = <tr>{winnerCells}</tr>;\n    const topRow = <tr>{topRowCells}</tr>;\n    const preVetoRow = <tr>{preVetoCells}</tr>;\n    const vetoRow = <tr>{vetoCells}</tr>;\n    const postVetoRow = <tr>{postVetoCells}</tr>;\n    const blackRow = (\n        <BlackRow>\n            <td colSpan={gameState.houseguests.length} />\n        </BlackRow>\n    );\n    const houseguestRows: JSX.Element[] = [];\n    const evictedRow = <tr>{evictedCells}</tr>;\n    let evictionColSpan = -1;\n    const weeks = evictionOrder.length;\n    evictionOrder.reverse().forEach((id, i) => {\n        if (evictionColSpan > 0) {\n            const weekText = i === 2 ? \"(Finale)\" : `(Week ${weeks - i})`;\n            const isJury = getById(gameState, id).isJury;\n            const colSpan = isJury ? evictionColSpan - 1 : evictionColSpan;\n            const evicted = (\n                <Evicted colSpan={colSpan} key={`evicted-week-${weeks - i}`}>\n                    <CenteredItallic noMargin={true}>Evicted</CenteredItallic>\n                    <CenteredItallic noMargin={true}>\n                        <small>{weekText}</small>\n                    </CenteredItallic>\n                </Evicted>\n            );\n            if (!isJury) {\n                houseguestCells[id].push(evicted); // not jury, they dead\n            } else {\n                const tempList = houseguestCells[id].slice(0, -1);\n                tempList.push(evicted);\n                tempList.push(houseguestCells[id][houseguestCells[id].length - 1]);\n                houseguestCells[id] = tempList;\n            }\n        }\n        houseguestRows.push(<tr key={`hgrow--${id}`}>{houseguestCells[id]}</tr>);\n        evictionColSpan++;\n    });\n\n    return (\n        <div>\n            <FullscreenButton />\n            <EndgameTable>\n                <tbody>\n                    {topRow}\n                    {preVetoRow}\n                    {vetoRow}\n                    {postVetoRow}\n                    {blackRow}\n                    {houseguestRows}\n                    {blackRow}\n                    {evictedRow}\n                    {winnerRow}\n                </tbody>\n            </EndgameTable>\n        </div>\n    );\n}\n\nfunction generateEvictedRow(\n    log: EpisodeLog | undefined,\n    i: number,\n    cells: JSX.Element[],\n    gameState: GameState\n) {\n    if (!log) {\n        cells.push(\n            <Gray key={i} rowSpan={2}>\n                <CenteredBold noMargin={true}>Evicted</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n\n    const voteTextLine1 =\n        log.soleVoter !== undefined\n            ? `${log.soleVoter}'s choice`\n            : `${log.votesInMajority} of ${log.outOf} votes`;\n\n    cells.push(\n        <Evicted key={i} rowSpan={2}>\n            <Centered noMargin={true}>\n                <b>{getById(gameState, log.evicted).name}</b>\n                <br />\n                <small>\n                    {voteTextLine1} <br />\n                    to evict\n                </small>\n            </Centered>\n        </Evicted>\n    );\n}\n\nfunction generatePostVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`postVeto--${i}`}>\n                <CenteredBold noMargin={true}>\n                    Nominations\n                    <br />\n                    <small>(post-veto)</small>\n                </CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    cells.push(\n        <White key={`postVeto--${i}`}>\n            <Centered noMargin={true}>\n                {log.nominationsPostVeto[0]}\n                <br /> {log.nominationsPostVeto[1]}\n            </Centered>\n        </White>\n    );\n}\n\nfunction generateVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`veto--${i}`}>\n                <CenteredBold noMargin={true}>Veto Winner</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    if (log.vetoWinner === undefined) return;\n\n    cells.push(\n        <White key={`veto--${i}`}>\n            <Centered noMargin={true}>{log.vetoWinner}</Centered>\n        </White>\n    );\n}\n\nfunction generatePreVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`preveto--${i}`}>\n                <CenteredBold noMargin={true}>\n                    Nominations\n                    <br />\n                    <small>(pre-veto)</small>\n                </CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    if (log.nominationsPreVeto.length === 0) {\n        cells.push(\n            <White key={`preveto--${i}`} rowSpan={2}>\n                <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n            </White>\n        );\n        return;\n    }\n    cells.push(\n        <White key={`preveto--${i}`}>\n            <Centered noMargin={true}>\n                {log.nominationsPreVeto[0]}\n                <br /> {log.nominationsPreVeto[1]}\n            </Centered>\n        </White>\n    );\n}\n\nfunction generateTopRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[], max: number) {\n    if (!log) {\n        cells.push(<Gray key={`toprow--${i}`} />);\n        return;\n    }\n    if (i === max) {\n        cells.push(\n            <Gray key={`toprow--${i}`} colSpan={2}>\n                <CenteredBold noMargin={true}>Finale</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    cells.push(\n        <Gray key={`toprow--${i}`}>\n            <CenteredBold noMargin={true}>Week {i}</CenteredBold>\n        </Gray>\n    );\n}\n","import React from \"react\";\nimport { GameState, getById } from \"../gameState\";\nimport { CenteredItallic, Centered } from \"../../components/layout/centered\";\nimport {\n    EndgameTableCell,\n    WinnerCell,\n    RunnerUpCell,\n    NomineeCell,\n    HohCell,\n} from \"../../components/episode/scenes/votingTable\";\n\nlet voteKey = 0;\n\nfunction getKey(): string {\n    return `${voteKey++}-- vote key`;\n}\n\nexport interface VoteType {\n    id: number;\n    render: (state: GameState) => JSX.Element;\n}\n\nexport class NormalVote implements VoteType {\n    id: number;\n    render = (state: GameState) => (\n        <EndgameTableCell key={getKey()}>\n            <Centered noMargin={true}>{getById(state, this.id).name}</Centered>\n        </EndgameTableCell>\n    );\n    constructor(id: number) {\n        this.id = id;\n    }\n}\n\nexport class WinnerVote implements VoteType {\n    id: number = 1; // unused\n    render = (state: GameState) => (\n        <WinnerCell>\n            <Centered noMargin={true}>Winner</Centered>\n        </WinnerCell>\n    );\n}\n\nexport class RunnerUpVote implements VoteType {\n    id: number = 1; // unused\n    render = (state: GameState) => (\n        <RunnerUpCell>\n            <Centered noMargin={true}>Finalist</Centered>\n        </RunnerUpCell>\n    );\n}\n\nexport class NomineeVote implements VoteType {\n    id: number = -1;\n    evicted: boolean;\n    render = (state: GameState) => (\n        <NomineeCell key={getKey()}>\n            <CenteredItallic noMargin={true}>Nominated</CenteredItallic>\n        </NomineeCell>\n    );\n    constructor(evicted: boolean) {\n        this.evicted = evicted;\n    }\n}\n\nexport class HoHVote implements VoteType {\n    id: number;\n\n    get hohText(): JSX.Element {\n        return (\n            <CenteredItallic noMargin={true}>\n                Head of\n                <br />\n                Household\n            </CenteredItallic>\n        );\n    }\n\n    private hohVote(state: GameState): JSX.Element {\n        return <CenteredItallic noMargin={true}>{getById(state, this.id).name}</CenteredItallic>;\n    }\n\n    render = (state: GameState) => {\n        return <HohCell key={getKey()}>{this.id == -1 ? this.hohText : this.hohVote(state)}</HohCell>;\n    };\n    constructor(id?: number) {\n        this.id = id === undefined ? -1 : id;\n    }\n}\n","import { GameState, getJurors, nonEvictedHouseguests, MutableGameState, Houseguest } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { castJuryVote } from \"../../../utils/ai/aiApi\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport React from \"react\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport { NormalVote } from \"../../../model/logging/voteType\";\n\nexport function juryVoteScene(initialGameState: GameState): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    const jurors: Houseguest[] = getJurors(newGameState);\n    const finalists = nonEvictedHouseguests(newGameState);\n    const votes: Array<ProfileHouseguest[]> = [[], []];\n    jurors.forEach(juror => {\n        const decision = castJuryVote(juror, finalists);\n        const result: ProfileHouseguest = { ...juror };\n        votes[decision].push(result);\n        newGameState.currentLog.votes[juror.id] = new NormalVote(finalists[decision].id);\n    });\n    const votesFor0 = votes[0].length;\n    const votesFor1 = votes[1].length;\n    const isUnanimous = votesFor0 === 0 || votesFor1 === 0;\n    const voteCountText = isUnanimous\n        ? \"By a unanimous vote...\"\n        : `By a vote of ${votesFor0} to ${votesFor1}...`;\n\n    const winner = votesFor0 > votesFor1 ? finalists[0] : finalists[1];\n    const runnerUp = votesFor0 < votesFor1 ? finalists[0] : finalists[1];\n    newGameState.currentLog.winner = winner.id;\n    newGameState.currentLog.runnerUp = runnerUp.id;\n    const scene = new Scene({\n        title: \"Jury Votes\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <CenteredBold>{voteCountText}</CenteredBold>\n                <div className=\"columns is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[0]} centered={true} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[1]} centered={true} />\n                    </DividerBox>\n                </div>\n                <Portraits houseguests={finalists} centered={true} />\n                <CenteredBold>{`Congratulations, ${winner.name}... you are the winner of Big Brother!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [newGameState, scene];\n}\n","import React from \"react\";\nimport { EpisodeType, Episode, InitEpisode } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { finalHohCompScene } from \"./scenes/finalHohCompScene\";\nimport { finalEvictionScene } from \"./scenes/finalEvictionScene\";\nimport { juryVoteScene } from \"./scenes/juryVoteScene\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherFinale: EpisodeType = {\n    canPlayWith: (n: number) => n === 3,\n    eliminates: 2,\n    arrowsEnabled: true,\n    hasViewsbar: true,\n};\n\nexport function generateBbFinale(initialGameState: GameState): BigBrotherFinaleEpisode {\n    const title = \"Finale\";\n    const content = (\n        <HasText>\n            Finale Night\n            <MemoryWall houseguests={initialGameState.houseguests} /> <br />\n            <NextEpisodeButton />\n        </HasText>\n    );\n    let currentGameState;\n    let hohCompScene;\n    let finalHoH;\n    const scenes = [];\n    [currentGameState, hohCompScene, finalHoH] = finalHohCompScene(initialGameState);\n    scenes.push(hohCompScene);\n    let finalEviction;\n    [currentGameState, finalEviction] = finalEvictionScene(currentGameState, finalHoH);\n    scenes.push(finalEviction);\n    const [gameState, juryScene] = juryVoteScene(currentGameState);\n    scenes.push(juryScene);\n    return new BigBrotherFinaleEpisode({ gameState, content, title, scenes, type: BigBrotherFinale });\n}\n\nexport class BigBrotherFinaleEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = BigBrotherFinale;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    nonEvictedHouseguests,\n    randomPlayer,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portraits, Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\n\nexport function finalHohCompScene(initialGameState: GameState): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n    const final3 = nonEvictedHouseguests(initialGameState);\n    const enduranceWinner = randomPlayer(final3);\n    const enduranceLosers = final3.filter(hg => hg.id !== enduranceWinner.id);\n    const skillWinner = randomPlayer(final3, [enduranceWinner]);\n    const finalHoH = getById(newGameState, randomPlayer([enduranceWinner, skillWinner]).id);\n    finalHoH.hohWins++;\n    const scene: Scene = new Scene({\n        title: \"Final HoH Competition\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>The final 3 houseguests compete in the endurance competition.</Centered>\n                <Portraits houseguests={final3} centered={true} />\n                <Portrait houseguest={enduranceWinner} centered={true} />\n                <CenteredBold>{`${enduranceWinner.name} has won the endurance competition!`}</CenteredBold>\n                <hr />\n                <Centered>{`${enduranceLosers[0].name} and ${enduranceLosers[1].name} compete in the skill competition.`}</Centered>\n                <Portraits houseguests={enduranceLosers} centered={true} />\n                <Portrait houseguest={skillWinner} centered={true} />\n                <CenteredBold>{`${skillWinner.name} has won the skill competition!`}</CenteredBold>\n                <hr />\n                <Centered>{`${enduranceWinner.name} and ${skillWinner.name} compete in the quiz competition.`}</Centered>\n                <Portraits houseguests={[enduranceWinner, skillWinner]} centered={true} />\n                <Portrait houseguest={finalHoH} centered={true} />\n                <CenteredBold>{`Congratulations ${finalHoH.name}, you are the final Head of Household!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, finalHoH];\n}\n","import { GameState, Houseguest, MutableGameState, nonEvictedHouseguests } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { castEvictionVote } from \"../../../utils/ai/aiApi\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { evictHouseguest } from \"../bigBrotherEpisode\";\nimport { Portrait, Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { CenteredBold, Centered } from \"../../layout/centered\";\nimport { HoHVote, NomineeVote } from \"../../../model/logging/voteType\";\n\nexport function finalEvictionScene(initialGameState: GameState, HoH: Houseguest): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    const nominees = nonEvictedHouseguests(newGameState).filter((hg) => hg.id !== HoH.id);\n    newGameState.currentLog.nominationsPostVeto = nominees.map((hg) => hg.name);\n    const { decision: vote, reason } = castEvictionVote(HoH, nominees, newGameState);\n    const evictee = nominees[vote];\n    const survivor = nominees[vote == 1 ? 0 : 1];\n    newGameState.currentLog.soleVoter = HoH.name;\n    newGameState.currentLog.votes[survivor.id] = new NomineeVote(false);\n    newGameState.currentLog.votes[HoH.id] = new HoHVote(evictee.id);\n    newGameState.currentLog.votesInMajority = 1;\n    newGameState.currentLog.outOf = 1;\n    const hoh: ProfileHouseguest = { ...HoH };\n    hoh.tooltip = reason;\n    evictHouseguest(newGameState, evictee.id);\n    const scene: Scene = new Scene({\n        title: \"Final Eviction\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>\n                    {`As the final HoH of the season, ${HoH.name}, you may now cast the sole vote to evict.`}\n                    <Portrait houseguest={hoh} centered={true} />\n                    <CenteredBold>{`I vote to evict ${evictee.name}.`}</CenteredBold>\n                    <Portraits houseguests={nominees} centered={true} />\n                    <Centered>\n                        It's official... {evictee.name}, you will be the final person leaving the Big Brother\n                        House.\n                    </Centered>\n                </Centered>\n                <NextEpisodeButton />\n            </div>\n        ),\n    });\n    return [new GameState(newGameState), scene];\n}\n","import { Episode, InitEpisode, EpisodeType } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { evictHouseguest } from \"./bigBrotherEpisode\";\nimport { generateVotingTable } from \"./scenes/votingTable\";\n\nexport const GameOver: EpisodeType = {\n    canPlayWith: (n: number) => n === 1,\n    eliminates: 1,\n    arrowsEnabled: false,\n    hasViewsbar: false\n};\n\nexport function generateGameOver(gameState: GameState): GameOverEpisode {\n    const title = \"Game Over\";\n    const scenes: Scene[] = [];\n    const content = generateVotingTable(gameState);\n    gameState.houseguests.forEach(hg => {\n        evictHouseguest(gameState, hg.id);\n    });\n    return new GameOverEpisode({ gameState, content, title, scenes, type: GameOver });\n}\n\nexport class GameOverEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { VoteType } from \"./voteType\";\n\nexport class EpisodeLog {\n    public nominationsPreVeto: string[] = [];\n    public vetoWinner?: string;\n    public winner?: number;\n    public runnerUp?: number;\n    public nominationsPostVeto: string[] = [];\n    public evicted: number = -1;\n    public votes: { [id: string]: VoteType } = {};\n    public votesInMajority: number = -1;\n    public outOf: number = -1;\n    public soleVoter?: string;\n}\n","import {\n    GameState,\n    MutableGameState,\n    calculatePopularity,\n    nonEvictedHouseguests,\n    inJury,\n    getJurors\n} from \"../../model/gameState\";\nimport { Episode, Houseguest } from \"../../model\";\nimport { EpisodeType } from \"./episodes\";\nimport { BigBrotherVanilla, generateBbVanilla } from \"./bigBrotherEpisode\";\nimport { BigBrotherFinale, generateBbFinale } from \"./bigBrotherFinale\";\nimport { rng, roundTwoDigits } from \"../../utils\";\nimport { doesHeroWinTheFinale as heroWinsTheFinale } from \"../../utils/ai/aiUtils\";\nimport { classifyRelationship, RelationshipType as Relationship } from \"../../utils/ai/classifyRelationship\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport { GameOver, generateGameOver } from \"./gameOver\";\nimport { EpisodeLog } from \"../../model/logging/episodelog\";\n\nfunction firstImpressions(houseguests: Houseguest[]) {\n    for (let i = 0; i < houseguests.length; i++) {\n        const iMap = houseguests[i].relationships;\n        for (let j = i + 1; j < houseguests.length; j++) {\n            // creates a bunch of 100% random mutual relationships\n            const jMap = houseguests[j].relationships;\n            const impression = rng().randomFloat();\n            jMap[i] = impression;\n            iMap[j] = impression;\n        }\n    }\n}\n\nfunction populateSuperiors(houseguests: Houseguest[]) {\n    for (let i = 0; i < houseguests.length; i++) {\n        const hero = houseguests[i];\n        for (let j = i + 1; j < houseguests.length; j++) {\n            const villain = houseguests[j];\n            if (heroWinsTheFinale({ hero, villain }, houseguests)) {\n                villain.superiors.add(hero.id);\n            } else {\n                hero.superiors.add(villain.id);\n            }\n        }\n    }\n}\n\nfunction updatePowerRankings(houseguests: Houseguest[]) {\n    houseguests.forEach(hg => {\n        hg.powerRanking = new PowerRanking(\n            houseguests.length - 1 - hg.superiors.size,\n            houseguests.length - 1\n        );\n    });\n}\n\nfunction updatePopularity(gameState: GameState) {\n    const houseguests = nonEvictedHouseguests(gameState);\n    houseguests.forEach(hg => {\n        const result = calculatePopularity(hg, nonEvictedHouseguests(gameState));\n        hg.deltaPopularity = (roundTwoDigits(result) - roundTwoDigits(hg.popularity)) / 100;\n        hg.popularity = result;\n    });\n}\n\nfunction updateFriendCounts(gameState: GameState) {\n    const houseguests = nonEvictedHouseguests(gameState);\n    houseguests.forEach(hero => {\n        hero.getFriendEnemyCount = () => {\n            let friends = 0;\n            let enemies = 0;\n            houseguests.forEach(villain => {\n                const rel = classifyRelationship(\n                    hero.popularity,\n                    villain.popularity,\n                    hero.relationshipWith(villain)\n                );\n                if (hero.id === villain.id) {\n                    return;\n                } else if (rel === Relationship.Friend) {\n                    friends++;\n                } else if (rel === Relationship.Enemy) {\n                    enemies++;\n                }\n            });\n            return { friends, enemies };\n        };\n    });\n}\n\nexport class EpisodeFactory {\n    public nextEpisode(gameState: GameState, episodeType: EpisodeType): Episode {\n        let newState = new MutableGameState(gameState);\n        if (gameState.phase === 0) {\n            firstImpressions(newState.houseguests);\n        }\n        newState.phase++;\n        if (nonEvictedHouseguests(gameState).length > 2) {\n            newState.log[newState.phase] = new EpisodeLog();\n        }\n        // If jury starts this episode, populate superior/inferior data. In the future, every jury ep. (dynamic rels)\n        if (inJury(gameState) && getJurors(gameState).length === 0) {\n            populateSuperiors(nonEvictedHouseguests(newState));\n        }\n        if (inJury(gameState)) {\n            updatePowerRankings(nonEvictedHouseguests(newState));\n        }\n        updatePopularity(newState);\n        updateFriendCounts(newState);\n        const finalState = new GameState(newState);\n        switch (episodeType) {\n            case BigBrotherVanilla:\n                return generateBbVanilla(finalState);\n            case BigBrotherFinale:\n                return generateBbFinale(finalState);\n            case GameOver:\n                return generateGameOver(finalState);\n            default:\n                throw new Error(\"Unsupported Episode Type\");\n        }\n    }\n}\n","import {\n    MutableGameState,\n    getById,\n    inJury,\n    nonEvictedHouseguests,\n    GameState,\n    Houseguest,\n    EpisodeType,\n    Episode,\n    InitEpisode,\n} from \"../../model\";\nimport { getFinalists, finalJurySize } from \"../../model/season\";\nimport { generateHohCompScene } from \"./scenes/hohCompScene\";\nimport { generateNomCeremonyScene } from \"./scenes/nomCeremonyScene\";\nimport { generateVetoCompScene } from \"./scenes/vetoCompScene\";\nimport { generateVetoCeremonyScene } from \"./scenes/vetoCeremonyScene\";\nimport { generateEvictionScene } from \"./scenes/evictionScene\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Scene } from \"./scene\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherVanilla: EpisodeType = {\n    canPlayWith: (n: number) => {\n        return n > 1;\n    },\n    eliminates: 1,\n    arrowsEnabled: true,\n    hasViewsbar: true,\n};\n\n// Refactoring ideas\n/**\n * Might be best to start passing ids instead of houseguests for HoH/nominees/veto winner\n */\n\nexport function evictHouseguest(gameState: MutableGameState, id: number) {\n    const evictee = getById(gameState, id);\n    if (gameState.currentLog) gameState.currentLog.evicted = evictee.id;\n    evictee.isEvicted = true;\n    if (gameState.remainingPlayers - getFinalists() <= finalJurySize()) {\n        evictee.isJury = true;\n    }\n    if (inJury(gameState)) {\n        nonEvictedHouseguests(gameState).forEach((hg) => {\n            hg.superiors.delete(evictee.id);\n        });\n    }\n    gameState.remainingPlayers--;\n}\n\nexport function generateBbVanilla(initialGameState: GameState): BigBrotherVanillaEpisode {\n    let currentGameState;\n    let hohCompScene;\n    let hoh: Houseguest;\n    const scenes = [];\n    [currentGameState, hohCompScene, hoh] = generateHohCompScene(initialGameState);\n    scenes.push(hohCompScene);\n\n    let nomCeremonyScene;\n    let nominees: Houseguest[];\n    [currentGameState, nomCeremonyScene, nominees] = generateNomCeremonyScene(currentGameState, hoh);\n    scenes.push(nomCeremonyScene);\n\n    let vetoCompScene;\n    let povWinner: Houseguest;\n    [currentGameState, vetoCompScene, povWinner] = generateVetoCompScene(\n        currentGameState,\n        hoh,\n        nominees[0],\n        nominees[1]\n    );\n    scenes.push(vetoCompScene);\n    let vetoCeremonyScene;\n\n    [currentGameState, vetoCeremonyScene, nominees] = generateVetoCeremonyScene(\n        currentGameState,\n        hoh,\n        nominees,\n        povWinner\n    );\n    scenes.push(vetoCeremonyScene);\n\n    let evictionScene;\n    [currentGameState, evictionScene] = generateEvictionScene(currentGameState, hoh, nominees);\n    scenes.push(evictionScene);\n\n    const title = `Week ${currentGameState.phase}`;\n    const content = (\n        <HasText>\n            {`Week ${currentGameState.phase}`}\n            <MemoryWall houseguests={initialGameState.houseguests} /> <br />\n            <NextEpisodeButton />\n        </HasText>\n    );\n    const gameState = new GameState(currentGameState);\n    return new BigBrotherVanillaEpisode({ title, scenes, content, gameState, type: BigBrotherVanilla });\n}\nexport class BigBrotherVanillaEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = BigBrotherVanilla;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { GameState, Houseguest, MutableGameState, randomPlayer } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { HoHVote } from \"../../../model/logging/voteType\";\n\nexport function generateHohCompScene(initialGameState: GameState): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n\n    const previousHoh = initialGameState.previousHOH ? [initialGameState.previousHOH] : [];\n    const newHoH: Houseguest = randomPlayer(newGameState.houseguests, previousHoh);\n    newGameState.previousHOH = newHoH;\n    newGameState.currentLog.votes[newHoH.id] = new HoHVote();\n\n    newHoH.hohWins += 1;\n\n    const scene = new Scene({\n        title: \"HoH Competition\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>\n                    {previousHoh.length > 0 &&\n                        `Houseguests, it's time to find a new Head of Household. As outgoing HoH, ${previousHoh[0].name} will not compete. `}\n                </Centered>\n                <Portrait centered={true} houseguest={newHoH} />\n                <CenteredBold>{newHoH.name} has won Head of Household!</CenteredBold>\n                <br />\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n\n    return [new GameState(newGameState), scene, newHoH];\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    exclude,\n    nonEvictedHouseguests,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { shuffle } from \"lodash\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { nominateNPlayers } from \"../../../utils/ai/aiApi\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\n\nexport function generateNomCeremonyScene(\n    initialGameState: GameState,\n    HoH: Houseguest\n): [GameState, Scene, Houseguest[]] {\n    const newGameState = new MutableGameState(initialGameState);\n    const options = exclude(nonEvictedHouseguests(newGameState), [HoH]);\n    const nom1 = getById(newGameState, nominateNPlayers(HoH, options, newGameState, 2)[0].decision);\n    const nom2 = getById(\n        newGameState,\n        nominateNPlayers(HoH, exclude(options, [nom1]), newGameState, 2)[1].decision\n    );\n    nom1.nominations++;\n    nom2.nominations++;\n    newGameState.currentLog.nominationsPreVeto = [nom1.name, nom2.name];\n    const noms = shuffle([nom1, nom2]);\n    const scene = new Scene({\n        title: \"Nomination Ceremony\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>\n                    This is the nomination ceremony. It is my responsibility as the Head of Household to\n                    nominate two houseguests for eviction.\n                </Centered>\n                <Portrait centered={true} houseguest={HoH} />\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Centered> My first nominee is...</Centered>\n                        <Portrait centered={true} houseguest={noms[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Centered>My second nominee is...</Centered>\n                        <Portrait centered={true} houseguest={noms[1]} />\n                    </DividerBox>\n                </div>\n                <CenteredBold>{`I have nominated you, ${noms[0].name} and you, ${noms[1].name} for eviction.`}</CenteredBold>\n                <br />\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, [nom1, nom2]];\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    nonEvictedHouseguests,\n    randomPlayer,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\n\nexport function generateVetoCompScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    nom1: Houseguest,\n    nom2: Houseguest\n): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n\n    // pick players\n    const choices = nonEvictedHouseguests(newGameState);\n    let povPlayers: any[] = [];\n    const everyoneWillPlay = choices.length <= 6;\n\n    if (everyoneWillPlay) {\n        povPlayers.push({ ...HoH });\n        povPlayers.push({ ...nom1 });\n        povPlayers.push({ ...nom2 });\n        while (povPlayers.length < choices.length) {\n            povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        }\n    } else {\n        // TODO: houseguests choice picks\n        povPlayers.push({ ...HoH });\n        povPlayers.push({ ...nom1 });\n        povPlayers.push({ ...nom2 });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n    }\n    let povWinner = randomPlayer(povPlayers);\n    povWinner = getById(newGameState, povWinner.id);\n    povWinner.povWins++;\n    newGameState.currentLog.vetoWinner = povWinner.name;\n    let introText: string;\n    if (everyoneWillPlay) {\n        introText = \"Everyone left in the house will compete in this challenge.\";\n    } else {\n        introText = `${HoH.name}, as Head of Household, and ${nom1.name} and ${nom2.name} as nominees, will compete, as well as 3 others chosen by random draw.`;\n    }\n    const extras = [povPlayers[3]];\n    povPlayers[4] && extras.push(povPlayers[4]);\n    povPlayers[5] && extras.push(povPlayers[5]);\n    const scene = new Scene({\n        title: \"Veto Competition\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>It's time to pick players for the veto competition.</Centered>\n                <Portraits centered={true} houseguests={[HoH, nom1, nom2]} />\n                <Centered>{introText}</Centered>\n                <Portraits centered={true} houseguests={extras} />\n                <Centered>...</Centered>\n                <Portraits centered={true} houseguests={[povWinner]} />\n                <CenteredBold>{`${povWinner.name} has won the Golden Power of Veto!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, povWinner];\n}\n","import { GameState, Houseguest, getById, exclude } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { useGoldenVeto, nominateNPlayers } from \"../../../utils/ai/aiApi\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\n\nexport function generateVetoCeremonyScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    initialNominees: Houseguest[],\n    povWinner: Houseguest\n): [GameState, Scene, Houseguest[]] {\n    let povTarget: Houseguest | null = null;\n    let descisionText = \"\";\n    initialNominees[0] = getById(initialGameState, initialNominees[0].id);\n    initialNominees[1] = getById(initialGameState, initialNominees[1].id);\n    HoH = getById(initialGameState, HoH.id);\n    const vetoChoice = useGoldenVeto(povWinner, initialNominees, initialGameState);\n    povTarget = vetoChoice.decision;\n    if (!povTarget) {\n        descisionText += \"... not to use the power of veto.\";\n    } else if (povWinner.id == initialNominees[0].id || povWinner.id == initialNominees[1].id) {\n        descisionText += \"...to use the power of veto on myself.\";\n    } else {\n        descisionText += `...to use the power of veto on ${povTarget.name}.`;\n    }\n    let replacementSpeech = \"\";\n    let nameAReplacement = \"\";\n    let finalNominees: any[] = [...initialNominees];\n    if (povTarget) {\n        nameAReplacement += ` ${HoH.name}, since I have just vetoed one of your nominations, you must name a replacement nominee.`;\n        const replacementNom = {\n            ...getById(\n                initialGameState,\n                nominateNPlayers(\n                    HoH,\n                    exclude(initialGameState.houseguests, [\n                        HoH,\n                        initialNominees[0],\n                        initialNominees[1],\n                        povWinner\n                    ]),\n                    initialGameState,\n                    1\n                )[0].decision\n            )\n        };\n        const replacementIndex = initialNominees.findIndex(hg => hg.id === vetoChoice.decision!.id);\n        finalNominees[replacementIndex] = replacementNom;\n        replacementNom.nominations++;\n        getById(initialGameState, replacementNom.id).nominations++;\n        replacementSpeech = `My replacement nominee is ${replacementNom.name}.`;\n    }\n    const scene = new Scene({\n        title: \"Veto Ceremony\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>This is the Veto Ceremony.</Centered>\n                <Centered>\n                    {`${initialNominees[0].name} and ${initialNominees[1].name} have been nominated for eviction, \n                    but I have the power to veto one of these nominations.`}\n                </Centered>\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={initialNominees[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={initialNominees[1]} />\n                    </DividerBox>\n                </div>\n                <CenteredBold>\n                    I have decided... <br />\n                </CenteredBold>\n                <Portrait centered={true} houseguest={{ ...povWinner, tooltip: vetoChoice.reason }} />\n                <CenteredBold noMargin={true}>{descisionText}</CenteredBold>\n                <Centered>{nameAReplacement}</Centered>\n                {replacementSpeech && <Portrait centered={true} houseguest={HoH} />}\n                <CenteredBold>{replacementSpeech}</CenteredBold>\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={finalNominees[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={finalNominees[1]} />\n                    </DividerBox>\n                </div>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    initialGameState.currentLog.nominationsPostVeto = [finalNominees[0].name, finalNominees[1].name];\n    return [initialGameState, scene, finalNominees];\n}\n","import { GameState, Houseguest, MutableGameState, nonEvictedHouseguests, getById } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { shuffle } from \"lodash\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { castEvictionVote } from \"../../../utils/ai/aiApi\";\nimport { evictHouseguest } from \"../bigBrotherEpisode\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { CenteredBold, Centered } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\nimport { NomineeVote, NormalVote, HoHVote } from \"../../../model/logging/voteType\";\n\nexport function generateEvictionScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    nominees: Houseguest[]\n): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    nominees = shuffle(nominees);\n    const votes: Array<ProfileHouseguest[]> = [[], []];\n    let lastVoter: Houseguest;\n    nonEvictedHouseguests(newGameState).forEach(hg => {\n        if (hg.id !== nominees[0].id && hg.id !== nominees[1].id && hg.id !== HoH.id) {\n            const logic = castEvictionVote(hg, nominees, newGameState);\n            const result: ProfileHouseguest = { ...hg };\n            result.tooltip = logic.reason;\n            newGameState.currentLog.votes[hg.id] = new NormalVote(nominees[logic.decision].id);\n            votes[logic.decision].push(result);\n            lastVoter = hg;\n        }\n    });\n    const votesFor0 = votes[0].length;\n    const votesFor1 = votes[1].length;\n    newGameState.currentLog.outOf = votesFor0 + votesFor1;\n    if (votesFor0 + votesFor1 === 1) {\n        newGameState.currentLog.soleVoter = lastVoter!!.name;\n    }\n    let tieVote = votesFor0 === votesFor1;\n    let tieBreaker = { decision: 0, reason: \"Error you should not be seeing this\" };\n    if (tieVote) {\n        newGameState.currentLog.outOf++;\n        tieBreaker = castEvictionVote(HoH, nominees, newGameState);\n        newGameState.currentLog.votes[HoH.id] = new HoHVote(nominees[tieBreaker.decision].id);\n    }\n    let evictee: Houseguest;\n    if (votesFor0 > votesFor1) {\n        evictee = nominees[0];\n        newGameState.currentLog.votesInMajority = votesFor0;\n    } else if (votesFor1 > votesFor0) {\n        evictee = nominees[1];\n        newGameState.currentLog.votesInMajority = votesFor1;\n    } else {\n        evictee = nominees[tieBreaker.decision];\n        newGameState.currentLog.votesInMajority = votesFor1 + 1;\n    }\n    newGameState.currentLog.votes[nominees[0].id] = new NomineeVote(evictee.id === nominees[0].id);\n    newGameState.currentLog.votes[nominees[1].id] = new NomineeVote(evictee.id !== nominees[0].id);\n\n    evictHouseguest(newGameState, evictee.id);\n    const isUnanimous = votesFor0 === 0 || votesFor1 === 0;\n    const voteCountText = isUnanimous\n        ? \"By a unanimous vote...\"\n        : `By a vote of ${votesFor0} to ${votesFor1}...`;\n\n    const displayHoH: ProfileHouseguest = { ...HoH };\n    displayHoH.tooltip = tieBreaker.reason;\n    const scene = new Scene({\n        title: \"Live Eviction\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <CenteredBold>{voteCountText}</CenteredBold>\n                <div className=\"columns is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[0]} centered={true} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[1]} centered={true} />\n                    </DividerBox>\n                </div>\n                {tieVote && (\n                    <div>\n                        <CenteredBold> We have a tie.</CenteredBold>\n                        <Centered>{`${HoH.name}, as current Head of Household, you must cast the sole vote to evict.`}</Centered>\n                        <Portraits houseguests={[displayHoH]} centered={true} />\n                        <CenteredBold>I vote to evict {`${evictee.name}.`}</CenteredBold>\n                    </div>\n                )}\n                <Portraits\n                    houseguests={[\n                        getById(newGameState, nominees[0].id),\n                        getById(newGameState, nominees[1].id)\n                    ]}\n                    centered={true}\n                />\n                <CenteredBold>{`${evictee.name}... you have been evicted from the Big Brother House.`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [newGameState, scene];\n}\n","import { Subscription } from \"rxjs\";\nimport { Sidebar } from \"./sidebar\";\nimport { Season } from \"../../model/season\";\nimport { Episode, nonEvictedHouseguests, getById } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport {\n    mainContentStream$,\n    episodes$,\n    switchEpisode$,\n    newEpisode,\n    switchSceneRelative,\n    cast$,\n    getSelectedPlayer,\n    selectedPlayer$\n} from \"../../subjects/subjects\";\n\ninterface IndexedScene {\n    scene: Scene;\n    index: number;\n}\n\nconst LEFT = 37;\nconst RIGHT = 39;\n\nexport class SidebarController {\n    private view: Sidebar;\n    private subscriptions: Subscription[] = [];\n    private season: Season = new Season();\n    private scenes: IndexedScene[] = [];\n    private selectedEpisode: number = 0;\n\n    public constructor(view: Sidebar) {\n        this.view = view;\n        this.subscriptions.push(\n            episodes$.subscribe({\n                next: episode => this.onNewEpisode(episode)\n            })\n        );\n        this.subscriptions.push(\n            switchEpisode$.subscribe({\n                next: (value: number) => {\n                    this.switchSceneRelative(value);\n                }\n            })\n        );\n        this.subscriptions.push(\n            cast$.subscribe({\n                next: () => (this.season = new Season())\n            })\n        );\n    }\n\n    public getSelectedEpisode() {\n        return this.selectedEpisode;\n    }\n\n    public async switchToScene(id: number) {\n        mainContentStream$.next(this.scenes[id].scene.render);\n        this.selectedEpisode = this.scenes[id].index;\n        await this.view.setState({ selectedScene: id });\n        if (getSelectedPlayer() !== null) {\n            selectedPlayer$.next(\n                getById(this.scenes[this.view.state.selectedScene].scene.gameState, getSelectedPlayer()!.id)\n            );\n        }\n    }\n\n    private switchSceneRelative = (delta: number) => {\n        const selectedScene = this.view.state.selectedScene;\n        const renderedScenes = this.scenes.length;\n        const targetScene = selectedScene + delta;\n        if (targetScene < 0) {\n            return;\n        }\n        const lastEpisode = this.view.state.episodes[this.view.state.episodes.length - 1];\n        if (targetScene < renderedScenes) {\n            // Go back to an earlier scene\n            this.switchToScene(targetScene);\n        } else if (targetScene === renderedScenes) {\n            // Generate a new scene, then jump to it\n            const currentGameState = lastEpisode.gameState;\n            const newPlayerCount = nonEvictedHouseguests(lastEpisode.gameState).length;\n            const nextEpisodeType = this.season.whichEpisodeType(newPlayerCount);\n            if (newPlayerCount > 0) {\n                newEpisode(this.season.renderEpisode(currentGameState, nextEpisodeType));\n                this.switchSceneRelative(1);\n            }\n        }\n    };\n\n    get handleKeyDown(): (e: any) => void {\n        return this._handleKeyDown.bind(this);\n    }\n\n    private _handleKeyDown(event: any) {\n        const state = this.view.state;\n\n        if (\n            state.episodes[this.selectedEpisode] === undefined ||\n            !state.episodes[this.selectedEpisode].type.arrowsEnabled\n        ) {\n            return;\n        }\n        if (event.keyCode === LEFT) {\n            switchSceneRelative(-1);\n        } else if (event.keyCode === RIGHT) {\n            switchSceneRelative(1);\n        }\n    }\n\n    private onNewEpisode(episode: Episode | null) {\n        if (!episode) {\n            this.view.setState({ episodes: [], selectedScene: 0 });\n            this.scenes = [];\n        } else {\n            const newState = { ...this.view.state };\n            // starts at -1: prevent OBOE\n            const latestIndex = this.scenes.length === 0 ? -1 : this.scenes[this.scenes.length - 1].index;\n            const index = latestIndex + 1;\n            this.scenes.push({ scene: episode, index });\n            episode.scenes.forEach(scene => this.scenes.push({ scene, index }));\n            newState.episodes.push(episode);\n            this.view.setState(newState);\n        }\n    }\n\n    public destroy() {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n}\n","import React from \"react\";\nimport { SidebarController } from \"./sidebarController\";\nimport { PregameEpisode } from \"../episode/pregameEpisode\";\nimport { Episode, GameState } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport { newEpisode } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\nimport { HasText } from \"../layout/text\";\ninterface SidebarState {\n    episodes: Episode[];\n    selectedScene: number;\n}\n\nexport class Sidebar extends React.Component<{}, SidebarState> {\n    private controller: SidebarController;\n    public constructor(props: {}) {\n        super(props);\n        this.controller = new SidebarController(this);\n        this.state = { episodes: [], selectedScene: 0 };\n        newEpisode(new PregameEpisode(new GameState([])));\n    }\n\n    public componentDidMount() {\n        document.addEventListener(\"keydown\", this.controller.handleKeyDown);\n    }\n\n    public componentWillUnmount() {\n        this.controller.destroy();\n    }\n\n    public render() {\n        return (\n            <Box style={{ minWidth: 180 }}>\n                <HasText>{this.getEpisodes()}</HasText>\n            </Box>\n        );\n    }\n\n    private getHighlight(title: string, key: number) {\n        if (key === this.state.selectedScene) {\n            return <mark>{title}</mark>;\n        }\n        return title;\n    }\n\n    private getEpisodes() {\n        const result: JSX.Element[] = [];\n        // Weird OBOE to make keys start at 0\n        let episodeKey = -1;\n        let breakKey = 0;\n        this.state.episodes.forEach((episode: Episode) => {\n            const id = ++episodeKey;\n            result.push(\n                <b\n                    key={id}\n                    onClick={() => {\n                        this.controller.switchToScene(id);\n                    }}\n                >\n                    {this.getHighlight(episode.title, id)}\n                </b>\n            );\n            result.push(<br key={--breakKey} />);\n            episode.scenes.forEach((scene: Scene) => {\n                const id = ++episodeKey;\n                if (this.controller.getSelectedEpisode() === episode.gameState.phase) {\n                    result.push(\n                        <a key={id} onClick={() => this.controller.switchToScene(id)}>\n                            {this.getHighlight(scene.title, id)}\n                        </a>\n                    );\n                    result.push(<br key={--breakKey} />);\n                }\n            });\n        });\n        return result;\n    }\n}\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport { mainContentStream$ } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\n\nconst MainContentAreaWrapper = styled(Box)`\n    overflow-x: auto;\n`;\n\nexport class MainContentArea extends React.Component<{}, { content: any }> {\n    // a simple class that displays whatever it gets fed through the main content stream.\n\n    private contentStream: any;\n\n    public constructor(props: any) {\n        super(props);\n        this.state = { content: null };\n    }\n\n    public componentDidMount() {\n        this.contentStream = mainContentStream$.subscribe((content) => {\n            this.setState({ content });\n        });\n    }\n\n    public componentDidUpdate(prevProps: never, prevState: any) {\n        if (prevState.content !== this.state.content) {\n            window.scrollTo(0, 0);\n        }\n    }\n\n    public componentWillUnmount() {\n        this.contentStream.unsubscribe();\n    }\n\n    public render() {\n        return <MainContentAreaWrapper>{this.state.content}</MainContentAreaWrapper>;\n    }\n}\n","import \"./bulma.scss\";\nimport React from \"react\";\nimport { Sidebar } from \"../sidebar/sidebar\";\nimport { Topbar } from \"../topbar/topBar\";\nimport { MainContentArea } from \"./mainContentArea\";\nimport { MainPageController } from \"./mainPageController\";\n\ninterface MainPageProps {\n    controller: MainPageController;\n}\n\ninterface MainPageState {\n    fullscreen: boolean;\n}\n\nexport class MainPage extends React.Component<MainPageProps, MainPageState> {\n    public constructor(props: MainPageProps) {\n        super(props);\n        this.state = { fullscreen: false };\n        props.controller.inject(this);\n    }\n    public componentDidMount() {\n        this.props.controller.subscribe();\n    }\n    public componentWillUnmount() {\n        this.props.controller.unsubscribe();\n    }\n\n    public render() {\n        const fullscreen = this.state.fullscreen;\n        const hideOnFullscreen = { display: fullscreen ? \"none\" : \"\" };\n        const wrapperStyle = fullscreen\n            ? { margin: \"auto\" }\n            : { margin: \"auto\", maxWidth: 1380, overflow: \"hidden\" };\n        return (\n            <div style={wrapperStyle}>\n                <Topbar style={hideOnFullscreen} />\n                <div className=\"columns\">\n                    <div className=\"column is-narrow\" style={hideOnFullscreen}>\n                        <Sidebar />\n                    </div>\n\n                    <div className=\"column\" style={{ overflowX: \"hidden\" }}>\n                        <MainContentArea />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import { MainPage } from \"./mainPage\";\nimport { Subscription } from \"rxjs\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\n\nexport class MainPageController {\n    private view: MainPage = new MainPage({ controller: this });\n    private subscriptions: Subscription[] = [];\n    public inject(page: MainPage) {\n        this.view = page;\n    }\n\n    public subscribe(): void {\n        this.unsubscribe();\n        this.subscriptions.push(\n            isFullscreen$.subscribe((fullscreen: boolean) => {\n                this.view.setState({ fullscreen });\n            })\n        );\n    }\n\n    public unsubscribe(): void {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n}\n","import { createGlobalStyle } from \"styled-components\";\nimport { ColorTheme } from \"./theme\";\n\nexport const GlobalStyles = createGlobalStyle`\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n  div {\n    transition: all 0.25s linear;\n  }\n\n  body {\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bg};\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n       transition: all 0.25s linear;\n  }`;\n","import React from \"react\";\nimport { MainPage } from \"./components/mainPage/mainPage\";\nimport { MainPageController } from \"./components/mainPage/mainPageController\";\nimport { ThemeProvider } from \"styled-components\";\nimport { lightTheme, ColorTheme, darkTheme } from \"./theme/theme\";\nimport { GlobalStyles } from \"./theme/globalTheme\";\nimport { theme$ } from \"./subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nclass App extends React.Component<{}, { theme: ColorTheme }> {\n    private sub: Subscription | null = null;\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            theme:\n                window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n                    ? darkTheme\n                    : lightTheme,\n        };\n    }\n\n    public componentDidMount() {\n        this.sub = theme$.subscribe((theme) => {\n            this.setState({ theme });\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    render() {\n        return (\n            <ThemeProvider theme={this.state.theme}>\n                <>\n                    <GlobalStyles />\n                    <MainPage controller={new MainPageController()} />\n                </>\n            </ThemeProvider>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {});\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {});\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}