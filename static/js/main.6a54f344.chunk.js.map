{"version":3,"sources":["images/src sync nonrecursive /.png","images/src/Archbishop Geofri.png","images/src/Atziri.png","images/src/Avarius.png","images/src/Baran.png","images/src/Brutus.png","images/src/Doedre.png","images/src/Dominus.png","images/src/Eleron.png","images/src/Hillock.png","images/src/Izaro.png","images/src/Kitava.png","images/src/Kuduku.png","images/src/Lunaris.png","images/src/Malachai.png","images/src/Piety.png","images/src/Rhys.png","images/src/Shavronne.png","images/src/Solaris.png","images/src/The Elder.png","images/src/The Shaper.png","images/src/Veritania.png","model/powerRanking.ts","utils/utilities.ts","utils/relationshipMap.ts","model/color.ts","utils/ai/classifyRelationship.ts","components/playerPortrait/houseguestPortraitController.ts","components/playerPortrait/houseguestPortrait.tsx","components/playerPortrait/selectedPortrait.ts","components/playerPortrait/houseguestToPortrait.tsx","components/tooltip/tooltip.tsx","components/playerPortrait/portraits.tsx","components/layout/box.tsx","components/layout/centered.tsx","components/memoryWall/memoryWall.tsx","components/layout/text.ts","components/playerPortrait/subtitle.tsx","model/portraitDisplayMode.ts","components/viewsBar/viewBarTag.tsx","components/viewsBar/viewBar.tsx","components/memoryWallScreen/memoryWallScreen.tsx","subjects/subjects.tsx","utils/BbRandomGenerator.ts","model/gameState.ts","model/season.ts","model/logging/episodelog.ts","components/episode/episodeFactory.ts","components/episode/bigBrotherEpisode.tsx","components/episode/bigBrotherFinale.tsx","components/mainPage/fullscreenButton.tsx","components/episode/scenes/votingTable.tsx","components/episode/gameOver.tsx","components/sidebar/sidebarController.ts","components/sidebar/sidebar.tsx","theme/theme.ts","components/topbar/themeSwitch.tsx","images/RelationshipMapper.ts","utils/base64.ts","images/decoder.ts","components/topbar/topBarController.ts","images/initialProfiles.ts","components/topbar/topBar.tsx","components/mainPage/mainContentArea.tsx","components/mainPage/mainPage.tsx","components/mainPage/mainPageController.ts","theme/globalTheme.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["map","./Archbishop Geofri.png","./Atziri.png","./Avarius.png","./Baran.png","./Brutus.png","./Doedre.png","./Dominus.png","./Eleron.png","./Hillock.png","./Izaro.png","./Kitava.png","./Kuduku.png","./Lunaris.png","./Malachai.png","./Piety.png","./Rhys.png","./Shavronne.png","./Solaris.png","./The Elder.png","./The Shaper.png","./Veritania.png","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","p","PowerRanking","beats","outOf","classCallCheck","this","createClass","key","get","roundTwoDigits","number","Math","round","newDiscreteRelationshipMap","size","exclude","result","i","undefined","componentToHex","c","hex","toString","length","RelationshipType","ThreatLevel","Rgb","r","g","b","value","concat","interpolateColor","min","max","percent","toHex","RelationshipTypeToSymbol","NEUTRAL","FRIEND","ENEMY","PAWN","QUEEN","HUNTER","TARGET","DUPE","DECEIVER","ThreatLevelToSymbol","THREAT","WEAK","RelationshipTypeToPopularity","ClassifyDiscreteRelationship","true","Friend","false","Dupe","Pawn","Deceiver","Enemy","Hunter","Queen","Target","Neutral","f","a","classifyRelationship","heroPopularity","villainPopularity","heroRelationship","villainRelationship","benefitsHero","benefitsVillain","selectedColor","HouseguestPortraitController","view","_this","subs","refreshData","data","props","setState","popularity","getPopularity","relationships","powerRanking","getPowerRanking","powerRankings","defaultState","selectedPlayer","getSelectedPlayer","isEvicted","isJury","state","displayMode","backgroundColor","_this2","push","selectedPlayer$","subscribe","next","displayMode$","forEach","sub","unsubscribe","hero","villain","isNullOrUndefined","relationshipType","Subtitle","styled","small","_templateObject","MemoryWallPortrait","div","_templateObject2","_ref","theme","portraitBorder","Evicted","_templateObject3","Jury","_templateObject4","Normal","img","_templateObject5","Grayscale","_templateObject6","Sepia","_templateObject7","HouseguestPortrait","_React$Component","possibleConstructorReturn","getPrototypeOf","call","controller","assertThisInitialized","inherits","player","superiors","subtitle","Img","imageClass","getImageClass","generateSubtitle","detailed","Portrait","react_default","createElement","onClick","style","src","imageURL","height","name","React","Component","houseguestToPortrait","houseguest","houseguestPortrait_HouseguestPortrait","assign","Text","tooltip_templateObject","Tooltip","visible","Popover_default","position","isOpen","content","text","onMouseEnter","onMouseLeave","children","Portraits","rows","houseguests","memoryWallPortrait","tooltip","tooltip_Tooltip","className","centered","ShadowBox","box_templateObject","_ref2","overlay","StyledBox","box_templateObject2","_ref3","bodyArea","DividerBox","Box","NoMargin","centered_templateObject","Center","centered_templateObject2","Centered","noMargin","CenteredBold","MemoryWall","houseguestsByTribe","_","groupBy","hg","tribe","tribes","hgs","tribeName","color","margin","maxWidth","HasText","text_templateObject","input","text_templateObject2","addCompsLine","compWins","lineHeight","hohWins","povWins","nominations","friendOrEnemyTitle","titles","threatLevelCountTitle","count","friends","thinksImThreat","enemies","thinksImWeak","friendCountText","Threat","enemyCountText","Weak","friendEnemyCountTitle","likedBy","dislikedBy","Relationship","popularityMinColor","popularityMaxColor","popularityMode","minColor","maxColor","extremePopularity","x","xSquared","extremeValues","arguments","_addCountTitle","discreteTitle","countTitle","txt","addCountTitle","powerMinColor","powerMaxColor","powerMode","statePopularity","deltaPop","deltaPopularity","arrow","addPopularityLine","ViewBarTag","selected","mode","_this3","disabled","background","toRgba","cursor","ViewsBox","viewBar_templateObject","ViewsBar","viewBarTag_ViewBarTag","MemoryWallScreen","cast","players$","mainContentStream$","BehaviorSubject","memoryWallScreen_MemoryWallScreen","episodes$","switchEpisode$","Subject","switchSceneRelative","n","cast$","isFullscreen$","theme$","BbRandomGenerator","seed","rng","prand","xorshift128plus","_this$rng$next","_this$rng$next2","slicedToArray","_prand$uniformIntDist","uniformIntDistribution","_prand$uniformIntDist2","_this$rng$next3","_this$rng$next4","getById","gameState","houseguestCache","nonEvictedHouseguests","filter","inJury","remainingPlayers","finalJurySize","MutableGameState","init","phase","previousHOH","log","copy","cloneDeep","EpisodeLog","nominationsPreVeto","vetoWinner","winner","runnerUp","nominationsPostVeto","evicted","votes","votesInMajority","soleVoter","EpisodeFactory","episodeType","newState","j","firstImpressions","house","sum","targetId","calculatePopularity","updatePopularity","getFriendEnemyCount","rel","relationshipWith","updateFriendCounts","BigBrotherVanilla","canPlayWith","eliminates","arrowsEnabled","hasViewsbar","BigBrotherFinale","fullscreenButton_templateObject","EndgameTableCell","td","votingTable_templateObject","tableCellBorder","table","votingTable_templateObject2","votingTable_templateObject3","grayCell","votingTable_templateObject4","_ref4","lightGrayCell","votingTable_templateObject5","_ref5","evictedCell","votingTable_templateObject6","_ref6","winnerCell","votingTable_templateObject7","_ref7","runnerUpCell","_templateObject8","_ref8","nomineeCell","_templateObject9","_ref9","hohCell","tr","_templateObject10","GameOver","jurors","Season","factory","type","nextEpisode","players","SidebarController","subscriptions","season","scenes","selectedEpisode","delta","selectedScene","renderedScenes","targetScene","episode","lastEpisode","episodes","switchToScene","currentGameState","newPlayerCount","nextEpisodeType","whichEpisodeType","renderEpisode","onNewEpisode","_switchToScene","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","scene","render","index","stop","_x","apply","event","keyCode","objectSpread","_handleKeyDown","bind","Sidebar","document","addEventListener","handleKeyDown","destroy","minWidth","display","getEpisodes","title","episodeKey","breakKey","getHighlight","getSelectedEpisode","lightTheme","bg","toggleBorder","gradient","link","darkTheme","ThemeSwitcher","_useState","useState","_useState2","setTheme","RelationshipMapper","cache","nonEvictedIDs","toUpperCase","h","v","peopleWithOpinions","threats","weaks","twoN","likeByDislikeBy","toDelete","indexOf","neutral","utr","splice","newR","likeKey","dislikeKey","hToV","getRelationship","updatePopularities","members","includes","setRelationship","like","dislike","Base64","digits","split","digitsMap","Map","set","fromInt","int32","toInt","digitsStr","m","decode","s","padStart","ternaryToRelationship","entries","0","1","2","fromTernary","decodeToRelationshipMapper","c1","unevict","trim","_c$split","_c$split2","evictees","decodedR","decodedP","slice","decodeRelationships","evict","codeToHouseguest","decodeEvictees","t","hash","chex","test","tribemates","decodeTribes","alert","lookedUp","TopbarController","onSubmit","inputCode","newMap","rMapper","initialProfiles","context","profiles","evictedHouseguests","item","replace","has","toLowerCase","setupProfiles","Set","importAll","require","Topbar","handleChange","target","marginTop","onChange","MainContentAreaWrapper","mainContentArea_templateObject","MainContentArea","contentStream","prevProps","prevState","window","scrollTo","MainPage","fullscreen","inject","hideOnFullscreen","wrapperStyle","overflow","sidebar_Sidebar","topBar_Topbar","overflowX","mainContentArea_MainContentArea","MainPageController","page","GlobalStyles","createGlobalStyle","globalTheme_templateObject","App","styled_components_browser_esm","Fragment","mainPage_MainPage","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6a54f344.chunk.js","sourcesContent":["var map = {\n\t\"./Archbishop Geofri.png\": 51,\n\t\"./Atziri.png\": 52,\n\t\"./Avarius.png\": 53,\n\t\"./Baran.png\": 54,\n\t\"./Brutus.png\": 55,\n\t\"./Doedre.png\": 56,\n\t\"./Dominus.png\": 57,\n\t\"./Eleron.png\": 58,\n\t\"./Hillock.png\": 59,\n\t\"./Izaro.png\": 60,\n\t\"./Kitava.png\": 61,\n\t\"./Kuduku.png\": 62,\n\t\"./Lunaris.png\": 63,\n\t\"./Malachai.png\": 64,\n\t\"./Piety.png\": 65,\n\t\"./Rhys.png\": 66,\n\t\"./Shavronne.png\": 67,\n\t\"./Solaris.png\": 68,\n\t\"./The Elder.png\": 69,\n\t\"./The Shaper.png\": 70,\n\t\"./Veritania.png\": 71\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 50;","module.exports = __webpack_public_path__ + \"static/media/Archbishop Geofri.6e0351ba.png\";","module.exports = __webpack_public_path__ + \"static/media/Atziri.e1aff68e.png\";","module.exports = __webpack_public_path__ + \"static/media/Avarius.bb0beb40.png\";","module.exports = __webpack_public_path__ + \"static/media/Baran.c2cc7940.png\";","module.exports = __webpack_public_path__ + \"static/media/Brutus.b2bc13c6.png\";","module.exports = __webpack_public_path__ + \"static/media/Doedre.57e7d4e8.png\";","module.exports = __webpack_public_path__ + \"static/media/Dominus.fabc0820.png\";","module.exports = __webpack_public_path__ + \"static/media/Eleron.a938a8e5.png\";","module.exports = __webpack_public_path__ + \"static/media/Hillock.4f59f957.png\";","module.exports = __webpack_public_path__ + \"static/media/Izaro.eb3f6068.png\";","module.exports = __webpack_public_path__ + \"static/media/Kitava.cb87a5dd.png\";","module.exports = __webpack_public_path__ + \"static/media/Kuduku.8c3ddd80.png\";","module.exports = __webpack_public_path__ + \"static/media/Lunaris.85e8ae6c.png\";","module.exports = __webpack_public_path__ + \"static/media/Malachai.4b573964.png\";","module.exports = __webpack_public_path__ + \"static/media/Piety.a55b7f84.png\";","module.exports = __webpack_public_path__ + \"static/media/Rhys.dce28a7e.png\";","module.exports = __webpack_public_path__ + \"static/media/Shavronne.bef48886.png\";","module.exports = __webpack_public_path__ + \"static/media/Solaris.e8e6af49.png\";","module.exports = __webpack_public_path__ + \"static/media/The Elder.ea02a95d.png\";","module.exports = __webpack_public_path__ + \"static/media/The Shaper.cda64217.png\";","module.exports = __webpack_public_path__ + \"static/media/Veritania.3cbf82c9.png\";","export class PowerRanking {\n    readonly beats: number;\n    readonly outOf: number;\n    get toFloat(): number {\n        return this.beats / this.outOf;\n    }\n\n    constructor(beats: number, outOf: number) {\n        if (outOf === 0) throw new Error(\"Power ranking attempted to divide by zero\");\n        this.beats = beats;\n        this.outOf = outOf;\n    }\n}\n","export function hashcode(string: string): number {\n    let hash = 0,\n        i,\n        chr;\n    if (string.length === 0) return hash;\n    for (i = 0; i < string.length; i++) {\n        chr = string.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0;\n    }\n    return hash;\n}\n\nexport function roundTwoDigits(number: number | undefined) {\n    if (!number) {\n        return 0;\n    }\n    return Math.round(number * 100);\n}\n\nexport function max(a: number, b: number) {\n    return a > b ? a : b;\n}\n\nexport function extremeValues(x: number | undefined): number {\n    if (!x) {\n        return 0;\n    }\n    const xSquared = x * x;\n    if (x >= 0) {\n        return -xSquared + 2 * x;\n    } else {\n        return xSquared + 2 * x;\n    }\n}\n","export interface RelationshipMap {\n  [id: number]: number;\n}\n\nexport interface DiscreteRelationshipMap {\n  [id: number]: boolean | undefined;\n}\n\nexport function newRelationshipMap(\n  size: number,\n  exclude: number\n): RelationshipMap {\n  const result: RelationshipMap = {};\n  for (let i = 0; i < size; i++) {\n    if (i !== exclude) result[i] = 0;\n  }\n  return result;\n}\n\nexport function newDiscreteRelationshipMap(\n  size: number,\n  exclude: number\n): DiscreteRelationshipMap {\n  const result: DiscreteRelationshipMap = {};\n  for (let i = 0; i < size; i++) {\n    if (i !== exclude) result[i] = undefined;\n  }\n  return result;\n}\n","function componentToHex(c: any) {\n  var hex = Math.round(c).toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nexport class Rgb {\n  public r: number;\n  public g: number;\n  public b: number;\n  public toHex() {\n    return (\n      \"#\" +\n      componentToHex(this.r) +\n      componentToHex(this.g) +\n      componentToHex(this.b)\n    );\n  }\n  public toRgba(): string {\n    return `rgba(${this.r}, ${this.g}, ${this.b}, 1)`;\n  }\n  constructor(r: number, g: number, b: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n  }\n}\n\n// function hexToRgb(hex: string): Rgb | null {\n//   var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n//   return result\n//     ? {\n//         r: parseInt(result[1], 16),\n//         g: parseInt(result[2], 16),\n//         b: parseInt(result[3], 16),\n//       }\n//     : null;\n// }\n\nexport function interpolateColor(min: Rgb, max: Rgb, percent: number): string {\n  return new Rgb(\n    min.r + percent * (max.r - min.r),\n    min.g + percent * (max.g - min.g),\n    min.b + percent * (max.b - min.b)\n  ).toHex();\n}\n","export enum RelationshipType {\n  Neutral = \"NEUTRAL\",\n  Friend = \"FRIEND\",\n  Enemy = \"ENEMY\",\n  Pawn = \"PAWN\",\n  Queen = \"QUEEN\",\n  Hunter = \"HUNTER\",\n  Target = \"TARGET\",\n  Dupe = \"DUPE\",\n  Deceiver = \"DECEIVER\",\n}\n\nexport enum ThreatLevel {\n  Threat = \"THREAT\",\n  Weak = \"WEAK\",\n  Neutral = \"NEUTRAL\",\n}\n\nexport const RelationshipTypeToSymbol = {\n  NEUTRAL: \"-\",\n  FRIEND: \"\",\n  ENEMY: \"\",\n  PAWN: \"THEY  ME\",\n  QUEEN: \"I  THEM\",\n  HUNTER: \"THEY  ME\",\n  TARGET: \"I  THEM\",\n  DUPE: \"I  THEM THEY  ME\",\n  DECEIVER: \"I  THEM THEY  ME\",\n};\n\nexport const ThreatLevelToSymbol = {\n  THREAT: \"\",\n  WEAK: \"\",\n  NEUTRAL: \"-\",\n};\n\nexport const RelationshipTypeToPopularity = {\n  NEUTRAL: 0,\n  FRIEND: 1,\n  ENEMY: -1,\n  PAWN: 0.66,\n  QUEEN: 0.33,\n  HUNTER: -0.66,\n  TARGET: -0.33,\n  DUPE: 0.25,\n  DECEIVER: -0.25,\n};\n\nexport const ClassifyDiscreteRelationship: {\n  [id: string]: { [id: string]: RelationshipType };\n} = {\n  true: {\n    true: RelationshipType.Friend,\n    false: RelationshipType.Dupe,\n    undefined: RelationshipType.Pawn,\n  },\n  false: {\n    true: RelationshipType.Deceiver,\n    false: RelationshipType.Enemy,\n    undefined: RelationshipType.Hunter,\n  },\n  undefined: {\n    true: RelationshipType.Queen,\n    false: RelationshipType.Target,\n    undefined: RelationshipType.Neutral,\n  },\n};\n\nfunction f(a: boolean | undefined): \"true\" | \"false\" | \"undefined\" {\n  if (a === true) return \"true\";\n  else if (a === false) return \"false\";\n  else return \"undefined\";\n}\n\nexport function classifyRelationship(\n  heroPopularity: number,\n  villainPopularity: number,\n  heroRelationship: number | boolean | undefined,\n  villainRelationship: number | boolean | undefined\n): RelationshipType {\n  if (\n    typeof heroRelationship !== \"number\" &&\n    typeof villainRelationship !== \"number\"\n  ) {\n    return ClassifyDiscreteRelationship[f(heroRelationship)][\n      f(villainRelationship)\n    ];\n  }\n\n  const benefitsHero = heroRelationship! > heroPopularity;\n  const benefitsVillain = heroRelationship! > villainPopularity;\n  if (benefitsHero && benefitsVillain) {\n    return RelationshipType.Friend;\n  } else if (benefitsHero && !benefitsVillain) {\n    return RelationshipType.Pawn;\n  } else if (!benefitsHero && benefitsVillain) {\n    return RelationshipType.Queen;\n  }\n  return RelationshipType.Enemy;\n}\n","import { PortraitProps, HouseguestPortrait } from \"../memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport {\n  selectedPlayer$,\n  displayMode$,\n  getSelectedPlayer,\n} from \"../../subjects/subjects\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport { Rgb } from \"../../model/color\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport { isNullOrUndefined } from \"util\";\nimport {\n  classifyRelationship,\n  RelationshipTypeToPopularity,\n} from \"../../utils/ai/classifyRelationship\";\n\nconst selectedColor = new Rgb(51, 255, 249);\n\nexport class HouseguestPortraitController {\n  private subs: Subscription[] = [];\n  private view: HouseguestPortrait;\n  constructor(view: HouseguestPortrait) {\n    this.view = view;\n  }\n\n  get defaultState() {\n    return {\n      popularity: this.view.props.popularity,\n      displayMode: displayMode$.value,\n      powerRanking: this.view.props.powerRanking,\n    };\n  }\n\n  public backgroundColor(props: PortraitProps): undefined | string {\n    const selectedPlayer = getSelectedPlayer();\n    if (selectedPlayer !== null && selectedPlayer.id === props.id) {\n      return selectedColor.toHex();\n    }\n    return props.isEvicted || props.isJury\n      ? undefined\n      : this.view.state.displayMode.backgroundColor(this.view.state);\n  }\n\n  public subscribe() {\n    const subs: Subscription[] = [];\n    subs.push(\n      selectedPlayer$.subscribe({\n        next: this.refreshData,\n      })\n    );\n    subs.push(\n      displayMode$.subscribe({\n        next: (displayMode) => this.view.setState({ displayMode }),\n      })\n    );\n    this.subs = subs;\n  }\n\n  public unsubscribe() {\n    this.subs.forEach((sub) => sub.unsubscribe());\n  }\n\n  private refreshData = (data: SelectedPlayerData | null) => {\n    if (!data) {\n      this.view.setState(this.defaultState);\n    } else {\n      if (data.id !== this.view.props.id) {\n        this.view.setState({\n          popularity: getPopularity(\n            this.view.props.relationships![data.id],\n            data.relationships[this.view.props.id!]\n          ),\n          powerRanking: getPowerRanking(\n            this.view.props.powerRankings![data.id],\n            data.powerRankings[this.view.props.id!]\n          ),\n        });\n      } else {\n        // note; popularity = 2 means the player is currently selected.\n        this.view.setState({\n          popularity: 2,\n          powerRanking: 2,\n        });\n      }\n    }\n  };\n}\ntype Rship = number | boolean | undefined;\n\nfunction getPowerRanking(hero: Rship, villain: Rship): number | undefined {\n  if (typeof hero === \"number\") {\n    return hero;\n  } else if (typeof villain === \"number\") {\n    return villain;\n  }\n  if (hero === true) return 1;\n  if (hero === false) return 0;\n  return undefined;\n}\n\nfunction getPopularity(hero: Rship, villain: Rship): number | undefined {\n  if (isNullOrUndefined(hero) && isNullOrUndefined(villain)) return undefined;\n\n  if (typeof hero === \"number\") {\n    return hero;\n  } else if (typeof villain === \"number\") {\n    return villain;\n  }\n\n  const relationshipType = classifyRelationship(0, 0, hero, villain);\n  return RelationshipTypeToPopularity[relationshipType];\n}\n","import React from \"react\";\nimport { selectPlayer } from \"./selectedPortrait\";\nimport { isNullOrUndefined } from \"util\";\nimport { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport _ from \"lodash\";\nimport { HouseguestPortraitController } from \"./houseguestPortraitController\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst Subtitle = styled.small`\n  font-weight: 100;\n  font-size: small;\n`;\n\nconst MemoryWallPortrait = styled.div`\n  margin: 5px;\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n  color: black;\n  border-radius: 5px;\n  text-align: center;\n  font-weight: 600;\n  max-width: 7rem;\n  word-wrap: break-word;\n  -webkit-transition-property: none;\n  -moz-transition-property: none;\n  -o-transition-property: none;\n  transition-property: none;\n`;\n\nconst Evicted = styled(MemoryWallPortrait)`\n  font-weight: 100;\n  color: grey;\n  background-color: #111111;\n`;\n\nconst Jury = styled(MemoryWallPortrait)`\n  font-weight: 100;\n  color: #c3ae88;\n  background-color: #5d5340;\n  filter: brightness(0.6);\n`;\n\nconst Normal = styled.img`\n  min-width: 100px;\n  width: 100%;\n  width: -moz-available; /* For Mozzila */\n  width: -webkit-fill-available; /* For Chrome */\n  width: stretch; /* Unprefixed */\n`;\n\nconst Grayscale = styled(Normal)`\n  filter: grayscale(100%);\n`;\n\nconst Sepia = styled(Normal)`\n  filter: sepia(100%);\n`;\n\nexport interface PortraitProps {\n  imageURL: string;\n  name: string;\n  id?: number;\n  relationships?: RelationshipMap | DiscreteRelationshipMap;\n  popularity?: number;\n  powerRankings: DiscreteRelationshipMap;\n  powerRanking?: number;\n  isEvicted?: boolean;\n  isJury?: boolean;\n  deltaPopularity?: number;\n  detailed?: boolean;\n  superiors?: Set<number>;\n  likedBy: number;\n  dislikedBy: number;\n  thinksImWeak: number;\n  thinksImThreat: number;\n}\n\nexport interface PortraitState {\n  popularity?: number;\n  powerRanking?: number;\n  displayMode: PortraitDisplayMode;\n}\nexport class HouseguestPortrait extends React.Component<\n  PortraitProps,\n  PortraitState\n> {\n  private controller: HouseguestPortraitController;\n\n  public constructor(props: PortraitProps) {\n    super(props);\n    this.controller = new HouseguestPortraitController(this);\n    this.state = this.controller.defaultState;\n  }\n\n  public componentDidMount() {\n    if (isNullOrUndefined(this.props.id)) {\n      return;\n    }\n    this.controller.subscribe();\n  }\n\n  public componentWillUnmount() {\n    this.controller.unsubscribe();\n  }\n\n  private onClick(): void {\n    if (isNullOrUndefined(this.props.id) || !this.props.relationships) {\n      return;\n    }\n    const data = {\n      id: this.props.id,\n      relationships: this.props.relationships,\n      isEvicted: !!this.props.isEvicted,\n      popularity: this.props.popularity || 0,\n      superiors: this.props.superiors,\n      powerRankings: this.props.powerRankings,\n    };\n    selectPlayer(data);\n  }\n\n  public render() {\n    const props = this.props;\n    const Img = getImageClass(props);\n    let subtitle: any[] = [];\n    subtitle = this.state.displayMode.generateSubtitle(\n      this.props,\n      this.state,\n      !!props.detailed\n    );\n\n    let Portrait = MemoryWallPortrait;\n    if (props.isJury) {\n      Portrait = Jury;\n    } else if (props.isEvicted) {\n      Portrait = Evicted;\n    }\n    return (\n      <Portrait\n        onClick={() => this.onClick()}\n        style={{\n          backgroundColor: this.controller.backgroundColor(props),\n        }}\n      >\n        <Img src={props.imageURL} style={{ height: 100 }} />\n        <br />\n        {props.name}\n        <br />\n        {<Subtitle>{subtitle}</Subtitle>}\n      </Portrait>\n    );\n  }\n}\n\nfunction getImageClass(props: PortraitProps) {\n  let imageClass = props.isEvicted ? Grayscale : Normal;\n  imageClass = props.isJury ? Sepia : imageClass;\n  return imageClass;\n}\n","import { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport { getSelectedPlayer, selectedPlayer$ } from \"../../subjects/subjects\";\n\nexport interface SelectedPlayerData {\n  id: number;\n  popularity: number;\n  relationships: RelationshipMap | DiscreteRelationshipMap;\n  powerRankings: DiscreteRelationshipMap;\n  isEvicted: boolean;\n  superiors?: Set<number>;\n}\n\nexport function selectPlayer(player: SelectedPlayerData | null) {\n  if (\n    !player ||\n    (getSelectedPlayer() && getSelectedPlayer()!.id === player.id)\n  ) {\n    selectedPlayer$.next(null);\n  } else {\n    selectedPlayer$.next(player);\n  }\n}\n","import { ProfileHouseguest, HouseguestPortrait } from \"../memoryWall\";\nimport React from \"react\";\n\nexport function houseguestToPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={false} />;\n}\n\nexport function memoryWallPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={true} />;\n}\n","import React from \"react\";\nimport Popover from \"react-tiny-popover\";\nimport styled from \"styled-components\";\n\nconst Text = styled.p`\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n`;\n\ninterface TooltipProps {\n    text: string;\n    children: any;\n}\n\ninterface ToolTipState {\n    visible: boolean;\n}\n\nexport class Tooltip extends React.Component<TooltipProps, ToolTipState> {\n    constructor(props: TooltipProps) {\n        super(props);\n        this.state = { visible: false };\n    }\n\n    public render() {\n        return (\n            <Popover\n                position={[\"top\", \"bottom\"]}\n                isOpen={this.state.visible}\n                content={<Text>{this.props.text}</Text>}\n            >\n                <div\n                    onMouseEnter={() => this.setState({ visible: true })}\n                    onMouseLeave={() => this.setState({ visible: false })}\n                >\n                    {this.props.children}\n                </div>\n            </Popover>\n        );\n    }\n}\n","import React from \"react\";\nimport { ProfileHouseguest } from \"../memoryWall\";\nimport { houseguestToPortrait, memoryWallPortrait } from \"./houseguestToPortrait\";\nimport { Tooltip } from \"../tooltip/tooltip\";\n\nlet key = -1;\n\nfunction PortraitWrapper(props: { centered?: boolean; children: any }): JSX.Element {\n    return (\n        <div\n            key={key++}\n            className={`columns is-gapless is-mobile is-multiline ${props.centered ? \"is-centered\" : \"\"}`}\n        >\n            {props.children}\n        </div>\n    );\n}\n\nexport function Portrait(props: { houseguest: ProfileHouseguest; centered?: boolean }): JSX.Element {\n    const result = (\n        <PortraitWrapper centered={props.centered}>{houseguestToPortrait(props.houseguest)}</PortraitWrapper>\n    );\n    if (props.houseguest.tooltip) {\n        return (\n            <PortraitWrapper centered={props.centered}>\n                <Tooltip text={props.houseguest.tooltip}>{houseguestToPortrait(props.houseguest)}</Tooltip>\n            </PortraitWrapper>\n        );\n    }\n    return result;\n}\n\nexport function Portraits(props: {\n    houseguests: ProfileHouseguest[];\n    centered?: boolean;\n    detailed?: boolean;\n}): JSX.Element {\n    const rows: JSX.Element[] = [];\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    props.houseguests.forEach((houseguest: ProfileHouseguest) => {\n        let result;\n        if (props.detailed) {\n            result = memoryWallPortrait(houseguest, key++);\n        } else {\n            result = houseguestToPortrait(houseguest, key++);\n        }\n        if (houseguest.tooltip) {\n            result = <Tooltip text={houseguest.tooltip}>{result}</Tooltip>;\n        }\n        rows.push(result);\n    });\n    return (\n        <div className={`columns is-gapless is-mobile is-multiline ${props.centered && \"is-centered\"}`}>\n            {rows}\n        </div>\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ShadowBox = styled.div`\n  box-shadow: ${({ theme }: { theme: ColorTheme }) =>\n    theme.name === \"light\"\n      ? \"0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1)\"\n      : \"\"};\n  border-radius: 6px;\n  margin-left: 3px;\n  margin-right: 3px;\n  margin-bottom: 5px;\n  padding-bottom: 10px;\n  padding-top: 1px;\n  background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nconst StyledBox = styled.div`\n  margin-left: 3px;\n  margin-right: 3px;\n  margin-bottom: 3px;\n  background: ${({ theme }: { theme: ColorTheme }) => theme.bodyArea};\n`;\n\nexport function DividerBox(props: any): JSX.Element {\n  return (\n    <ShadowBox className={props.className || \"\"}>{props.children}</ShadowBox>\n  );\n}\n\nexport function Box(props: any): JSX.Element {\n  return (\n    <StyledBox style={props.style} className={`box ${props.className || \"\"}`}>\n      {props.children}\n    </StyledBox>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface TextProps {\n  noMargin?: boolean;\n  children?: any;\n  style?: any;\n}\n\nconst NoMargin = styled.div`\n  text-align: center;\n  color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\nconst Center = styled.p`\n  text-align: center;\n  color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport function Centered(props: TextProps): JSX.Element {\n  if (props.noMargin) return <NoMargin>{props.children}</NoMargin>;\n  return <Center style={props.style}>{props.children} </Center>;\n}\n\nexport function CenteredBold(props: TextProps): JSX.Element {\n  return (\n    <Centered style={props.style || {}} noMargin={props.noMargin}>\n      <b>{props.children} </b>\n    </Centered>\n  );\n}\n\nexport function CenteredItallic(props: TextProps): JSX.Element {\n  return (\n    <Centered noMargin={props.noMargin}>\n      <i>{props.children} </i>\n    </Centered>\n  );\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { Portraits } from \"../playerPortrait/portraits\";\nimport { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport { Tribe } from \"../../images/tribe\";\nimport _ from \"lodash\";\nimport { DividerBox } from \"../layout/box\";\nimport { CenteredBold } from \"../layout/centered\";\nexport interface IMemoryWallProps {\n  readonly houseguests: ProfileHouseguest[];\n}\n\nexport interface ProfileHouseguest extends PlayerProfile {\n  id?: number;\n  isEvicted?: boolean;\n  isJury?: boolean;\n  tribe?: Tribe;\n  //\n  relationships?: RelationshipMap | DiscreteRelationshipMap;\n  popularity?: number;\n  deltaPopularity?: number;\n  likedBy: number;\n  dislikedBy: number;\n  //\n  powerRankings: DiscreteRelationshipMap;\n  powerRanking?: number;\n  thinksImWeak: number;\n  thinksImThreat: number;\n  //\n  hohWins?: number;\n  povWins?: number;\n  nominations?: number;\n  tooltip?: string;\n}\n\nexport function MemoryWall(props: IMemoryWallProps): JSX.Element {\n  const houseguests = props.houseguests;\n  if (!houseguests || houseguests.length === 0) {\n    return <div />;\n  }\n  const houseguestsByTribe = _.groupBy(houseguests, (hg) =>\n    hg.tribe === undefined ? hg.tribe : hg.tribe.name\n  );\n  const tribes: JSX.Element[] = [];\n  _.forEach(houseguestsByTribe, (hgs, tribeName) => {\n    if (tribeName === \"undefined\" && _.size(houseguestsByTribe) > 1) {\n      return;\n    }\n    const color = hgs[0].tribe ? hgs[0].tribe.color : \"\";\n    tribes.push(\n      <DividerBox key={tribeName}>\n        {tribeName !== \"undefined\" && (\n          <CenteredBold style={{ color }}>{tribeName}</CenteredBold>\n        )}\n        {tribeName !== \"undefined\" && <hr style={{ color }}></hr>}\n        <Portraits houseguests={hgs} centered={true}></Portraits>\n      </DividerBox>\n    );\n  });\n  return (\n    <div\n      style={{\n        margin: \"auto\",\n        maxWidth: -1,\n      }}\n    >\n      {tribes}\n    </div>\n  );\n}\n","import styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nexport const HasText = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport const Input = styled.input`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n","import React from \"react\";\nimport { roundTwoDigits } from \"../../utils\";\nimport { ProfileHouseguest, PortraitProps, PortraitState } from \"../memoryWall\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport {\n  RelationshipTypeToSymbol,\n  RelationshipType as Relationship,\n  classifyRelationship,\n  ThreatLevelToSymbol,\n  ThreatLevel,\n} from \"../../utils/ai/classifyRelationship\";\nimport { getSelectedPlayer } from \"../../subjects/subjects\";\n\nfunction threatLevelOf(a: boolean | undefined): string {\n  if (a === undefined) return \"-\";\n  if (a) return \" THREAT\";\n  return \" WEAK\";\n}\n\nexport function generatePowerSubtitle(\n  hero: PortraitProps,\n  state: PortraitState,\n  _: boolean | undefined\n): any[] {\n  let key = 0;\n  let subtitle: any[] = [];\n  key = addPopularityLine(state, hero, !!_, subtitle, key);\n  key = addCompsLine(hero, subtitle, key);\n  if (!hero.isEvicted) {\n    const data = getSelectedPlayer() as SelectedPlayerData | null;\n    if (data && data.id !== hero.id) {\n      subtitle.push(\n        <div key={key++}>{`${threatLevelOf(hero.powerRankings[data.id])}`}</div>\n      );\n    } else if (data && data.id === hero.id) {\n      subtitle.push(<div key={key++}>I'M SEEN AS</div>);\n      subtitle.push(<div key={key++}>{threatLevelCountTitle(hero)}</div>);\n    } else {\n      subtitle.push(<div key={key++}>{threatLevelCountTitle(hero)}</div>);\n    }\n  } else {\n    subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  }\n  return subtitle;\n}\n\nexport function generatePopularitySubtitle(\n  hero: PortraitProps,\n  state: PortraitState,\n  detailed: boolean = false\n): any[] {\n  // const data = getSelectedPlayer() as SelectedPlayerData | null;\n  let key = 0;\n  let subtitle: any[] = [];\n  // popularity\n  // key = addPopularityLine(state, hero, detailed, subtitle, key);\n  // competition wins\n  key = addCompsLine(hero, subtitle, key);\n  // friendship count / relationship classification titles\n  ({ subtitle, key } = addCountTitle(\n    hero,\n    subtitle,\n    key,\n    friendOrEnemyTitle,\n    friendEnemyCountTitle\n  ));\n  // if (!data) subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  return subtitle;\n}\n\nfunction addCountTitle(\n  hero: PortraitProps,\n  subtitle: any[],\n  key: number,\n  discreteTitle: (a: PortraitProps, b: SelectedPlayerData) => string[],\n  countTitle: (a: PortraitProps) => string[]\n) {\n  if (!hero.isEvicted) {\n    const data = getSelectedPlayer() as SelectedPlayerData | null;\n    if (data && data.id !== hero.id) {\n      const titles = discreteTitle(hero, data);\n      subtitle = subtitle.concat(\n        titles.map((txt) => <div key={key++}>{txt}</div>)\n      );\n    } else {\n      const titles = countTitle(hero);\n      subtitle = subtitle.concat(\n        titles.map((txt) => <div key={key++}>{txt}</div>)\n      );\n    }\n  } else {\n    subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  }\n  return { subtitle, key };\n}\n\nfunction addPopularityLine(\n  state: { popularity?: number },\n  hero: PortraitProps,\n  detailed: boolean,\n  subtitle: any[],\n  key: number\n) {\n  let popularity = state.popularity;\n  if (popularity && (popularity > 1 || popularity < -1)) {\n    popularity = hero.popularity;\n  }\n  if (popularity && !hero.isEvicted) {\n    let popularitySubtitle = `${roundTwoDigits(popularity)}%`;\n    const deltaPop = getDeltaPopularity(hero, popularity);\n    if (detailed && deltaPop !== 0) {\n      const arrow = deltaPop > 0 ? \" | \" : \" | \";\n      popularitySubtitle += `${arrow} ${deltaPop}%`;\n    }\n    subtitle.push(<div key={key++}>{\"\"}</div>); // hardcoded to do nothing for the discrete case.\n  }\n  return key;\n}\n\nfunction addCompsLine(hero: PortraitProps, subtitle: any[], key: number) {\n  if (compWins(hero)) {\n    subtitle.push(<div key={key++}>{`${compWins(hero)}`}</div>);\n  } else {\n    subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  }\n  return key;\n}\n\nfunction getDeltaPopularity(\n  houseguest: PortraitProps,\n  statePopularity: number\n) {\n  if (\n    roundTwoDigits(houseguest.popularity) !== roundTwoDigits(statePopularity)\n  ) {\n    return 0;\n  }\n  return houseguest.deltaPopularity\n    ? roundTwoDigits(houseguest.deltaPopularity)\n    : 0;\n}\n\nfunction compWins(houseguest: ProfileHouseguest): string {\n  return `${houseguest.hohWins ? ` ${houseguest.hohWins}` : \"\"}${\n    houseguest.povWins && houseguest.hohWins\n      ? `| ${houseguest.povWins}`\n      : houseguest.povWins\n      ? ` ${houseguest.povWins}`\n      : \"\"\n  }${\n    (houseguest.hohWins || houseguest.povWins) && houseguest.nominations\n      ? \"|\"\n      : \"\"\n  }${houseguest.nominations ? ` ${houseguest.nominations}` : \"\"}`;\n}\n\nfunction friendOrEnemyTitle(\n  hero: PortraitProps,\n  villain: SelectedPlayerData\n): string[] {\n  const titles: string[] = [];\n  const heroRelationship: boolean | number | undefined = hero.relationships![\n    villain.id\n  ];\n  const villainRelationship: boolean | number | undefined =\n    villain.relationships[hero.id!];\n  titles.push(\n    RelationshipTypeToSymbol[\n      classifyRelationship(\n        hero.popularity || 0,\n        villain.popularity,\n        heroRelationship,\n        villainRelationship\n      )\n    ]\n  );\n  return titles;\n}\n\nfunction threatLevelCountTitle(hero: PortraitProps): string[] {\n  const titles: string[] = [];\n  const count = { friends: hero.thinksImThreat, enemies: hero.thinksImWeak };\n  const friendCountText =\n    count.friends > 0\n      ? `${count.friends} ${ThreatLevelToSymbol[ThreatLevel.Threat]}`\n      : \"\";\n\n  const enemyCountText =\n    count.enemies > 0\n      ? `${count.enemies} ${ThreatLevelToSymbol[ThreatLevel.Weak]}`\n      : \"\";\n\n  titles.push(\n    `${friendCountText}${\n      friendCountText && enemyCountText && \" | \"\n    }${enemyCountText}`\n  );\n  return titles;\n}\n\nfunction friendEnemyCountTitle(hero: PortraitProps): string[] {\n  const titles: string[] = [];\n  const count = { friends: hero.likedBy, enemies: hero.dislikedBy };\n  const friendCountText =\n    count.friends > 0\n      ? `${count.friends} ${RelationshipTypeToSymbol[Relationship.Friend]}`\n      : \"\";\n\n  const enemyCountText =\n    count.enemies > 0\n      ? `${count.enemies} ${RelationshipTypeToSymbol[Relationship.Enemy]}`\n      : \"\";\n\n  titles.push(\n    `${friendCountText}${\n      friendCountText && enemyCountText && \" | \"\n    }${enemyCountText}`\n  );\n  return titles;\n}\n","import { Rgb, interpolateColor } from \"./color\";\nimport { PortraitState, PortraitProps } from \"../components/memoryWall\";\nimport { extremeValues, rng } from \"../utils\";\nimport {\n  generatePopularitySubtitle,\n  generatePowerSubtitle,\n} from \"../components/playerPortrait/subtitle\";\n\nexport interface PortraitDisplayMode {\n  minColor: Rgb;\n  maxColor: Rgb;\n  backgroundColor: (state: PortraitState) => string;\n  generateSubtitle: (\n    props: PortraitProps,\n    state: PortraitState,\n    detailed?: boolean\n  ) => any[];\n}\n\nconst popularityMinColor = new Rgb(252, 137, 137);\nconst popularityMaxColor = new Rgb(137, 252, 137);\n\nexport const popularityMode: PortraitDisplayMode = {\n  minColor: popularityMinColor,\n  maxColor: popularityMaxColor,\n  backgroundColor: (state: PortraitState) => {\n    const popularity = state.popularity;\n    if (popularity === undefined) {\n      return \"rgb(170, 170, 170)\";\n    }\n\n    const extremePopularity = extremeValues(popularity);\n    const percent = (extremePopularity + 1) / 2;\n    return interpolateColor(popularityMinColor, popularityMaxColor, percent);\n  },\n  generateSubtitle: generatePopularitySubtitle,\n};\n\nconst powerMinColor = new Rgb(192, 181, 255);\nconst powerMaxColor = new Rgb(255, 204, 94);\n/// originals ^^^^^\n// const powerMinColor = new Rgb(104, 128, 158); // blue\n\n// const powerMinColor = new Rgb(148, 16, 240);\n// const powerMaxColor = new Rgb(255, 143, 0);\n\nexport const powerMode: PortraitDisplayMode = {\n  minColor: powerMinColor,\n  maxColor: powerMaxColor,\n  backgroundColor: (state: PortraitState) => {\n    const powerRanking = state.powerRanking;\n    if (powerRanking === undefined) return \"rgb(170, 170, 170)\";\n    return interpolateColor(powerMinColor, powerMaxColor, powerRanking);\n  },\n  generateSubtitle: generatePowerSubtitle,\n};\n","import React from \"react\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { displayMode$ } from \"../../subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nfunction setDisplayMode(p: PortraitDisplayMode) {\n    displayMode$.next(p);\n}\n\ninterface ViewBarTagProps {\n    mode: PortraitDisplayMode;\n    text: string;\n    disabled?: boolean;\n}\n\nexport class ViewBarTag extends React.Component<ViewBarTagProps, { selected: boolean }> {\n    private sub: Subscription | null = null;\n\n    public constructor(props: ViewBarTagProps) {\n        super(props);\n        this.state = { selected: props.mode === displayMode$.value };\n    }\n\n    public componentDidMount() {\n        this.sub = displayMode$.subscribe({\n            next: (mode) => {\n                if (mode !== this.props.mode) {\n                    this.setState({ selected: false });\n                }\n            },\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    public render() {\n        const name = \"level-item tag is-medium is-light\";\n        const style = getStyle(this.props);\n        return (\n            <span\n                className={name}\n                style={style}\n                onClick={() => {\n                    !this.props.disabled && setDisplayMode(this.props.mode);\n                    !this.props.disabled && this.setState({ selected: true });\n                }}\n            >\n                {styleText(this.props.text, this.state.selected)}\n            </span>\n        );\n    }\n}\n\nfunction styleText(text: string, selected: boolean): JSX.Element {\n    return selected ? <b>{text}</b> : <i>{text}</i>;\n}\n\nfunction getStyle(props: ViewBarTagProps) {\n    return props.disabled\n        ? {}\n        : {\n              background: `linear-gradient(90deg, ${props.mode.minColor.toRgba()} 0%, ${props.mode.maxColor.toRgba()} 100%)`,\n              cursor: \"pointer\",\n          };\n}\n","import React from \"react\";\nimport { popularityMode, powerMode } from \"../../model/portraitDisplayMode\";\nimport { ViewBarTag } from \"./viewBarTag\";\nimport { Box } from \"../layout/box\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ViewsBox = styled(Box)`\n  background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nexport function ViewsBar() {\n  return (\n    <ViewsBox className=\"level is-mobile\" key=\"viewsbar\">\n      <ViewBarTag mode={popularityMode} text={\"Relationships\"}></ViewBarTag>\n      <ViewBarTag mode={powerMode} text={\"Threat Level\"}></ViewBarTag>\n      {/* <ViewBarTag mode={powerMode} disabled={true} text={\"Cliques [Coming Soon]\"}></ViewBarTag> */}\n    </ViewsBox>\n  );\n}\n","import React from \"react\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { HasText } from \"../layout/text\";\nimport { ViewsBar } from \"../viewsBar/viewBar\";\nimport { ProfileHouseguest } from \"../memoryWall/memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport { players$ } from \"../../subjects/subjects\";\n\ninterface PregameScreenState {\n  cast: ProfileHouseguest[];\n}\n\nexport class MemoryWallScreen extends React.Component<{}, PregameScreenState> {\n  private subs: Subscription[] = [];\n  public constructor(props: never) {\n    super(props);\n    this.state = { cast: players$.value };\n  }\n\n  public componentDidMount() {\n    this.subs.push(\n      players$.subscribe((cast) => {\n        this.setState({ cast });\n      })\n    );\n  }\n\n  public componentWillUnmount() {\n    this.subs.forEach((sub) => sub.unsubscribe());\n  }\n\n  public render() {\n    if (this.state.cast.length === 0) {\n      return <HasText>Cast is empty.</HasText>;\n    }\n    return (\n      <HasText>\n        <ViewsBar />\n        <MemoryWall houseguests={this.state.cast} />\n      </HasText>\n    );\n  }\n}\n","import { BehaviorSubject, Subject } from \"rxjs\";\nimport { MemoryWallScreen } from \"../components/memoryWallScreen/memoryWallScreen\";\nimport { Episode, PlayerProfile } from \"../model\";\nimport { SelectedPlayerData } from \"../components/playerPortrait/selectedPortrait\";\nimport React from \"react\";\nimport {\n  PortraitDisplayMode,\n  popularityMode,\n} from \"../model/portraitDisplayMode\";\nimport { ColorTheme } from \"../theme/theme\";\nimport { ProfileHouseguest } from \"../components/memoryWall\";\n\n// What is currently being displayed.\nexport const mainContentStream$ = new BehaviorSubject(<MemoryWallScreen />);\n// Push episodes to this subject to add them to the sidebar. Null resets everything.\nexport const episodes$ = new BehaviorSubject<Episode | null>(null);\n// Forcibly switches to an episode. Used when adding a new episode.\nexport const switchEpisode$ = new Subject<number>();\nexport function newEpisode(episode: Episode | null) {\n  episodes$.next(episode);\n}\nexport function switchSceneRelative(n: number) {\n  switchEpisode$.next(n);\n}\n\nexport const players$ = new BehaviorSubject<ProfileHouseguest[]>([]);\n\n// this variable is unused but if you delete it it breaks some race condition or something and the code compiles, but doesn't work anymore.\nexport const cast$ = new BehaviorSubject<PlayerProfile[]>([]);\n\n// The player that the user has clicked on.\nexport const selectedPlayer$ = new BehaviorSubject<SelectedPlayerData | null>(\n  null\n);\nexport function getSelectedPlayer() {\n  return selectedPlayer$.value;\n}\n\n// The display mode selected by the viewsbar.\nexport const displayMode$ = new BehaviorSubject<PortraitDisplayMode>(\n  popularityMode\n);\n\n// If the screen is fullscreen or not.\nexport const isFullscreen$ = new BehaviorSubject<boolean>(false);\nexport const theme$ = new Subject<ColorTheme>();\n","import prand from \"pure-rand\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { hashcode } from \"./utilities\";\nimport { cast$ } from \"../subjects/subjects\";\n\nexport class BbRandomGenerator {\n  private rng: prand.RandomGenerator;\n\n  public randomFloat(): number {\n    let result: number;\n    [result, this.rng] = this.rng.next();\n    return result / 2147483647.0;\n  }\n\n  public randomInt(a: number, b: number): number {\n    let result: number;\n    [result, this.rng] = prand.uniformIntDistribution(a, b, this.rng);\n    return result;\n  }\n\n  public flipCoin(): boolean {\n    let result: number;\n    [result, this.rng] = this.rng.next();\n    return result % 2 === 0;\n  }\n\n  public seed(seed: number) {\n    this.rng = prand.xorshift128plus(seed);\n  }\n\n  public constructor(seed: number) {\n    this.rng = prand.xorshift128plus(seed);\n  }\n}\n\nexport function rng() {\n  return rng$.value;\n}\n\nconst rng$ = new BehaviorSubject(new BbRandomGenerator(0));\n\n// theoretically this does nothing, but if you delete it the code stops working.\n// yay race conditions...?\nconst castSub = cast$.subscribe({\n  next: () => {},\n});\n","import { Houseguest } from \"./houseguest\";\nimport { PlayerProfile } from \"./playerProfile\";\nimport _ from \"lodash\";\nimport { newRelationshipMap, rng } from \"../utils\";\nimport { finalJurySize, getFinalists } from \"./season\";\nimport { EpisodeLog } from \"./logging/episodelog\";\n\nexport function getById(gameState: GameState, id: number): Houseguest {\n    return gameState.houseguestCache[id];\n}\n\nexport function exclude(inclusions: Houseguest[], exclusions: Houseguest[]) {\n    const excludedIds = exclusions.map(hg => hg.id);\n    return inclusions.filter(hg => !excludedIds.includes(hg.id) && !hg.isEvicted);\n}\n\nexport function randomPlayer(inclusions: Houseguest[], exclusions: Houseguest[] = []): Houseguest {\n    if (inclusions.length === 0) {\n        throw new Error(\"Tried to get a random player from a list of 0 players.\");\n    }\n    const options = exclude(inclusions, exclusions);\n    const choice = rng().randomInt(0, options.length - 1);\n\n    return options[choice];\n}\n\nexport function nonEvictedHouseguests(gameState: GameState) {\n    return gameState.houseguests.filter(hg => !hg.isEvicted);\n}\nexport function getJurors(gameState: GameState): Houseguest[] {\n    return gameState.houseguests.filter(hg => hg.isJury);\n}\n\nexport function inJury(gameState: GameState): Boolean {\n    return gameState.remainingPlayers - getFinalists() <= finalJurySize();\n}\n\nexport function calculatePopularity(hero: Houseguest, house: Houseguest[]) {\n    let sum = 0;\n    let count = 0;\n    const targetId = hero.id;\n    house.forEach(houseguest => {\n        if (houseguest.id !== targetId) {\n            count++;\n            sum += houseguest.relationships[targetId];\n        }\n    });\n    return count === 0 ? 0 : sum / count;\n}\n\nexport class GameState {\n    // Current state of the game after a phase.\n\n    readonly houseguestCache: { [id: number]: Houseguest } = {};\n    readonly houseguests: Houseguest[] = [];\n    readonly remainingPlayers: number = 0;\n    readonly phase: number = 0;\n    readonly previousHOH?: Houseguest;\n    readonly log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: PlayerProfile[] | GameState) {\n        if (!(init instanceof Array)) {\n            Object.assign(this, init);\n        } else {\n            const profiles = init as PlayerProfile[];\n            this.remainingPlayers = profiles.length;\n            profiles.forEach((profile, i) => {\n                const hg: Houseguest = new Houseguest({\n                    ...profile,\n                    id: i,\n                    relationships: newRelationshipMap(profiles.length, i)\n                });\n                this.houseguestCache[i] = hg;\n                this.houseguests.push(hg);\n            });\n        }\n    }\n}\n\nexport class MutableGameState {\n    public houseguests: Houseguest[] = [];\n    public houseguestCache: { [id: number]: Houseguest } = {};\n    public remainingPlayers: number = 0;\n    public phase: number = 0;\n    public previousHOH?: Houseguest;\n    public log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: GameState | MutableGameState) {\n        const copy = _.cloneDeep(init);\n        Object.assign(this, copy);\n    }\n}\n","import { BigBrotherVanilla } from \"../components/episode/bigBrotherEpisode\";\nimport { EpisodeFactory } from \"../components/episode/episodeFactory\";\nimport { GameState } from \"./gameState\";\nimport { EpisodeType, Episode } from \".\";\nimport { BigBrotherFinale } from \"../components/episode/bigBrotherFinale\";\nimport { GameOver } from \"../components/episode/gameOver\";\n\nexport function finalJurySize() {\n  return jurors;\n}\n\nlet jurors = 7;\n\nexport function getFinalists() {\n  return 2;\n}\n\nexport class Season {\n  private factory: EpisodeFactory;\n\n  public constructor() {\n    this.factory = new EpisodeFactory();\n  }\n\n  // In the future, this would all be customizable,\n  // and not just all big brother episodes by default.\n\n  public renderEpisode(gameState: GameState, type: EpisodeType): Episode {\n    return this.factory.nextEpisode(gameState, type);\n  }\n\n  public whichEpisodeType(players: number) {\n    if (players === 3) {\n      return BigBrotherFinale;\n    }\n    if (players === 2) {\n      return GameOver;\n    }\n    return BigBrotherVanilla;\n  }\n}\n","import { VoteType } from \"./voteType\";\n\nexport class EpisodeLog {\n    public nominationsPreVeto: string[] = [];\n    public vetoWinner?: string;\n    public winner?: number;\n    public runnerUp?: number;\n    public nominationsPostVeto: string[] = [];\n    public evicted: number = -1;\n    public votes: { [id: string]: VoteType } = {};\n    public votesInMajority: number = -1;\n    public outOf: number = -1;\n    public soleVoter?: string;\n}\n","import {\n  GameState,\n  MutableGameState,\n  calculatePopularity,\n  nonEvictedHouseguests,\n  inJury,\n} from \"../../model/gameState\";\nimport { Episode, Houseguest } from \"../../model\";\nimport { EpisodeType } from \"./episodes\";\nimport { roundTwoDigits } from \"../../utils\";\nimport {\n  classifyRelationship,\n  RelationshipType as Relationship,\n} from \"../../utils/ai/classifyRelationship\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport { EpisodeLog } from \"../../model/logging/episodelog\";\n\nfunction firstImpressions(houseguests: Houseguest[]) {\n  for (let i = 0; i < houseguests.length; i++) {\n    const iMap = houseguests[i].relationships;\n    for (let j = i + 1; j < houseguests.length; j++) {\n      // creates a bunch of 100% random mutual relationships\n      const jMap = houseguests[j].relationships;\n    }\n  }\n}\n\nfunction updatePowerRankings(houseguests: Houseguest[]) {\n  houseguests.forEach((hg) => {\n    hg.powerRanking = new PowerRanking(\n      houseguests.length - 1 - hg.superiors.size,\n      houseguests.length - 1\n    );\n  });\n}\n\nfunction updatePopularity(gameState: GameState) {\n  const houseguests = nonEvictedHouseguests(gameState);\n  houseguests.forEach((hg) => {\n    const result = calculatePopularity(hg, nonEvictedHouseguests(gameState));\n    hg.deltaPopularity =\n      (roundTwoDigits(result) - roundTwoDigits(hg.popularity)) / 100;\n    hg.popularity = result;\n  });\n}\n\nfunction updateFriendCounts(gameState: GameState) {\n  const houseguests = nonEvictedHouseguests(gameState);\n  houseguests.forEach((hero) => {\n    hero.getFriendEnemyCount = () => {\n      let friends = 0;\n      let enemies = 0;\n      houseguests.forEach((villain) => {\n        const rel = classifyRelationship(\n          hero.popularity,\n          villain.popularity,\n          hero.relationshipWith(villain),\n          false\n        );\n        if (hero.id === villain.id) {\n          return;\n        } else if (rel === Relationship.Friend) {\n          friends++;\n        } else if (rel === Relationship.Enemy) {\n          enemies++;\n        }\n      });\n      return { friends, enemies };\n    };\n  });\n}\n\nexport class EpisodeFactory {\n  public nextEpisode(gameState: GameState, episodeType: EpisodeType): Episode {\n    let newState = new MutableGameState(gameState);\n    if (gameState.phase === 0) {\n      firstImpressions(newState.houseguests);\n    }\n    newState.phase++;\n    if (nonEvictedHouseguests(gameState).length > 2) {\n      newState.log[newState.phase] = new EpisodeLog();\n    }\n\n    if (inJury(gameState)) {\n      updatePowerRankings(nonEvictedHouseguests(newState));\n    }\n    updatePopularity(newState);\n    updateFriendCounts(newState);\n    throw new Error(\"You can't call this function.\");\n  }\n}\n","import {\n  MutableGameState,\n  getById,\n  inJury,\n  nonEvictedHouseguests,\n  GameState,\n  EpisodeType,\n  Episode,\n  InitEpisode,\n} from \"../../model\";\nimport { getFinalists, finalJurySize } from \"../../model/season\";\nimport { Scene } from \"./scene\";\n\nexport const BigBrotherVanilla: EpisodeType = {\n  canPlayWith: (n: number) => {\n    return n > 1;\n  },\n  eliminates: 1,\n  arrowsEnabled: true,\n  hasViewsbar: true,\n};\n\n// Refactoring ideas\n/**\n * Might be best to start passing ids instead of houseguests for HoH/nominees/veto winner\n */\n\nexport function evictHouseguest(gameState: MutableGameState, id: number) {\n  const evictee = getById(gameState, id);\n  if (gameState.currentLog) gameState.currentLog.evicted = evictee.id;\n  evictee.isEvicted = true;\n  if (gameState.remainingPlayers - getFinalists() <= finalJurySize()) {\n    evictee.isJury = true;\n  }\n  if (inJury(gameState)) {\n    nonEvictedHouseguests(gameState).forEach((hg) => {\n      hg.superiors.delete(evictee.id);\n    });\n  }\n  gameState.remainingPlayers--;\n}\n\nexport function generateBbVanilla(initialGameState: GameState): null {\n  return null;\n}\nexport class BigBrotherVanillaEpisode extends Episode {\n  readonly title: string;\n  readonly scenes: Scene[];\n  readonly content: JSX.Element;\n  readonly gameState: GameState;\n  readonly type = BigBrotherVanilla;\n\n  public constructor(init: InitEpisode) {\n    super(init);\n    this.title = init.title;\n    this.scenes = init.scenes;\n    this.content = init.content;\n    this.gameState = init.gameState;\n  }\n}\n","import React from \"react\";\nimport { EpisodeType, Episode, InitEpisode } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherFinale: EpisodeType = {\n  canPlayWith: (n: number) => n === 3,\n  eliminates: 2,\n  arrowsEnabled: true,\n  hasViewsbar: true,\n};\n\nexport function generateBbFinale(\n  initialGameState: GameState\n): BigBrotherFinaleEpisode {\n  const title = \"Finale\";\n  const content = (\n    <HasText>\n      Finale Night\n      <NextEpisodeButton />\n    </HasText>\n  );\n  const scenes: Scene[] = [];\n  return new BigBrotherFinaleEpisode({\n    gameState: initialGameState,\n    content,\n    title,\n    scenes,\n    type: BigBrotherFinale,\n  });\n}\n\nexport class BigBrotherFinaleEpisode extends Episode {\n  readonly title: string;\n  readonly scenes: Scene[];\n  readonly content: JSX.Element;\n  readonly gameState: GameState;\n  readonly type = BigBrotherFinale;\n\n  public constructor(init: InitEpisode) {\n    super(init);\n    this.title = init.title;\n    this.scenes = init.scenes;\n    this.content = init.content;\n    this.gameState = init.gameState;\n  }\n}\n","import React from \"react\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\n\nconst FullscreenIcon = styled.img`\n    position: -webkit-sticky;\n    position: sticky;\n    top: 20px;\n    right: 20px;\n`;\n\nexport function FullscreenButton(): JSX.Element {\n    return (\n        <FullscreenIcon\n            src={\n                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAASElEQVRIiWNgGAUEACMa/z+R6ohWz0Sqi0gFLIRcQAAQDAGa+2DoWzAKRgH1wX8G3OULWfqHfkYbsNIUPR5IrQ/gYLQsGngAAEPgCRZjAdYSAAAAAElFTkSuQmCC\"\n            }\n            className=\"button is-rounded\"\n            onClick={() => {\n                isFullscreen$.next(!isFullscreen$.getValue());\n            }}\n        />\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { EpisodeLog } from \"../../../model/logging/episodelog\";\nimport { CenteredBold, Centered, CenteredItallic } from \"../../layout/centered\";\nimport { GameState, getById } from \"../../../model\";\nimport {\n  VoteType,\n  WinnerVote,\n  RunnerUpVote,\n} from \"../../../model/logging/voteType\";\nimport { FullscreenButton } from \"../../mainPage/fullscreenButton\";\nimport { ColorTheme } from \"../../../theme/theme\";\n\nexport const EndgameTableCell = styled.td`\n  padding: 0.1em 0.4em;\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n`;\n\nconst EndgameTable = styled.table`\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n  border-collapse: collapse;\n`;\n\nconst Gray = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.grayCell};\n`;\n\nconst White = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) =>\n    theme.lightGrayCell};\n`;\n\nconst Evicted = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.evictedCell};\n`;\n\nexport const WinnerCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.winnerCell};\n`;\n\nexport const RunnerUpCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.runnerUpCell};\n`;\n\nexport const NomineeCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.nomineeCell};\n`;\n\nexport const HohCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.hohCell};\n`;\n\nconst BlackRow = styled.tr`\n  height: 0.4em;\n  background-color: #000000;\n`;\n\nexport function generateVotingTable(gameState: GameState): JSX.Element {\n  const masterLog: EpisodeLog[] = gameState.log;\n  const houseguestCells: JSX.Element[][] = [];\n  gameState.houseguests.forEach((hg, i) => {\n    houseguestCells[hg.id] = [\n      <Gray key={`hg-name---${i}`}>\n        <CenteredBold noMargin={true}>{hg.name}</CenteredBold>\n      </Gray>,\n    ];\n  });\n  const evictionOrder: number[] = [];\n  const topRowCells: JSX.Element[] = [];\n  const preVetoCells: JSX.Element[] = [];\n  const vetoCells: JSX.Element[] = [];\n  const postVetoCells: JSX.Element[] = [];\n  const evictedCells: JSX.Element[] = [];\n  const winnerCells: JSX.Element[] = [];\n  masterLog.forEach((log, i) => {\n    generateTopRow(log, i, topRowCells, masterLog.length - 1);\n    generatePreVetoRow(log, i, preVetoCells);\n    generateVetoRow(log, i, vetoCells);\n    generatePostVetoRow(log, i, postVetoCells);\n    generateEvictedRow(log, i, evictedCells, gameState);\n    if (!log) return;\n    evictionOrder.push(log.evicted);\n    if (log.runnerUp !== undefined) evictionOrder.push(log.runnerUp);\n    if (log.winner !== undefined) evictionOrder.push(log.winner);\n    // add each of the votes to the houseguest cells\n    for (const [key, value] of Object.entries(log.votes)) {\n      // typescript for .. in loops kinda suck so i need to do a sketchy type conversion\n      const id: number = (key as unknown) as number;\n      const vote: VoteType = value;\n      houseguestCells[id].push(vote.render(gameState));\n    }\n    if (log.winner !== undefined && log.runnerUp !== undefined) {\n      houseguestCells[log.winner].push(new WinnerVote().render(gameState));\n      houseguestCells[log.runnerUp].push(new RunnerUpVote().render(gameState));\n      evictedCells.push(\n        <RunnerUpCell>\n          <CenteredBold noMargin={true}>\n            {getById(gameState, log.runnerUp).name}\n          </CenteredBold>\n          <Centered noMargin={true}>\n            <small>Finalist</small>\n          </Centered>\n        </RunnerUpCell>\n      );\n      winnerCells.push(\n        <WinnerCell>\n          <CenteredBold noMargin={true}>\n            {getById(gameState, log.winner).name}\n          </CenteredBold>\n          <Centered noMargin={true}>\n            <small>Winner</small>\n          </Centered>\n        </WinnerCell>\n      );\n    }\n  });\n  preVetoCells.push(\n    <White key={`preveto--finale`} rowSpan={3}>\n      <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n    </White>\n  );\n  const winnerRow = <tr>{winnerCells}</tr>;\n  const topRow = <tr>{topRowCells}</tr>;\n  const preVetoRow = <tr>{preVetoCells}</tr>;\n  const vetoRow = <tr>{vetoCells}</tr>;\n  const postVetoRow = <tr>{postVetoCells}</tr>;\n  const blackRow = (\n    <BlackRow>\n      <td colSpan={gameState.houseguests.length} />\n    </BlackRow>\n  );\n  const houseguestRows: JSX.Element[] = [];\n  const evictedRow = <tr>{evictedCells}</tr>;\n  let evictionColSpan = -1;\n  const weeks = evictionOrder.length;\n  evictionOrder.reverse().forEach((id, i) => {\n    if (evictionColSpan > 0) {\n      const weekText = i === 2 ? \"(Finale)\" : `(Week ${weeks - i})`;\n      const isJury = getById(gameState, id).isJury;\n      const colSpan = isJury ? evictionColSpan - 1 : evictionColSpan;\n      const evicted = (\n        <Evicted colSpan={colSpan} key={`evicted-week-${weeks - i}`}>\n          <CenteredItallic noMargin={true}>Evicted</CenteredItallic>\n          <CenteredItallic noMargin={true}>\n            <small>{weekText}</small>\n          </CenteredItallic>\n        </Evicted>\n      );\n      if (!isJury) {\n        houseguestCells[id].push(evicted); // not jury, they dead\n      } else {\n        const tempList = houseguestCells[id].slice(0, -1);\n        tempList.push(evicted);\n        tempList.push(houseguestCells[id][houseguestCells[id].length - 1]);\n        houseguestCells[id] = tempList;\n      }\n    }\n    houseguestRows.push(<tr key={`hgrow--${id}`}>{houseguestCells[id]}</tr>);\n    evictionColSpan++;\n  });\n\n  return (\n    <div>\n      <FullscreenButton />\n      <EndgameTable>\n        <tbody>\n          {topRow}\n          {preVetoRow}\n          {vetoRow}\n          {postVetoRow}\n          {blackRow}\n          {houseguestRows}\n          {blackRow}\n          {evictedRow}\n          {winnerRow}\n        </tbody>\n      </EndgameTable>\n    </div>\n  );\n}\n\nfunction generateEvictedRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[],\n  gameState: GameState\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={i} rowSpan={2}>\n        <CenteredBold noMargin={true}>Evicted</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n\n  const voteTextLine1 =\n    log.soleVoter !== undefined ? `${log.soleVoter}'s choice` : \"\";\n\n  cells.push(\n    <Evicted key={i} rowSpan={2}>\n      <Centered noMargin={true}>\n        <b>{getById(gameState, log.evicted).name}</b>\n        <br />\n        <small>\n          {voteTextLine1} <br />\n          to evict\n        </small>\n      </Centered>\n    </Evicted>\n  );\n}\n\nfunction generatePostVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`postVeto--${i}`}>\n        <CenteredBold noMargin={true}>\n          Nominations\n          <br />\n          <small>(post-veto)</small>\n        </CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  cells.push(\n    <White key={`postVeto--${i}`}>\n      <Centered noMargin={true}>\n        {log.nominationsPostVeto[0]}\n        <br /> {log.nominationsPostVeto[1]}\n      </Centered>\n    </White>\n  );\n}\n\nfunction generateVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`veto--${i}`}>\n        <CenteredBold noMargin={true}>Veto Winner</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  if (log.vetoWinner === undefined) return;\n\n  cells.push(\n    <White key={`veto--${i}`}>\n      <Centered noMargin={true}>{log.vetoWinner}</Centered>\n    </White>\n  );\n}\n\nfunction generatePreVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`preveto--${i}`}>\n        <CenteredBold noMargin={true}>\n          Nominations\n          <br />\n          <small>(pre-veto)</small>\n        </CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  if (log.nominationsPreVeto.length === 0) {\n    cells.push(\n      <White key={`preveto--${i}`} rowSpan={2}>\n        <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n      </White>\n    );\n    return;\n  }\n  cells.push(\n    <White key={`preveto--${i}`}>\n      <Centered noMargin={true}>\n        {log.nominationsPreVeto[0]}\n        <br /> {log.nominationsPreVeto[1]}\n      </Centered>\n    </White>\n  );\n}\n\nfunction generateTopRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[],\n  max: number\n) {\n  if (!log) {\n    cells.push(<Gray key={`toprow--${i}`} />);\n    return;\n  }\n  if (i === max) {\n    cells.push(\n      <Gray key={`toprow--${i}`} colSpan={2}>\n        <CenteredBold noMargin={true}>Finale</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  cells.push(\n    <Gray key={`toprow--${i}`}>\n      <CenteredBold noMargin={true}>Week {i}</CenteredBold>\n    </Gray>\n  );\n}\n","import { Episode, InitEpisode, EpisodeType } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { evictHouseguest } from \"./bigBrotherEpisode\";\nimport { generateVotingTable } from \"./scenes/votingTable\";\n\nexport const GameOver: EpisodeType = {\n    canPlayWith: (n: number) => n === 1,\n    eliminates: 1,\n    arrowsEnabled: false,\n    hasViewsbar: false\n};\n\nexport function generateGameOver(gameState: GameState): GameOverEpisode {\n    const title = \"Game Over\";\n    const scenes: Scene[] = [];\n    const content = generateVotingTable(gameState);\n    gameState.houseguests.forEach(hg => {\n        evictHouseguest(gameState, hg.id);\n    });\n    return new GameOverEpisode({ gameState, content, title, scenes, type: GameOver });\n}\n\nexport class GameOverEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { Subscription } from \"rxjs\";\nimport { Sidebar } from \"./sidebar\";\nimport { Season } from \"../../model/season\";\nimport { Episode, nonEvictedHouseguests, getById } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport {\n  mainContentStream$,\n  episodes$,\n  switchEpisode$,\n  newEpisode,\n  switchSceneRelative,\n  getSelectedPlayer,\n  selectedPlayer$,\n} from \"../../subjects/subjects\";\n\ninterface IndexedScene {\n  scene: Scene;\n  index: number;\n}\n\nconst LEFT = 37;\nconst RIGHT = 39;\n\nexport class SidebarController {\n  private view: Sidebar;\n  private subscriptions: Subscription[] = [];\n  private season: Season = new Season();\n  private scenes: IndexedScene[] = [];\n  private selectedEpisode: number = 0;\n\n  public constructor(view: Sidebar) {\n    this.view = view;\n    this.subscriptions.push(\n      episodes$.subscribe({\n        next: (episode) => this.onNewEpisode(episode),\n      })\n    );\n    this.subscriptions.push(\n      switchEpisode$.subscribe({\n        next: (value: number) => {\n          this.switchSceneRelative(value);\n        },\n      })\n    );\n  }\n\n  public getSelectedEpisode() {\n    return this.selectedEpisode;\n  }\n\n  public async switchToScene(id: number) {\n    mainContentStream$.next(this.scenes[id].scene.render);\n    this.selectedEpisode = this.scenes[id].index;\n    await this.view.setState({ selectedScene: id });\n    if (getSelectedPlayer() !== null) {\n      selectedPlayer$.next(\n        getById(\n          this.scenes[this.view.state.selectedScene].scene.gameState,\n          getSelectedPlayer()!.id\n        )\n      );\n    }\n  }\n\n  private switchSceneRelative = (delta: number) => {\n    const selectedScene = this.view.state.selectedScene;\n    const renderedScenes = this.scenes.length;\n    const targetScene = selectedScene + delta;\n    if (targetScene < 0) {\n      return;\n    }\n    const lastEpisode = this.view.state.episodes[\n      this.view.state.episodes.length - 1\n    ];\n    if (targetScene < renderedScenes) {\n      // Go back to an earlier scene\n      this.switchToScene(targetScene);\n    } else if (targetScene === renderedScenes) {\n      // Generate a new scene, then jump to it\n      const currentGameState = lastEpisode.gameState;\n      const newPlayerCount = nonEvictedHouseguests(lastEpisode.gameState)\n        .length;\n      const nextEpisodeType = this.season.whichEpisodeType(newPlayerCount);\n      if (newPlayerCount > 0) {\n        newEpisode(\n          this.season.renderEpisode(currentGameState, nextEpisodeType)\n        );\n        this.switchSceneRelative(1);\n      }\n    }\n  };\n\n  get handleKeyDown(): (e: any) => void {\n    return this._handleKeyDown.bind(this);\n  }\n\n  private _handleKeyDown(event: any) {\n    const state = this.view.state;\n\n    if (\n      state.episodes[this.selectedEpisode] === undefined ||\n      !state.episodes[this.selectedEpisode].type.arrowsEnabled\n    ) {\n      return;\n    }\n    if (event.keyCode === LEFT) {\n      switchSceneRelative(-1);\n    } else if (event.keyCode === RIGHT) {\n      switchSceneRelative(1);\n    }\n  }\n\n  private onNewEpisode(episode: Episode | null) {\n    if (!episode) {\n      this.view.setState({ episodes: [], selectedScene: 0 });\n      this.scenes = [];\n    } else {\n      const newState = { ...this.view.state };\n      // starts at -1: prevent OBOE\n      const latestIndex =\n        this.scenes.length === 0\n          ? -1\n          : this.scenes[this.scenes.length - 1].index;\n      const index = latestIndex + 1;\n      this.scenes.push({ scene: episode, index });\n      episode.scenes.forEach((scene) => this.scenes.push({ scene, index }));\n      newState.episodes.push(episode);\n      this.view.setState(newState);\n    }\n  }\n\n  public destroy() {\n    this.subscriptions.forEach((sub) => sub.unsubscribe());\n  }\n}\n","import React from \"react\";\nimport { SidebarController } from \"./sidebarController\";\nimport { Episode, GameState } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport { newEpisode } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\nimport { HasText } from \"../layout/text\";\ninterface SidebarState {\n  episodes: Episode[];\n  selectedScene: number;\n}\n\nexport class Sidebar extends React.Component<{}, SidebarState> {\n  private controller: SidebarController;\n  public constructor(props: {}) {\n    super(props);\n    this.controller = new SidebarController(this);\n    this.state = { episodes: [], selectedScene: 0 };\n  }\n\n  public componentDidMount() {\n    document.addEventListener(\"keydown\", this.controller.handleKeyDown);\n  }\n\n  public componentWillUnmount() {\n    this.controller.destroy();\n  }\n\n  public render() {\n    return (\n      <Box style={{ minWidth: 180, display: \"none\" }}>\n        <HasText>{this.getEpisodes()}</HasText>\n      </Box>\n    );\n  }\n\n  private getHighlight(title: string, key: number) {\n    if (key === this.state.selectedScene) {\n      return <mark>{title}</mark>;\n    }\n    return title;\n  }\n\n  private getEpisodes() {\n    const result: JSX.Element[] = [];\n    // Weird OBOE to make keys start at 0\n    let episodeKey = -1;\n    let breakKey = 0;\n    this.state.episodes.forEach((episode: Episode) => {\n      const id = ++episodeKey;\n      result.push(\n        <b\n          key={id}\n          onClick={() => {\n            this.controller.switchToScene(id);\n          }}\n        >\n          {this.getHighlight(episode.title, id)}\n        </b>\n      );\n      result.push(<br key={--breakKey} />);\n      episode.scenes.forEach((scene: Scene) => {\n        const id = ++episodeKey;\n        if (this.controller.getSelectedEpisode() === episode.gameState.phase) {\n          result.push(\n            <a key={id} onClick={() => this.controller.switchToScene(id)}>\n              {this.getHighlight(scene.title, id)}\n            </a>\n          );\n          result.push(<br key={--breakKey} />);\n        }\n      });\n    });\n    return result;\n  }\n}\n","export interface ColorTheme {\n    name: string;\n    bg: string;\n    text: string;\n    toggleBorder: string;\n    gradient: string;\n    bodyArea: string;\n    link: string;\n    mark: string;\n    overlay: string;\n    evictedCell: string;\n    grayCell: string;\n    winnerCell: string;\n    lightGrayCell: string;\n    runnerUpCell: string;\n    nomineeCell: string;\n    hohCell: string;\n    portraitBorder: string;\n    tableCellBorder: string;\n}\n\nexport const lightTheme: ColorTheme = {\n    name: \"light\",\n    bg: \"#fff\",\n    text: \"#363537\",\n    toggleBorder: \"#FFF\",\n    gradient: \"linear-gradient(#39598A, #79D7ED)\",\n    bodyArea: \"#fff\",\n    link: \"blue\",\n    mark: \"yellow\",\n    overlay: \"fff\",\n    evictedCell: \"#fa8072\",\n    grayCell: \"#eaecf0\",\n    lightGrayCell: \"#f8f9fa\",\n    winnerCell: \"#73fb76\",\n    runnerUpCell: \"#d1e8ef\",\n    nomineeCell: \"#959ffd\",\n    hohCell: \"#CCFFCC\",\n    portraitBorder: \"gray\",\n    tableCellBorder: \"#a2a9b1\",\n};\n\nexport const darkTheme: ColorTheme = {\n    name: \"dark\",\n    bg: \"#121212\",\n    text: \"#FAFAFA\",\n    bodyArea: \"#363537\",\n    toggleBorder: \"#6B8096\",\n    gradient: \"linear-gradient(#091236, #1E215D)\",\n    link: \"lightblue\",\n    mark: \"#7e006d\",\n    overlay: \"#444346\",\n    evictedCell: \"#9d4c43\",\n    grayCell: \"#5e5e5e\",\n    lightGrayCell: \"#404040\",\n    runnerUpCell: \"#9fbec882\",\n    nomineeCell: \"#6c75d0\",\n    winnerCell: \"#00ac04\",\n    hohCell: \"#3f783f\",\n    portraitBorder: \"#484848\",\n    tableCellBorder: \"#53575b\",\n};\n","import React, { useState } from \"react\";\nimport { theme$ } from \"../../subjects/subjects\";\nimport { darkTheme, lightTheme } from \"../../theme/theme\";\n\nexport function ThemeSwitcher() {\n  const [theme, setTheme] = useState(\"dark\");\n  const toggleTheme = () => {\n    if (theme === \"light\") {\n      setTheme(\"dark\");\n      theme$.next(darkTheme);\n    } else {\n      setTheme(\"light\");\n      theme$.next(lightTheme);\n    }\n  };\n\n  const className = `button ${theme === \"dark\" ? `is-dark` : \"is-light\"}`;\n  return (\n    <div className={className} onClick={toggleTheme}>\n      {theme === \"light\" ? \"Dark mode\" : \"Light mode\"}\n    </div>\n  );\n}\n","import { ProfileHouseguest } from \"../components/memoryWall\";\nimport { Tribe } from \"./tribe\";\nimport { PlayerProfile } from \"../model\";\nimport { DiscreteRelationshipMap } from \"../utils\";\n\ntype Map = \"relationships\" | \"powerRankings\";\ntype LikeKey = \"likedBy\" | \"thinksImThreat\";\ntype DislikeKey = \"dislikedBy\" | \"thinksImWeak\";\n\nfunction likeByDislikeBy(threats: number, weaks: number, n: number) {\n  if (n === 0) return 0;\n  const twoN = 2 * n;\n  return 0.5 + threats / twoN - weaks / twoN;\n}\n\nexport interface RelationshipHouseguest extends PlayerProfile {\n  id: number;\n  isEvicted?: boolean;\n  isJury?: boolean;\n  tribe?: Tribe;\n  //\n  relationships: DiscreteRelationshipMap;\n  popularity?: number;\n  likedBy: number;\n  dislikedBy: number;\n  //\n  powerRankings: DiscreteRelationshipMap;\n  powerRanking?: number;\n  thinksImWeak: number;\n  thinksImThreat: number;\n  //\n  tooltip?: string;\n}\nexport class RelationshipMapper {\n  public houseguests: RelationshipHouseguest[] = [];\n  private cache: {\n    [id: string]: RelationshipHouseguest;\n  } = {};\n  private nonEvictedHouseguests: number = 0;\n  nonEvictedIDs: number[] = [];\n  public constructor(houseguests: RelationshipHouseguest[]) {\n    this.houseguests = houseguests;\n    if (houseguests.length > 4096) {\n      throw new Error(\"The max number of players is 4096.\");\n    }\n    houseguests.forEach((hg) => {\n      this.cache[hg.name.toUpperCase()] = hg;\n      !hg.isEvicted && this.nonEvictedHouseguests++;\n      !hg.isEvicted && this.nonEvictedIDs.push(hg.id);\n    });\n  }\n\n  public getById(id: number): RelationshipHouseguest {\n    if (this.houseguests[id] === undefined) throw Error(\"invalid id\");\n    return this.houseguests[id];\n  }\n\n  private get(hero: string) {\n    return this.cache[hero.toUpperCase()];\n  }\n  private getRelationship(h: string, v: string, map: Map) {\n    return this.get(h)[map][this.get(v).id];\n  }\n  private updatePopularities(hg: ProfileHouseguest) {\n    const peopleWithOpinions = this.nonEvictedHouseguests - 1;\n    hg.popularity === undefined && (hg.popularity = 0);\n    hg.popularity = (hg.likedBy - hg.dislikedBy) / peopleWithOpinions;\n    hg.powerRanking === undefined && (hg.powerRanking = 0);\n    hg.likedBy === 0 && hg.dislikedBy === 0 && (hg.popularity = undefined);\n    //////\n    hg.powerRanking = likeByDislikeBy(\n      hg.thinksImThreat,\n      hg.thinksImWeak,\n      peopleWithOpinions\n    );\n    hg.thinksImThreat === 0 &&\n      hg.thinksImWeak === 0 &&\n      (hg.powerRanking = undefined);\n  }\n\n  public evict(h: string) {\n    const hero = this.get(h);\n    const toDelete = this.nonEvictedIDs.indexOf(hero.id);\n    if (hero.isEvicted) return;\n    hero.isEvicted = true;\n    this.nonEvictedHouseguests--;\n    this.nonEvictedIDs.forEach((id) => {\n      this.neutral(h, this.houseguests[id].name);\n      this.neutral(this.houseguests[id].name, h);\n      this.utr(h, this.houseguests[id].name);\n      this.utr(this.houseguests[id].name, h);\n    });\n    this.nonEvictedIDs.splice(toDelete, 1);\n  }\n\n  public unevict(h: string) {\n    const hero = this.get(h);\n    if (!hero.isEvicted) return;\n    hero.isEvicted = false;\n    this.nonEvictedHouseguests++;\n    this.nonEvictedIDs.push(hero.id);\n  }\n\n  public setRelationship(\n    h: string,\n    v: string,\n    newR: boolean | undefined,\n    likeKey: LikeKey,\n    dislikeKey: DislikeKey,\n    map: Map\n  ) {\n    const hToV = this.getRelationship(h, v, map);\n    const hero = this.get(h);\n    const villain = this.get(v);\n    if (\n      hToV === newR ||\n      ((hero.isEvicted || hero.isJury || villain.isJury || villain.isEvicted) &&\n        newR !== undefined)\n    ) {\n      return;\n    }\n    if (hToV === undefined) {\n      newR === true ? villain[likeKey]++ : villain[dislikeKey]++;\n    } else if (newR === undefined) {\n      hToV === true ? villain[likeKey]-- : villain[dislikeKey]--;\n    } else {\n      newR === true\n        ? villain[likeKey]++ && villain[dislikeKey]--\n        : villain[likeKey]-- && villain[dislikeKey]++;\n    }\n    // actually set it\n    hero[map][villain.id] = newR;\n    this.updatePopularities(villain);\n  }\n  public tribe(tribe: Tribe, members: string[]) {\n    if (tribe.name.includes(\"#\") || tribe.name.includes(\"=\"))\n      throw new Error(\"Tribe names cannot contain # or =\");\n    members.forEach((hg) => {\n      this.get(hg).tribe = tribe;\n    });\n  }\n  public like(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      true,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public dislike(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      false,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public neutral(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      undefined,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public friends(hero: string, villain: string) {\n    this.like(hero, villain);\n    this.like(villain, hero);\n  }\n  public threat(h: string, v: string) {\n    this.setRelationship(\n      h,\n      v,\n      true,\n      \"thinksImThreat\",\n      \"thinksImWeak\",\n      \"powerRankings\"\n    );\n  }\n  public weak(h: string, v: string) {\n    this.setRelationship(\n      h,\n      v,\n      false,\n      \"thinksImThreat\",\n      \"thinksImWeak\",\n      \"powerRankings\"\n    );\n  }\n  public utr(h: string, v: string) {\n    this.setRelationship(\n      h,\n      v,\n      undefined,\n      \"thinksImThreat\",\n      \"thinksImWeak\",\n      \"powerRankings\"\n    );\n  }\n  public alliance(members: string[]) {\n    for (let i = 0; i < members.length; i++) {\n      for (let j = i + 1; j < members.length; j++) {\n        this.friends(members[i], members[j]);\n      }\n    }\n  }\n  public enemies(hero: string, villain: string) {\n    this.dislike(hero, villain);\n    this.dislike(villain, hero);\n  }\n}\n","export const Base64 = (function () {\n  var digitsStr =\n    \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-\";\n  var digits = digitsStr.split(\"\");\n  var digitsMap: Map<string, number> = new Map<string, number>();\n  for (var i = 0; i < digits.length; i++) {\n    digitsMap.set(digits[i], i);\n  }\n  return {\n    fromInt: function (int32: number) {\n      var result = \"\";\n      while (true) {\n        result = digits[int32 & 0x3f] + result;\n        int32 >>>= 6;\n        if (int32 === 0) break;\n      }\n      return result;\n    },\n    toInt: function (digitsStr: string) {\n      var result = 0;\n      var digits = digitsStr.split(\"\");\n      for (var i = 0; i < digits.length; i++) {\n        const m = digitsMap.get(digits[i]);\n        if (m === undefined)\n          throw new Error(\"Tried to decode an invalid B64 string\");\n        result = (result << 6) + m;\n      }\n      return result;\n    },\n  };\n})();\n","import {\n  RelationshipMapper,\n  RelationshipHouseguest,\n} from \"./RelationshipMapper\";\nimport { CodedRelationships } from \"./encoder\";\nimport { Base64 } from \"../utils/base64\";\nimport _ from \"lodash\";\n\nconst decode = (s: string) => Base64.toInt(s).toString(3).padStart(7, \"0\"); // base64 --> ternary\n\nconst ternaryToRelationship = new Map<string, boolean | undefined>(\n  Object.entries({\n    \"0\": false,\n    \"1\": true,\n    \"2\": undefined,\n  })\n);\nfunction fromTernary(n: string): boolean | undefined {\n  const result = ternaryToRelationship.get(n);\n  if (result === undefined && n !== \"2\")\n    throw new Error(`${n} is not a ternary value`);\n  return result;\n}\n\nexport function decodeToRelationshipMapper(\n  m: RelationshipMapper,\n  c1: string\n): RelationshipMapper | null {\n  const r = new RelationshipMapper(_.cloneDeep(m.houseguests));\n  r.houseguests.forEach((hg) => {\n    r.unevict(hg.name);\n  });\n  const c = c1.trim();\n  try {\n    if (c.split(\"|\").length !== 4) throw new Error(`Not a code`);\n    const [tribes, evictees, relationships, powerRankings] = c.split(\"|\");\n    if (\n      relationships.length % 2 > 0 ||\n      evictees.length % 2 > 0 ||\n      powerRankings.length % 2 > 0\n    )\n      throw new Error(\n        `Misaligned bytes: (${evictees.length}, ${relationships.length}, ${powerRankings.length}`\n      );\n    decodeRelationships(r, { relationships, powerRankings });\n    decodeEvictees(r, evictees);\n    decodeTribes(r, tribes);\n  } catch (e) {\n    alert(e);\n    return null;\n  }\n  return r;\n}\n\nconst chex = /([a-f0-9]){6}/;\n\nfunction decodeTribes(m: RelationshipMapper, c: string) {\n  const tribes: string[] = c.split(\"=\");\n  tribes.forEach((t) => {\n    const hash = t.indexOf(\"#\");\n    if (hash === -1) throw new Error(\"Invalid tribe, does not have a color\");\n    const tribeName = t.slice(0, hash);\n    const color = t.slice(hash + 1, hash + 7);\n    const members = t.slice(hash + 7);\n    if (!chex.test(color)) throw new Error(`Invalid color: ${color}`);\n    const tribemates: string[] = [];\n    let i = 0;\n    while (members[2 * i] !== undefined) {\n      tribemates.push(\n        codeToHouseguest(m, `${members[2 * i]}${members[2 * i + 1]}`, \"tribes\")\n          .name\n      );\n      i++;\n    }\n    m.tribe({ color: `#${color}`, name: tribeName }, tribemates);\n  });\n}\n\nfunction codeToHouseguest(\n  m: RelationshipMapper,\n  c: string,\n  e?: string\n): RelationshipHouseguest {\n  const lookedUp: number = Base64.toInt(c);\n  if (lookedUp >= m.houseguests.length)\n    throw new Error(\n      `${lookedUp} (${c}) exceeds the maximum id: ${m.houseguests.length} in ${e}`\n    );\n  return m.houseguests[lookedUp];\n}\n\nfunction decodeEvictees(m: RelationshipMapper, c: string) {\n  let i = 0;\n  while (c[2 * i] !== undefined) {\n    m.evict(codeToHouseguest(m, `${c[2 * i]}${c[2 * i + 1]}`, \"evictees\").name);\n    i++;\n  }\n}\n\nfunction decodeRelationships(m: RelationshipMapper, c: CodedRelationships) {\n  let decodedR = \"\";\n  let decodedP = \"\";\n  let r: number = 0;\n  let p: number = 0;\n  const [relationships, powerRankings] = [c.relationships, c.powerRankings];\n  m.houseguests.forEach((hg) => {\n    if (hg.isEvicted || hg.isJury) return;\n    m.nonEvictedIDs.forEach((id) => {\n      if (hg.id === id) return;\n      //////////////////////////////////////////////// relationships\n      if (decodedR.length === 0) {\n        decodedR = decode(`${relationships[r]}${relationships[r + 1]}`);\n        r += 2;\n      }\n      m.setRelationship(\n        hg.name,\n        m.houseguests[id].name,\n        fromTernary(decodedR[0]),\n        \"likedBy\",\n        \"dislikedBy\",\n        \"relationships\"\n      );\n      decodedR = decodedR.slice(1);\n      //////////////////////////////////////////////// powerRankings\n      if (decodedP.length === 0) {\n        decodedP = decode(`${powerRankings[p]}${powerRankings[p + 1]}`);\n        p += 2;\n      }\n      m.setRelationship(\n        hg.name,\n        m.houseguests[id].name,\n        fromTernary(decodedP[0]),\n        \"thinksImThreat\",\n        \"thinksImWeak\",\n        \"powerRankings\"\n      );\n      decodedP = decodedP.slice(1);\n    });\n  });\n}\n","import { Topbar } from \"./topBar\";\nimport { decodeToRelationshipMapper } from \"../../images/decoder\";\nimport { RelationshipMapper } from \"../../images/RelationshipMapper\";\nimport { players$ } from \"../../subjects/subjects\";\n\nexport class TopbarController {\n  private view: Topbar;\n  public constructor(view: Topbar) {\n    this.view = view;\n  }\n  public onSubmit = () => {\n    if (!this.view.state.inputCode) return;\n    const newMap: RelationshipMapper | null = decodeToRelationshipMapper(\n      this.view.state.rMapper,\n      this.view.state.inputCode\n    );\n    this.view.setState({ inputCode: \"\" });\n    if (newMap === null) return;\n\n    this.view.setState({ rMapper: newMap });\n    players$.next(newMap.houseguests);\n  };\n}\n","import { newDiscreteRelationshipMap, hashcode } from \"../utils\";\nimport prand from \"pure-rand\";\nimport {\n  RelationshipMapper,\n  RelationshipHouseguest,\n} from \"./RelationshipMapper\";\nimport { encodeRelationshipMapper } from \"./encoder\";\n\nfunction importAll(\n  context: __WebpackModuleApi.RequireContext\n): RelationshipMapper {\n  const profiles: RelationshipHouseguest[] = [];\n  setupProfiles(context, profiles, new Set<string>(), new Set<string>());\n  const r: RelationshipMapper = new RelationshipMapper(profiles);\n  // r.tribe({ name: \"Power\", color: \"#ff0000\" }, [\n  //   \"Hillock\",\n  //   \"Piety\",\n  //   \"Brutus\",\n  //   \"malachai\",\n  //   \"kitava\",\n  //   \"Atziri\",\n  //   \"doedre\",\n  // ]);\n  // r.tribe({ name: \"Courage\", color: \"#00ffff\" }, [\n  //   \"Lunaris\",\n  //   \"Archbishop Geofri\",\n  //   \"Solaris\",\n  //   \"baran\",\n  //   \"Eleron\",\n  //   \"Dominus\",\n  //   \"Avarius\",\n  // ]);\n  // r.tribe({ name: \"Wisdom\", color: \"#00ff00\" }, [\n  //   \"Veritania\",\n  //   \"The Elder\",\n  //   \"Rhys\",\n  //   \"Izaro\",\n  //   \"kuduku\",\n  //   \"Shavronne\",\n  //   \"The Shaper\",\n  // ]);\n  // r.alliance([\"kitava\", \"rhys\"]);\n  // console.log(encodeRelationshipMapper(r));\n  return r;\n}\n\n////////////////// safe space below here\n\nexport const initialProfiles = importAll(\n  require.context(\"./src\", false, /.png/)\n);\n\nfunction setupProfiles(\n  context: __WebpackModuleApi.RequireContext,\n  profiles: RelationshipHouseguest[],\n  evictedHouseguests: Set<string>,\n  jurors: Set<string>\n) {\n  context.keys().map((item: string, i: number) => {\n    const name = item.replace(\".png\", \"\").replace(\"./\", \"\");\n    profiles.push({\n      name,\n      imageURL: context(item),\n      id: i,\n      isEvicted: evictedHouseguests.has(name.toLowerCase()),\n      isJury: jurors.has(name.toLowerCase()),\n      relationships: newDiscreteRelationshipMap(context.length - 1, i),\n      powerRankings: newDiscreteRelationshipMap(context.length - 1, i),\n      likedBy: 0,\n      dislikedBy: 0,\n      thinksImThreat: 0,\n      thinksImWeak: 0,\n    });\n  });\n}\n\nfunction randomInt(\n  a: number,\n  b: number,\n  rng: prand.RandomGenerator\n): [number, prand.RandomGenerator] {\n  let result: number;\n  [result, rng] = prand.uniformIntDistribution(a, b, rng);\n  return [result, rng];\n}\nfunction randomChoice(\n  a: (number | boolean | undefined)[],\n  rng: prand.RandomGenerator\n): [number | boolean | undefined, prand.RandomGenerator] {\n  const [result, rng2] = randomInt(0, a.length - 1, rng);\n  return [a[result], rng2];\n}\n\nfunction randomRelationships(r: RelationshipMapper) {\n  let castNames = \"\";\n  r.houseguests.forEach((houseguest) => (castNames += houseguest.name));\n  let rng = prand.xorshift128plus(hashcode(castNames));\n  const hgs = r.houseguests;\n  for (let i = 0; i < hgs.length; i++) {\n    const hero = hgs[i].name;\n    for (let j = i + 1; j < hgs.length; j++) {\n      const villain = hgs[j].name;\n      let r1;\n      let r2;\n      [r1, rng] = randomChoice([true, false, undefined], rng);\n      [r2, rng] = randomChoice([true, false, undefined], rng);\n      r.setRelationship(\n        hero,\n        villain,\n        r1 as any,\n        \"likedBy\",\n        \"dislikedBy\",\n        \"relationships\"\n      );\n      r.setRelationship(\n        villain,\n        hero,\n        r2 as any,\n        \"likedBy\",\n        \"dislikedBy\",\n        \"relationships\"\n      );\n      [r1, rng] = randomChoice([true, false, undefined], rng);\n      [r2, rng] = randomChoice([true, false, undefined], rng);\n      r.setRelationship(\n        hero,\n        villain,\n        r1 as any,\n        \"thinksImThreat\",\n        \"thinksImWeak\",\n        \"powerRankings\"\n      );\n      r.setRelationship(\n        villain,\n        hero,\n        r2 as any,\n        \"thinksImThreat\",\n        \"thinksImWeak\",\n        \"powerRankings\"\n      );\n    }\n  }\n}\n","import React from \"react\";\nimport { ThemeSwitcher } from \"./themeSwitch\";\nimport { Box } from \"../layout/box\";\nimport { HasText } from \"../layout/text\";\nimport { TopbarController } from \"./topBarController\";\nimport { RelationshipMapper } from \"../../images/RelationshipMapper\";\nimport { initialProfiles } from \"../../images/initialProfiles\";\nimport { players$ } from \"../../subjects/subjects\";\n\ninterface TopbarProps {\n  style?: any;\n}\ninterface TopbarState {\n  inputCode: string;\n  rMapper: RelationshipMapper;\n}\nexport class Topbar extends React.Component<TopbarProps, TopbarState> {\n  private controller: TopbarController;\n\n  public constructor(props: TopbarProps) {\n    super(props);\n    this.controller = new TopbarController(this);\n    this.state = { inputCode: \"\", rMapper: initialProfiles };\n  }\n\n  public componentDidMount() {\n    players$.next(this.state.rMapper.houseguests);\n  }\n  private handleChange = ((event: { target: { value: string } }) => {\n    this.setState({ inputCode: event.target.value });\n  }).bind(this);\n\n  public render(): JSX.Element {\n    const style = { ...{ marginTop: 30 }, ...(this.props.style || {}) };\n    return (\n      <Box className=\"level is-mobile\" style={style}>\n        <HasText className=\"level-item\">\n          Enter Code:\n          <input\n            className=\"input\"\n            value={this.state.inputCode}\n            onChange={this.handleChange}\n          />\n          <button\n            disabled={!!!this.state.inputCode}\n            className={`button is-light`}\n            onClick={this.controller.onSubmit}\n          >\n            Submit\n          </button>\n        </HasText>\n        <div className=\"level-item\">\n          <ThemeSwitcher />\n        </div>\n      </Box>\n    );\n  }\n}\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport { mainContentStream$ } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\n\nconst MainContentAreaWrapper = styled(Box)`\n    overflow-x: auto;\n`;\n\nexport class MainContentArea extends React.Component<{}, { content: any }> {\n    // a simple class that displays whatever it gets fed through the main content stream.\n\n    private contentStream: any;\n\n    public constructor(props: any) {\n        super(props);\n        this.state = { content: null };\n    }\n\n    public componentDidMount() {\n        this.contentStream = mainContentStream$.subscribe((content) => {\n            this.setState({ content });\n        });\n    }\n\n    public componentDidUpdate(prevProps: never, prevState: any) {\n        if (prevState.content !== this.state.content) {\n            window.scrollTo(0, 0);\n        }\n    }\n\n    public componentWillUnmount() {\n        this.contentStream.unsubscribe();\n    }\n\n    public render() {\n        return <MainContentAreaWrapper>{this.state.content}</MainContentAreaWrapper>;\n    }\n}\n","import \"./bulma.scss\";\nimport React from \"react\";\nimport { Sidebar } from \"../sidebar/sidebar\";\nimport { Topbar } from \"../topbar/topBar\";\nimport { MainContentArea } from \"./mainContentArea\";\nimport { MainPageController } from \"./mainPageController\";\n\ninterface MainPageProps {\n  controller: MainPageController;\n}\n\ninterface MainPageState {\n  fullscreen: boolean;\n}\n\nexport class MainPage extends React.Component<MainPageProps, MainPageState> {\n  public constructor(props: MainPageProps) {\n    super(props);\n    this.state = { fullscreen: false };\n    props.controller.inject(this);\n  }\n  public componentDidMount() {\n    this.props.controller.subscribe();\n  }\n  public componentWillUnmount() {\n    this.props.controller.unsubscribe();\n  }\n\n  public render() {\n    const fullscreen = this.state.fullscreen;\n    const hideOnFullscreen = { display: fullscreen ? \"none\" : \"\" };\n    const wrapperStyle = fullscreen\n      ? { margin: \"auto\" }\n      : { margin: \"auto\", maxWidth: 1380, overflow: \"hidden\" };\n    return (\n      <div style={wrapperStyle}>\n        <Sidebar />\n        <Topbar style={hideOnFullscreen} />\n        <div className=\"columns\">\n          <div className=\"column\" style={{ overflowX: \"hidden\" }}>\n            <MainContentArea />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { MainPage } from \"./mainPage\";\nimport { Subscription } from \"rxjs\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\n\nexport class MainPageController {\n    private view: MainPage = new MainPage({ controller: this });\n    private subscriptions: Subscription[] = [];\n    public inject(page: MainPage) {\n        this.view = page;\n    }\n\n    public subscribe(): void {\n        this.unsubscribe();\n        this.subscriptions.push(\n            isFullscreen$.subscribe((fullscreen: boolean) => {\n                this.view.setState({ fullscreen });\n            })\n        );\n    }\n\n    public unsubscribe(): void {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n}\n","import { createGlobalStyle } from \"styled-components\";\nimport { ColorTheme } from \"./theme\";\n\nexport const GlobalStyles = createGlobalStyle`\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n  div {\n    transition: all 0.25s linear;\n  }\n\n  body {\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bg};\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n       transition: all 0.25s linear;\n  }`;\n","import React from \"react\";\nimport { MainPage } from \"./components/mainPage/mainPage\";\nimport { MainPageController } from \"./components/mainPage/mainPageController\";\nimport { ThemeProvider } from \"styled-components\";\nimport { ColorTheme, darkTheme } from \"./theme/theme\";\nimport { GlobalStyles } from \"./theme/globalTheme\";\nimport { theme$ } from \"./subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nclass App extends React.Component<{}, { theme: ColorTheme }> {\n  private sub: Subscription | null = null;\n  public constructor(props: any) {\n    super(props);\n    this.state = {\n      theme: darkTheme,\n    };\n  }\n\n  public componentDidMount() {\n    this.sub = theme$.subscribe((theme) => {\n      this.setState({ theme });\n    });\n  }\n\n  public componentWillUnmount() {\n    if (this.sub) this.sub.unsubscribe();\n  }\n\n  render() {\n    return (\n      <ThemeProvider theme={this.state.theme}>\n        <>\n          <GlobalStyles />\n          <MainPage controller={new MainPageController()} />\n        </>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {});\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {});\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}