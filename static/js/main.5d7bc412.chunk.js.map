{"version":3,"sources":["images/src sync nonrecursive /.png","images/src/Ancient Oven.png","images/src/Chio.png","images/src/Epona.png","images/src/Hunnie.png","images/src/Karson.png","images/src/Kass.png","images/src/Link.png","images/src/Magda.png","images/src/Master Kohga.png","images/src/Mipha.png","images/src/Oaki.png","images/src/Patrica.png","images/src/Pelison.png","images/src/Prince Sidon.png","images/src/Revali.png","images/src/Riju.png","images/src/Robbie.png","images/src/Roscoe.png","images/src/Royal White Horse.png","images/src/Teebo.png","images/src/Urbosa.png","utils/relationshipMap.ts","model/gameState.ts","model/logging/episodelog.ts","components/episode/episodeFactory.ts","model/color.ts","utils/ai/classifyRelationship.ts","utils/likeMap.ts","subjects/selectedPlayer$.tsx","components/playerPortrait/subtitle.tsx","model/portraitDisplayMode.ts","utils/utilities.ts","components/playerPortrait/selectedPortrait.ts","subjects/filter.ts","images/tribe.ts","images/RelationshipMapper.ts","components/playerPortrait/houseguestPortraitController.ts","components/playerPortrait/houseguestPortrait.tsx","components/layout/box.tsx","components/playerPortrait/houseguestToPortrait.tsx","components/tooltip/tooltip.tsx","components/playerPortrait/portraits.tsx","components/memoryWall/selectedTribe.ts","components/memoryWall/tribeContainer.tsx","components/memoryWall/memoryWall.tsx","components/layout/text.ts","components/memoryWallScreen/memoryWallScreen.tsx","subjects/subjects.tsx","components/viewsBar/viewBarTag.tsx","components/viewsBar/viewBar.tsx","components/episode/bigBrotherEpisode.tsx","components/episode/bigBrotherFinale.tsx","components/layout/centered.tsx","components/mainPage/fullscreenButton.tsx","components/episode/scenes/votingTable.tsx","components/episode/gameOver.tsx","model/season.ts","components/sidebar/sidebarController.ts","components/sidebar/sidebar.tsx","images/MetaRelationshipMapper.ts","images/initialProfiles.ts","components/topbar/topBar.tsx","components/mainPage/mainContentArea.tsx","components/sidebar/groupButtons.tsx","components/sidebar/rightSidebar.tsx","components/mainPage/mainPage.tsx","components/mainPage/mainPageController.ts","theme/theme.ts","theme/globalTheme.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","newDiscreteRelationshipMap","size","exclude","result","i","undefined","nonEvictedHouseguests","gameState","houseguests","filter","hg","isEvicted","MutableGameState","this","log","phase","constructor","init","houseguestCache","remainingPlayers","previousHOH","copy","_","cloneDeep","assign","EpisodeLog","nominationsPreVeto","vetoWinner","winner","runnerUp","nominationsPostVeto","evicted","votes","votesInMajority","outOf","soleVoter","EpisodeFactory","nextEpisode","episodeType","newState","length","componentToHex","c","hex","Math","round","toString","Rgb","toHex","r","g","b","toRgba","RelationshipType","RelationshipTypeToSymbol","NEUTRAL","FRIEND","ENEMY","PAWN","QUEEN","HUNTER","TARGET","DUPE","DECEIVER","RelationshipTypeToPopularity","ClassifyDiscreteRelationship","true","Friend","false","Dupe","Pawn","Deceiver","Enemy","Hunter","Queen","Target","Neutral","f","a","classifyRelationship","heroPopularity","villainPopularity","heroRelationship","villainRelationship","benefitsHero","benefitsVillain","sizeOf","l","like","disabled","setLikes","hero","villain","likedBy","dislikedBy","forEach","emptySet","Map","selectedPlayer$","BehaviorSubject","getOnlySelectedPlayerOrNull","x","s","getSelectedPlayers","entries","enableMultiSelection$","value","compWins","houseguest","hohWins","povWins","nominations","friendOrEnemyTitle","state","titles","relationships","push","popularity","friendEnemyCountTitle","count","friends","enemies","friendCountText","Relationship","enemyCountText","popularityMinColor","popularityMaxColor","popularityMode","minColor","maxColor","backgroundColor","extremePopularity","xSquared","extremeValues","min","max","percent","interpolateColor","generateSubtitle","detailed","key","subtitle","style","lineHeight","addCompsLine","discreteTitle","countTitle","data","concat","txt","addCountTitle","selectPlayer","player","get","delete","next","set","selectWithMultiSelection","selectWithoutMultiSelection","nullFilter","isPlayerDisabled","isLikeInGroup","compose","tribe","selected","p","tribeId","t","name","color","tribeToFilter","nullTribe","hasSameTribe","tribeIds","has","calculatePopularity","n","RelationshipMapper","nonEvictedIDs","cache","tribeIDs","Set","toUpperCase","getById","reset","dropYourBuffs","evict","unevict","getRelationship","h","v","myTribeId","flag","toDelete","indexOf","disableLikes","houseSize","splice","enableLikes","addToLikeMap","deleteFromLikeMap","setRelationship","newR","likeKey","dislikeKey","hToV","skeleton","members","memberSet","toLowerCase","priority","newTribeId","includes","add","dislike","neutral","alliance","j","selectedColor","HouseguestPortraitController","view","subs","props","displayMode","displayMode$","isNullOrUndefined","unsubscribe","sub","subscribe","refreshData","selectedTribe$","getValue","selectedTribe","setState","updateLikeCounts","selectedPlayers","relationshipType","getPopularity","defaultState","goToDefaultState","tribeFilter","Subtitle","styled","small","MemoryWallPortrait","div","theme","portraitBorder","Evicted","Jury","Normal","img","Grayscale","Sepia","HouseguestPortrait","React","Component","super","controller","componentDidMount","componentWillUnmount","onClick","superiors","render","Img","imageClass","getImageClass","Portrait","src","imageURL","ShadowBox","overlay","StyledBox","bodyArea","DividerBox","className","children","Box","houseguestToPortrait","Text","Tooltip","visible","position","isOpen","content","text","onMouseEnter","onMouseLeave","Portraits","rows","memoryWallPortrait","tooltip","centered","selectTribe","newSelectedPlayers","TribeContainer","getHoverable","normal","hilite","bg","charAt","substring","parseInt","col","pow","textColor","select","Hoverable","tribeName","hgs","textAlign","padding","bind","margin","maxWidth","MemoryWall","houseguestsByTribe","groupBy","priorityMap","hg0","tribes","sort","HasText","input","MemoryWallScreen","cast","players$","mainContentStream$","episodes$","switchEpisode$","Subject","switchSceneRelative","players$Next","tribeValidated","validatedPlayers","isFullscreen$","theme$","BigBrotherVanilla","canPlayWith","eliminates","arrowsEnabled","hasViewsbar","BigBrotherFinale","NoMargin","Center","Centered","noMargin","CenteredBold","EndgameTableCell","td","tableCellBorder","table","grayCell","lightGrayCell","evictedCell","winnerCell","runnerUpCell","nomineeCell","hohCell","tr","GameOver","Season","factory","renderEpisode","type","whichEpisodeType","players","SidebarController","subscriptions","season","scenes","selectedEpisode","delta","selectedScene","renderedScenes","targetScene","lastEpisode","episodes","switchToScene","currentGameState","newPlayerCount","nextEpisodeType","episode","onNewEpisode","getSelectedEpisode","scene","index","_handleKeyDown","event","keyCode","destroy","Sidebar","document","addEventListener","handleKeyDown","minWidth","display","getEpisodes","getHighlight","title","episodeKey","breakKey","MetaRelationshipMapper","timeline","episodeStartMarkers","at","time","pushToTimeline","newMap","endEpisode","tribeSwap","tribeSkeleton","master","revali","teebo","kass","chio","roscoe","riju","magda","oven","patrica","patricia","oaki","mipha","sidon","epona","robbie","urbosa","hunnie","pelison","horse","initialProfiles","context","profiles","evictedHouseguests","jurors","item","replace","setupProfiles","importAll","require","Topbar","handleEpisodeChange","handleTimeChange","metaRmapper","rMapper","componentDidUpdate","prevProps","prevState","metaMapper","offset","marginTop","primary","Slider","marks","step","defaultValue","onChange","valueLabelDisplay","aria-labelledby","secondary","MainContentAreaWrapper","MainContentArea","contentStream","window","scrollTo","GroupButtons","groupSelectOn","cancel","hook","isGroupSelectOn","RightSidebar","useState","width","height","MainPage","fullscreen","inject","hideOnFullscreen","wrapperStyle","overflow","overflowX","MainPageController","page","darkTheme","toggleBorder","gradient","link","mark","GlobalStyles","createGlobalStyle","muiTheme","createMuiTheme","palette","main","App","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5d7bc412.chunk.js","sourcesContent":["var map = {\n\t\"./Ancient Oven.png\": 66,\n\t\"./Chio.png\": 67,\n\t\"./Epona.png\": 68,\n\t\"./Hunnie.png\": 69,\n\t\"./Karson.png\": 70,\n\t\"./Kass.png\": 71,\n\t\"./Link.png\": 72,\n\t\"./Magda.png\": 73,\n\t\"./Master Kohga.png\": 74,\n\t\"./Mipha.png\": 75,\n\t\"./Oaki.png\": 76,\n\t\"./Patrica.png\": 77,\n\t\"./Pelison.png\": 78,\n\t\"./Prince Sidon.png\": 79,\n\t\"./Revali.png\": 80,\n\t\"./Riju.png\": 81,\n\t\"./Robbie.png\": 82,\n\t\"./Roscoe.png\": 83,\n\t\"./Royal White Horse.png\": 84,\n\t\"./Teebo.png\": 85,\n\t\"./Urbosa.png\": 86\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 65;","module.exports = __webpack_public_path__ + \"static/media/Ancient Oven.9b5ea610.png\";","module.exports = __webpack_public_path__ + \"static/media/Chio.419ba638.png\";","module.exports = __webpack_public_path__ + \"static/media/Epona.2c4852e7.png\";","module.exports = __webpack_public_path__ + \"static/media/Hunnie.52325a37.png\";","module.exports = __webpack_public_path__ + \"static/media/Karson.9bee880b.png\";","module.exports = __webpack_public_path__ + \"static/media/Kass.8c4ea517.png\";","module.exports = __webpack_public_path__ + \"static/media/Link.81cb17e7.png\";","module.exports = __webpack_public_path__ + \"static/media/Magda.c9e00cae.png\";","module.exports = __webpack_public_path__ + \"static/media/Master Kohga.aae595a2.png\";","module.exports = __webpack_public_path__ + \"static/media/Mipha.0fea8605.png\";","module.exports = __webpack_public_path__ + \"static/media/Oaki.109a49c1.png\";","module.exports = __webpack_public_path__ + \"static/media/Patrica.b9bb217b.png\";","module.exports = __webpack_public_path__ + \"static/media/Pelison.06f1df8a.png\";","module.exports = __webpack_public_path__ + \"static/media/Prince Sidon.8ebf9bb7.png\";","module.exports = __webpack_public_path__ + \"static/media/Revali.a9ce6986.png\";","module.exports = __webpack_public_path__ + \"static/media/Riju.5134f7dc.png\";","module.exports = __webpack_public_path__ + \"static/media/Robbie.d7d32848.png\";","module.exports = __webpack_public_path__ + \"static/media/Roscoe.15e69926.png\";","module.exports = __webpack_public_path__ + \"static/media/Royal White Horse.16a8a2db.png\";","module.exports = __webpack_public_path__ + \"static/media/Teebo.1515720c.png\";","module.exports = __webpack_public_path__ + \"static/media/Urbosa.48bc2a26.png\";","export interface RelationshipMap {\n  [id: number]: number;\n}\n\nexport interface DiscreteRelationshipMap {\n  [id: number]: boolean | undefined;\n}\n\nexport function newRelationshipMap(\n  size: number,\n  exclude: number\n): RelationshipMap {\n  const result: RelationshipMap = {};\n  for (let i = 0; i < size; i++) {\n    if (i !== exclude) result[i] = 0;\n  }\n  return result;\n}\n\nexport function newDiscreteRelationshipMap(\n  size: number,\n  exclude: number\n): DiscreteRelationshipMap {\n  const result: DiscreteRelationshipMap = {};\n  for (let i = 0; i < size; i++) {\n    if (i !== exclude) result[i] = undefined;\n  }\n  return result;\n}\n","import { Houseguest } from \"./houseguest\";\nimport { PlayerProfile } from \"./playerProfile\";\nimport _ from \"lodash\";\nimport { newRelationshipMap, rng } from \"../utils\";\nimport { finalJurySize, getFinalists } from \"./season\";\nimport { EpisodeLog } from \"./logging/episodelog\";\n\nexport function getById(gameState: GameState, id: number): Houseguest {\n  return gameState.houseguestCache[id];\n}\n\nexport function exclude(inclusions: Houseguest[], exclusions: Houseguest[]) {\n  const excludedIds = exclusions.map((hg) => hg.id);\n  return inclusions.filter(\n    (hg) => !excludedIds.includes(hg.id) && !hg.isEvicted\n  );\n}\n\nexport function randomPlayer(\n  inclusions: Houseguest[],\n  exclusions: Houseguest[] = []\n): Houseguest {\n  if (inclusions.length === 0) {\n    throw new Error(\"Tried to get a random player from a list of 0 players.\");\n  }\n  const options = exclude(inclusions, exclusions);\n  const choice = rng().randomInt(0, options.length - 1);\n\n  return options[choice];\n}\n\nexport function nonEvictedHouseguests(gameState: GameState) {\n  return gameState.houseguests.filter((hg) => !hg.isEvicted);\n}\nexport function getJurors(gameState: GameState): Houseguest[] {\n  return gameState.houseguests.filter((hg) => hg.isJury);\n}\n\nexport function inJury(gameState: GameState): Boolean {\n  return gameState.remainingPlayers - getFinalists() <= finalJurySize();\n}\n\nexport class GameState {\n  // Current state of the game after a phase.\n\n  readonly houseguestCache: { [id: number]: Houseguest } = {};\n  readonly houseguests: Houseguest[] = [];\n  readonly remainingPlayers: number = 0;\n  readonly phase: number = 0;\n  readonly previousHOH?: Houseguest;\n  readonly log: EpisodeLog[] = [];\n  get currentLog() {\n    return this.log[this.phase];\n  }\n\n  public constructor(init: PlayerProfile[] | GameState) {\n    if (!(init instanceof Array)) {\n      Object.assign(this, init);\n    } else {\n      const profiles = init as PlayerProfile[];\n      this.remainingPlayers = profiles.length;\n      profiles.forEach((profile, i) => {\n        const hg: Houseguest = new Houseguest({\n          ...profile,\n          id: i,\n          relationships: newRelationshipMap(profiles.length, i),\n        });\n        this.houseguestCache[i] = hg;\n        this.houseguests.push(hg);\n      });\n    }\n  }\n}\n\nexport class MutableGameState {\n  public houseguests: Houseguest[] = [];\n  public houseguestCache: { [id: number]: Houseguest } = {};\n  public remainingPlayers: number = 0;\n  public phase: number = 0;\n  public previousHOH?: Houseguest;\n  public log: EpisodeLog[] = [];\n  get currentLog() {\n    return this.log[this.phase];\n  }\n\n  public constructor(init: GameState | MutableGameState) {\n    const copy = _.cloneDeep(init);\n    Object.assign(this, copy);\n  }\n}\n","import { VoteType } from \"./voteType\";\n\nexport class EpisodeLog {\n    public nominationsPreVeto: string[] = [];\n    public vetoWinner?: string;\n    public winner?: number;\n    public runnerUp?: number;\n    public nominationsPostVeto: string[] = [];\n    public evicted: number = -1;\n    public votes: { [id: string]: VoteType } = {};\n    public votesInMajority: number = -1;\n    public outOf: number = -1;\n    public soleVoter?: string;\n}\n","import {\n  GameState,\n  MutableGameState,\n  nonEvictedHouseguests,\n} from \"../../model/gameState\";\nimport { Episode } from \"../../model\";\nimport { EpisodeType } from \"./episodes\";\nimport { EpisodeLog } from \"../../model/logging/episodelog\";\n\nexport class EpisodeFactory {\n  public nextEpisode(gameState: GameState, episodeType: EpisodeType): Episode {\n    let newState = new MutableGameState(gameState);\n    newState.phase++;\n    if (nonEvictedHouseguests(gameState).length > 2) {\n      newState.log[newState.phase] = new EpisodeLog();\n    }\n    throw new Error(\"You can't call this function.\");\n  }\n}\n","function componentToHex(c: any) {\n  var hex = Math.round(c).toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nexport class Rgb {\n  public r: number;\n  public g: number;\n  public b: number;\n  public toHex() {\n    return (\n      \"#\" +\n      componentToHex(this.r) +\n      componentToHex(this.g) +\n      componentToHex(this.b)\n    );\n  }\n  public toRgba(): string {\n    return `rgba(${this.r}, ${this.g}, ${this.b}, 1)`;\n  }\n  constructor(r: number, g: number, b: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n  }\n}\n// function hexToRgb(hex: string) {\n//   var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n//   return result\n//     ? {\n//         r: parseInt(result[1], 16),\n//         g: parseInt(result[2], 16),\n//         b: parseInt(result[3], 16),\n//       }\n//     : null;\n// }\n\nexport function textColor(bg: string) {\n  var color = bg.charAt(0) === \"#\" ? bg.substring(1, 7) : bg;\n  var r = parseInt(color.substring(0, 2), 16); // hexToR\n  var g = parseInt(color.substring(2, 4), 16); // hexToG\n  var b = parseInt(color.substring(4, 6), 16); // hexToB\n  var uicolors = [r / 255, g / 255, b / 255];\n  var c = uicolors.map((col) => {\n    if (col <= 0.03928) {\n      return col / 12.92;\n    }\n    return Math.pow((col + 0.055) / 1.055, 2.4);\n  });\n  var L = 0.2126 * c[0] + 0.7152 * c[1] + 0.0722 * c[2];\n  return L > 0.179 ? \"#000000\" : \"#ffffff\";\n}\n\nexport function interpolateColor(min: Rgb, max: Rgb, percent: number): string {\n  return new Rgb(\n    min.r + percent * (max.r - min.r),\n    min.g + percent * (max.g - min.g),\n    min.b + percent * (max.b - min.b)\n  ).toHex();\n}\n","export enum RelationshipType {\n  Neutral = \"NEUTRAL\",\n  Friend = \"FRIEND\",\n  Enemy = \"ENEMY\",\n  Pawn = \"PAWN\",\n  Queen = \"QUEEN\",\n  Hunter = \"HUNTER\",\n  Target = \"TARGET\",\n  Dupe = \"DUPE\",\n  Deceiver = \"DECEIVER\",\n}\n\nexport const RelationshipTypeToSymbol = {\n  NEUTRAL: \"-\",\n  FRIEND: \"\",\n  ENEMY: \"\",\n  PAWN: \"THEY  ME\",\n  QUEEN: \"I  THEM\",\n  HUNTER: \"THEY  ME\",\n  TARGET: \"I  THEM\",\n  DUPE: \"I  THEM THEY  ME\",\n  DECEIVER: \"I  THEM THEY  ME\",\n};\n\nexport const RelationshipTypeToPopularity = {\n  NEUTRAL: 0,\n  FRIEND: 1,\n  ENEMY: -1,\n  PAWN: 0.66,\n  QUEEN: 0.33,\n  HUNTER: -0.66,\n  TARGET: -0.33,\n  DUPE: 0.25,\n  DECEIVER: -0.25,\n};\n\nexport const ClassifyDiscreteRelationship: {\n  [id: string]: { [id: string]: RelationshipType };\n} = {\n  true: {\n    true: RelationshipType.Friend,\n    false: RelationshipType.Dupe,\n    undefined: RelationshipType.Pawn,\n  },\n  false: {\n    true: RelationshipType.Deceiver,\n    false: RelationshipType.Enemy,\n    undefined: RelationshipType.Hunter,\n  },\n  undefined: {\n    true: RelationshipType.Queen,\n    false: RelationshipType.Target,\n    undefined: RelationshipType.Neutral,\n  },\n};\n\nfunction f(a: boolean | undefined): \"true\" | \"false\" | \"undefined\" {\n  if (a === true) return \"true\";\n  else if (a === false) return \"false\";\n  else return \"undefined\";\n}\n\nexport function classifyRelationship(\n  heroPopularity: number,\n  villainPopularity: number,\n  heroRelationship: number | boolean | undefined,\n  villainRelationship: number | boolean | undefined\n): RelationshipType {\n  if (\n    typeof heroRelationship !== \"number\" &&\n    typeof villainRelationship !== \"number\"\n  ) {\n    return ClassifyDiscreteRelationship[f(heroRelationship)][\n      f(villainRelationship)\n    ];\n  }\n\n  const benefitsHero = heroRelationship! > heroPopularity;\n  const benefitsVillain = heroRelationship! > villainPopularity;\n  if (benefitsHero && benefitsVillain) {\n    return RelationshipType.Friend;\n  } else if (benefitsHero && !benefitsVillain) {\n    return RelationshipType.Pawn;\n  } else if (!benefitsHero && benefitsVillain) {\n    return RelationshipType.Queen;\n  }\n  return RelationshipType.Enemy;\n}\n","import { RelationshipHouseguest } from \"../images/RelationshipMapper\";\nimport _ from \"lodash\";\n\nexport interface Like {\n  tribeIds: Set<string>;\n  id: number;\n  disabled: boolean;\n}\n\nexport interface Likemap {\n  [id: number]: Like;\n}\n\nexport function sizeOf(l: Likemap) {\n  return Object.keys(_.filter(l, (like) => !like.disabled)).length;\n}\n\nexport function disableLikes(\n  hero: RelationshipHouseguest,\n  villain: RelationshipHouseguest\n) {\n  setLikes(hero, villain, true);\n}\n\nexport function enableLikes(\n  hero: RelationshipHouseguest,\n  villain: RelationshipHouseguest\n) {\n  setLikes(hero, villain, false);\n}\n\nfunction ignoreProblems(fcns: (() => void)[]) {\n  fcns.forEach((f: () => void) => {\n    try {\n      f();\n    } catch {}\n  });\n}\n\nfunction setLikes(\n  hero: RelationshipHouseguest,\n  villain: RelationshipHouseguest,\n  b: boolean\n) {\n  ignoreProblems([\n    () => (hero.likedBy[villain.id].disabled = b),\n    () => (hero.dislikedBy[villain.id].disabled = b),\n    () => (villain.likedBy[hero.id].disabled = b),\n    () => (villain.dislikedBy[hero.id].disabled = b),\n  ]);\n}\n","import { BehaviorSubject } from \"rxjs\";\nimport { SelectedPlayerData } from \"../components/playerPortrait/selectedPortrait\";\n// The player that the user has clicked on.\n\nexport type PlayerSet = Map<number, SelectedPlayerData>;\n\nexport function emptySet() {\n  return new Map<number, SelectedPlayerData>();\n}\n\nexport const selectedPlayer$ = new BehaviorSubject<PlayerSet>(emptySet());\n\nexport function getOnlySelectedPlayerOrNull(\n  x?: PlayerSet\n): SelectedPlayerData | null {\n  const s = x || getSelectedPlayers();\n  if (s.size !== 1) return null;\n  for (let entry of s.entries()) {\n    return entry[1];\n  }\n  return null; // unreachable code but the compiler can't understand that\n}\n\nexport const enableMultiSelection$ = new BehaviorSubject<boolean>(false);\n\nexport function toggleMultiSelection() {\n  enableMultiSelection$.next(!enableMultiSelection$.value);\n}\n\nexport function multiSelection(): boolean {\n  return enableMultiSelection$.value;\n}\n\nexport function getSelectedPlayers(): PlayerSet {\n  return selectedPlayer$.value;\n}\n","import React from \"react\";\nimport { ProfileHouseguest, PortraitProps, PortraitState } from \"../memoryWall\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport {\n  RelationshipTypeToSymbol,\n  RelationshipType as Relationship,\n  classifyRelationship,\n} from \"../../utils/ai/classifyRelationship\";\nimport { sizeOf } from \"../../utils/likeMap\";\nimport { getOnlySelectedPlayerOrNull } from \"../../subjects/selectedPlayer$\";\n\nfunction emptySubtitle(): JSX.Element[] {\n  return [<br key={1} />, <br key={2} />];\n}\n\nexport function generatePopularitySubtitle(\n  hero: PortraitProps,\n  state: PortraitState,\n  detailed: boolean = false\n): any[] {\n  if (state.disabled) return emptySubtitle();\n  let key = 0;\n  let subtitle: any[] = [];\n  // popularity\n  // competition wins\n  key = addCompsLine(hero, subtitle, key);\n  // friendship count / relationship classification titles\n  ({ subtitle, key } = addCountTitle(\n    hero,\n    state,\n    subtitle,\n    key,\n    friendOrEnemyTitle,\n    friendEnemyCountTitle\n  ));\n  return subtitle;\n}\n\nfunction addCountTitle(\n  hero: PortraitProps,\n  state: PortraitState,\n  subtitle: any[],\n  key: number,\n  discreteTitle: (\n    a: PortraitProps,\n    c: PortraitState,\n    b: SelectedPlayerData\n  ) => string[],\n  countTitle: (a: PortraitState) => string[]\n) {\n  if (!hero.isEvicted) {\n    const data = getOnlySelectedPlayerOrNull(); // it is correct that only one player selected causes discrete titles\n    let titles;\n    if (data && data.id !== hero.id) {\n      titles = discreteTitle(hero, state, data);\n    } else {\n      titles = countTitle(state);\n    }\n    subtitle = subtitle.concat(\n      titles.map((txt) => <div key={key++}>{txt}</div>)\n    );\n  } else {\n    subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  }\n  return { subtitle, key };\n}\n\nfunction addCompsLine(hero: PortraitProps, subtitle: any[], key: number) {\n  if (compWins(hero)) {\n    subtitle.push(<div key={key++}>{`${compWins(hero)}`}</div>);\n  } else {\n    subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n  }\n  return key;\n}\n\nfunction compWins(houseguest: ProfileHouseguest): string {\n  return `${houseguest.hohWins ? ` ${houseguest.hohWins}` : \"\"}${\n    houseguest.povWins && houseguest.hohWins\n      ? `| ${houseguest.povWins}`\n      : houseguest.povWins\n      ? ` ${houseguest.povWins}`\n      : \"\"\n  }${\n    (houseguest.hohWins || houseguest.povWins) && houseguest.nominations\n      ? \"|\"\n      : \"\"\n  }${houseguest.nominations ? ` ${houseguest.nominations}` : \"\"}`;\n}\n\nfunction friendOrEnemyTitle(\n  hero: PortraitProps,\n  state: PortraitState,\n  villain: SelectedPlayerData\n): string[] {\n  const titles: string[] = [];\n  const heroRelationship: boolean | number | undefined = hero.relationships![\n    villain.id\n  ];\n  const villainRelationship: boolean | number | undefined =\n    villain.relationships[hero.id!];\n  titles.push(\n    RelationshipTypeToSymbol[\n      classifyRelationship(\n        state.popularity || 0,\n        0, // was  villain.popularity. but does not matter\n        heroRelationship,\n        villainRelationship\n      )\n    ]\n  );\n  return titles;\n}\n\nfunction friendEnemyCountTitle(hero: PortraitState): string[] {\n  const titles: string[] = [];\n  const count = {\n    friends: sizeOf(hero.likedBy),\n    enemies: sizeOf(hero.dislikedBy),\n  };\n  const friendCountText =\n    count.friends > 0\n      ? `${count.friends} ${RelationshipTypeToSymbol[Relationship.Friend]}`\n      : \"\";\n\n  const enemyCountText =\n    count.enemies > 0\n      ? `${count.enemies} ${RelationshipTypeToSymbol[Relationship.Enemy]}`\n      : \"\";\n\n  titles.push(\n    `${friendCountText}${\n      friendCountText && enemyCountText && \" | \"\n    }${enemyCountText}`\n  );\n  return titles;\n}\n","import { Rgb, interpolateColor } from \"./color\";\nimport { PortraitState, PortraitProps } from \"../components/memoryWall\";\nimport { extremeValues } from \"../utils\";\nimport { generatePopularitySubtitle } from \"../components/playerPortrait/subtitle\";\n\nexport interface PortraitDisplayMode {\n  minColor: Rgb;\n  maxColor: Rgb;\n  backgroundColor: (state: PortraitState) => string;\n  generateSubtitle: (\n    props: PortraitProps,\n    state: PortraitState,\n    detailed?: boolean\n  ) => any[];\n}\n\nconst popularityMinColor = new Rgb(252, 137, 137);\nconst popularityMaxColor = new Rgb(137, 252, 137);\n\nexport const popularityMode: PortraitDisplayMode = {\n  minColor: popularityMinColor,\n  maxColor: popularityMaxColor,\n  backgroundColor: (state: PortraitState) => {\n    const popularity = state.popularity;\n    if (popularity === undefined) {\n      return \"rgb(170, 170, 170)\";\n    }\n\n    const extremePopularity = extremeValues(popularity);\n    const percent = (extremePopularity + 1) / 2;\n    return interpolateColor(popularityMinColor, popularityMaxColor, percent);\n  },\n  generateSubtitle: generatePopularitySubtitle,\n};\n","export function hashcode(string: string): number {\n    let hash = 0,\n        i,\n        chr;\n    if (string.length === 0) return hash;\n    for (i = 0; i < string.length; i++) {\n        chr = string.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0;\n    }\n    return hash;\n}\n\nexport function roundTwoDigits(number: number | undefined) {\n    if (!number) {\n        return 0;\n    }\n    return Math.round(number * 100);\n}\n\nexport function max(a: number, b: number) {\n    return a > b ? a : b;\n}\n\nexport function extremeValues(x: number | undefined): number {\n    if (!x) {\n        return 0;\n    }\n    const xSquared = x * x;\n    if (x >= 0) {\n        return -xSquared + 2 * x;\n    } else {\n        return xSquared + 2 * x;\n    }\n}\n","import { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport {\n  selectedPlayer$,\n  emptySet,\n  getOnlySelectedPlayerOrNull,\n  multiSelection,\n  getSelectedPlayers,\n} from \"../../subjects/selectedPlayer$\";\nimport { Tribe } from \"../../images/tribe\";\n\nexport interface SelectedPlayerData {\n  id: number;\n  // popularity: number;\n  relationships: RelationshipMap | DiscreteRelationshipMap;\n  isEvicted: boolean;\n  superiors?: Set<number>;\n  tribe: Tribe | null;\n}\n\nfunction selectWithMultiSelection(player: SelectedPlayerData) {\n  const map = getSelectedPlayers();\n  if (map.get(player.id)) {\n    map.delete(player.id);\n    selectedPlayer$.next(map);\n  } else {\n    selectedPlayer$.next(map.set(player.id, player));\n  }\n}\n\nfunction selectWithoutMultiSelection(player: SelectedPlayerData) {\n  const data = getOnlySelectedPlayerOrNull();\n  if (data && data.id === player.id) {\n    selectedPlayer$.next(emptySet());\n  } else {\n    selectedPlayer$.next(\n      new Map<number, SelectedPlayerData>().set(player.id, player)\n    );\n  }\n}\n\nexport function selectPlayer(player: SelectedPlayerData | null) {\n  if (!player) {\n    selectedPlayer$.next(emptySet());\n    return;\n  }\n  multiSelection()\n    ? selectWithMultiSelection(player)\n    : selectWithoutMultiSelection(player);\n}\n","import { PortraitProps } from \"../components/memoryWall\";\nimport { Like } from \"../utils/likeMap\";\n\nexport interface Filter {\n  size: number;\n  isPlayerDisabled: (p: PortraitProps) => boolean;\n  isLikeInGroup: (l: Like) => boolean;\n}\n\nexport const nullFilter: Filter = {\n  size: -1,\n  isPlayerDisabled: (_: any) => false,\n  isLikeInGroup: (_: any) => true,\n};\n\nexport function compose(tribe: Filter, selected: Filter): Filter {\n  const size = tribe.size < 1 ? selected.size : tribe.size - selected.size;\n  return {\n    size,\n    isPlayerDisabled: (p) =>\n      tribe.isPlayerDisabled(p) || selected.isPlayerDisabled(p),\n    isLikeInGroup: (p) => tribe.isLikeInGroup(p) && selected.isLikeInGroup(p),\n  };\n}\n","import { Filter, nullFilter } from \"../subjects/filter\";\nimport { PortraitProps } from \"../components/memoryWall\";\nimport { Like } from \"../utils/likeMap\";\n\nexport interface Tribe {\n  name: string;\n  color: string;\n  size: number;\n  priority?: number;\n}\n\nexport function tribeId(t: Tribe | undefined): string {\n  if (t === undefined) return \"\";\n  return `${t.name}${t.color}`;\n}\n\nexport function tribeToFilter(t: Tribe | undefined): Filter {\n  const tribe = t === undefined ? nullTribe : t;\n  if (t === nullTribe) return nullFilter;\n  return {\n    size: tribe.size,\n    isPlayerDisabled: (p: PortraitProps): boolean => {\n      return tribeId(p.tribe) !== tribeId(tribe);\n    },\n    isLikeInGroup: hasSameTribe(tribeId(tribe)),\n  };\n}\n\nexport const nullTribe: Tribe = { name: \"\", color: \"\", size: 0 };\n\nfunction hasSameTribe(tribeId: string): (l: Like) => boolean {\n  return (l: Like): boolean => {\n    return l.tribeIds.has(tribeId);\n  };\n}\n","import { Tribe, tribeId } from \"./tribe\";\nimport { PlayerProfile } from \"../model\";\nimport { DiscreteRelationshipMap } from \"../utils\";\nimport { Likemap, sizeOf, disableLikes, enableLikes } from \"../utils/likeMap\";\nimport _ from \"lodash\";\n\ntype Map = \"relationships\";\ntype LikeKey = \"likedBy\";\ntype DislikeKey = \"dislikedBy\";\n\nexport function calculatePopularity(\n  hg: { likedBy: Likemap; dislikedBy: Likemap; name?: string },\n  n: number\n): number | undefined {\n  if (n < 1) return undefined;\n\n  const likedBy = sizeOf(hg.likedBy);\n  const dislikedBy = sizeOf(hg.dislikedBy);\n  let result: number | undefined = 0;\n  result = (likedBy - dislikedBy) / n;\n  result > 1 && (result = 1);\n  result < -1 && (result = -1);\n  likedBy === 0 && dislikedBy === 0 && (result = undefined);\n  return result;\n}\n\nexport interface RelationshipHouseguest extends PlayerProfile {\n  id: number;\n  isEvicted?: boolean;\n  disabled?: boolean;\n  tribe?: Tribe;\n  //\n  relationships: DiscreteRelationshipMap;\n  houseSize: number;\n  likedBy: Likemap;\n  dislikedBy: Likemap;\n  //\n  tooltip?: string;\n}\nexport class RelationshipMapper {\n  public houseguests: RelationshipHouseguest[] = [];\n  private cache: {\n    [id: string]: RelationshipHouseguest;\n  } = {};\n  private tribeIDs: Set<string> = new Set<string>();\n  get nonEvictedHouseguests(): number {\n    return this.nonEvictedIDs.length;\n  }\n  nonEvictedIDs: number[] = []; // this must be an ordered type to guarentee encoding/decoding works. don't use a set\n  // note that in the future, this won't matter because unevict() currently breaks this functionality.\n  // so basically it doesn't matter anymore because the new codes won't be limited by nonEvictedIDs.\n\n  public constructor(houseguests: RelationshipHouseguest[]) {\n    this.houseguests = houseguests;\n    if (houseguests.length > 4096) {\n      throw new Error(\"The max number of players is 4096.\");\n    }\n    houseguests.forEach((hg) => {\n      this.cache[hg.name.toUpperCase()] = hg;\n      !hg.isEvicted && this.nonEvictedIDs.push(hg.id);\n    });\n  }\n\n  public getById(id: number): RelationshipHouseguest {\n    if (this.houseguests[id] === undefined) throw Error(\"invalid id\");\n    return this.houseguests[id];\n  }\n\n  public reset() {\n    this.dropYourBuffs();\n    this.houseguests.forEach((hg) => {\n      this.evict(hg.name);\n      this.unevict(hg.name);\n    });\n  }\n\n  private get(hero: string): RelationshipHouseguest {\n    const result = this.cache[hero.toUpperCase()];\n    if (result === undefined) throw new Error(`bad name: ${hero}`);\n    return result;\n  }\n  private getRelationship(h: string, v: string, map: Map) {\n    return this.get(h)[map][this.get(v).id];\n  }\n\n  public dropYourBuffs() {\n    this.tribeIDs = new Set<string>();\n    this.houseguests.forEach((hg) => {\n      hg.tribe = undefined;\n    });\n  }\n\n  public evict(h: string) {\n    const hero = this.get(h);\n    const myTribeId = tribeId(hero.tribe);\n    let flag = true;\n    const toDelete = this.nonEvictedIDs.indexOf(hero.id);\n    if (hero.isEvicted) return;\n    hero.isEvicted = true;\n    this.nonEvictedIDs.forEach((id) => {\n      disableLikes(hero, this.houseguests[id]);\n      this.houseguests[id].houseSize--;\n      const tribe = this.houseguests[id].tribe;\n      if (flag && tribe && tribeId(tribe) === myTribeId) {\n        tribe.size--;\n        flag = false;\n      }\n    });\n    this.nonEvictedIDs.splice(toDelete, 1);\n  }\n\n  public unevict(h: string) {\n    const hero = this.get(h);\n    if (!hero.isEvicted) return;\n    hero.isEvicted = false;\n    this.nonEvictedIDs.push(hero.id);\n    this.nonEvictedIDs.forEach((id) => {\n      const hg = this.houseguests[id];\n      enableLikes(hero, hg);\n      hg.houseSize++;\n      hero.houseSize = hg.houseSize;\n    });\n  }\n\n  private addToLikeMap(l: Likemap, h: RelationshipHouseguest) {\n    l[h.id] = {\n      tribeIds: new Set([tribeId(h.tribe)]),\n      id: h.id,\n      disabled: false,\n    };\n  }\n\n  private deleteFromLikeMap(l: Likemap, h: RelationshipHouseguest) {\n    delete l[h.id];\n  }\n\n  public setRelationship(\n    h: string,\n    v: string,\n    newR: boolean | undefined,\n    likeKey: LikeKey,\n    dislikeKey: DislikeKey,\n    map: Map\n  ) {\n    const hToV = this.getRelationship(h, v, map);\n    const hero = this.get(h);\n    const villain = this.get(v);\n    if (\n      hToV === newR ||\n      ((hero.isEvicted ||\n        hero.disabled ||\n        villain.disabled ||\n        villain.isEvicted) &&\n        newR !== undefined)\n    ) {\n      return;\n    }\n    if (hToV === undefined) {\n      this.addToLikeMap(villain[newR ? likeKey : dislikeKey], hero);\n    } else if (newR === undefined) {\n      this.deleteFromLikeMap(villain[hToV ? likeKey : dislikeKey], hero);\n    } else {\n      this.addToLikeMap(villain[newR ? likeKey : dislikeKey], hero);\n      this.deleteFromLikeMap(villain[newR ? dislikeKey : likeKey], hero);\n    }\n    // actually set it\n    hero[map][villain.id] = newR;\n  }\n\n  // runs in O(m), m number of edges.\n  // if I wanted to make it better, I would have to optimize\n  public tribe(\n    skeleton: { name: string; color: string; priority?: number },\n    members: string[]\n  ) {\n    const memberSet = new Set(members.map((name) => this.get(name).id));\n    const tribe: Tribe = {\n      size: members.filter((hg) => !this.get(hg).isEvicted).length, // only count non-evicted members\n      name: skeleton.name,\n      color: skeleton.color.toLowerCase(),\n      priority: skeleton.priority,\n    };\n    const newTribeId = tribeId(tribe);\n    if (tribe.name.includes(\"#\") || tribe.name.includes(\"=\")) {\n      throw new Error(\"Tribe names cannot contain # or =\");\n    }\n    if (this.tribeIDs.has(newTribeId)) {\n      throw new Error(`Tribe ${newTribeId} declared twice`);\n    }\n    this.tribeIDs.add(newTribeId);\n    this.houseguests.forEach((hg) => {\n      memberSet.has(hg.id) && (hg.tribe = tribe);\n      _.forEach(hg.likedBy, (like) => {\n        memberSet.has(like.id) && like.tribeIds.add(newTribeId);\n      }); // TODO: major fixes needed right here boys\n      _.forEach(hg.dislikedBy, (like) => {\n        memberSet.has(like.id) && like.tribeIds.add(newTribeId);\n      });\n    });\n  }\n  public like(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      true,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public dislike(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      false,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public neutral(hero: string, villain: string) {\n    this.setRelationship(\n      hero,\n      villain,\n      undefined,\n      \"likedBy\",\n      \"dislikedBy\",\n      \"relationships\"\n    );\n  }\n  public friends(hero: string, villain: string) {\n    this.like(hero, villain);\n    this.like(villain, hero);\n  }\n  public alliance(members: string[]) {\n    for (let i = 0; i < members.length; i++) {\n      for (let j = i + 1; j < members.length; j++) {\n        this.friends(members[i], members[j]);\n      }\n    }\n  }\n  public enemies(hero: string, villain: string) {\n    this.dislike(hero, villain);\n    this.dislike(villain, hero);\n  }\n}\n","import {\n  PortraitProps,\n  HouseguestPortrait,\n  PortraitState,\n} from \"../memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport { displayMode$, selectedTribe$ } from \"../../subjects/subjects\";\nimport {\n  selectedPlayer$,\n  getOnlySelectedPlayerOrNull,\n  getSelectedPlayers,\n} from \"../../subjects/selectedPlayer$\";\nimport { Rgb } from \"../../model/color\";\nimport { isNullOrUndefined } from \"util\";\nimport {\n  classifyRelationship,\n  RelationshipTypeToPopularity,\n} from \"../../utils/ai/classifyRelationship\";\nimport { tribeId, Tribe, tribeToFilter } from \"../../images/tribe\";\nimport _ from \"lodash\";\nimport { calculatePopularity } from \"../../images/RelationshipMapper\";\nimport { Filter, compose, nullFilter } from \"../../subjects/filter\";\nimport { Like } from \"../../utils/likeMap\";\n\nconst selectedColor = new Rgb(51, 255, 249);\n\nexport class HouseguestPortraitController {\n  private subs: Subscription[] = [];\n  private view: HouseguestPortrait;\n  constructor(view: HouseguestPortrait) {\n    this.view = view;\n  }\n  get defaultState(): PortraitState {\n    return {\n      popularity: calculatePopularity(\n        this.view.props,\n        this.view.props.houseSize - 1\n      ),\n      displayMode: displayMode$.value,\n      disabled: !!this.view.props.disabled,\n      likedBy: this.view.props.likedBy,\n      dislikedBy: this.view.props.dislikedBy,\n    };\n  }\n  public backgroundColor(\n    props: PortraitProps,\n    state: PortraitState\n  ): undefined | string {\n    const data = getSelectedPlayers();\n    if (state.disabled) return undefined;\n    const id = isNullOrUndefined(props.id) ? -1 : props.id;\n    if (data.get(id)) {\n      return selectedColor.toHex();\n    }\n    return props.isEvicted || state.disabled\n      ? undefined\n      : this.view.state.displayMode.backgroundColor(this.view.state);\n  }\n  public unsubscribe() {\n    this.subs.forEach((sub) => sub.unsubscribe());\n  }\n\n  public subscribe() {\n    const subs: Subscription[] = [];\n    subs.push(\n      selectedPlayer$.subscribe({\n        next: (_: any) => {\n          this.refreshData(selectedTribe$.getValue());\n        },\n      })\n    );\n    subs.push(\n      selectedTribe$.subscribe({\n        next: (selectedTribe: Tribe) => {\n          this.refreshData(selectedTribe);\n        },\n      })\n    );\n    subs.push(\n      displayMode$.subscribe({\n        next: (displayMode) => this.view.setState({ displayMode }),\n      })\n    );\n    this.subs = subs;\n  }\n\n  private updateLikeCounts(filter: Filter) {\n    const props = this.view.props;\n    const disabled = filter.isPlayerDisabled(this.view.props);\n    const newState: any = {\n      disabled,\n    };\n    const f: (l: Like) => boolean = (l) => {\n      return !l.disabled && filter.isLikeInGroup(l);\n    };\n    newState.likedBy = _.filter(props.likedBy, f);\n    newState.dislikedBy = _.filter(props.dislikedBy, f);\n\n    const selectedPlayers = getSelectedPlayers().size;\n    if (getSelectedPlayers().has(props.id || -1)) newState.popularity = 2;\n\n    const data = getOnlySelectedPlayerOrNull()!;\n    if (selectedPlayers === 1 && data.id !== props.id) {\n      newState.popularity = getPopularity(\n        props.relationships![data.id],\n        data.relationships[props.id!]\n      );\n    } else if (selectedPlayers === 0 && filter === nullFilter) {\n      newState.popularity = this.defaultState.popularity;\n    } else {\n      newState.popularity = calculatePopularity({ ...newState }, filter.size);\n    }\n    this.view.setState(newState);\n  }\n\n  private goToDefaultState() {\n    if (this.view.state.disabled) return;\n    if (tribeId(selectedTribe$.value)) {\n      this.updateLikeCounts(tribeToFilter(selectedTribe$.value));\n    } else {\n      this.updateLikeCounts(nullFilter);\n    }\n  }\n\n  private refreshData(selectedTribe: Tribe) {\n    const tribeFilter = tribeToFilter(selectedTribe);\n    const selectedPlayers = getSelectedPlayers();\n    const view = this.view;\n    const props = this.view.props;\n    if (view.state.disabled) return;\n    if (selectedPlayers.size === 0) {\n      // no one is selected\n      this.goToDefaultState();\n    } else if (selectedPlayers.size === 1) {\n      // only one person is selected\n      this.updateLikeCounts(\n        compose(tribeFilter, {\n          size: 0, // size does not matter for 1 selected: popularity is not calculated\n          isPlayerDisabled: (_) => false,\n          isLikeInGroup: (l) => true,\n        })\n      );\n    } else {\n      // multiple people are selected\n      if (!isNullOrUndefined(props.id) && selectedPlayers.get(props.id)) {\n        // multiple people are selected and I am one of them\n        this.updateLikeCounts(\n          compose(tribeFilter, {\n            size: 0, // size doesn't matter for selected players --- their color is set to blue.\n            isPlayerDisabled: (_) => false,\n            isLikeInGroup: (l) => !selectedPlayers.has(l.id),\n          })\n        );\n      } else {\n        // multiple people are selected and I am not one of them\n        this.updateLikeCounts(\n          compose(tribeFilter, {\n            size: selectedPlayers.size,\n            isPlayerDisabled: (_) => false,\n            isLikeInGroup: (l) => selectedPlayers.has(l.id),\n          })\n        );\n      }\n    }\n  }\n}\ntype Rship = number | boolean | undefined;\n\nfunction getPopularity(hero: Rship, villain: Rship): number | undefined {\n  if (isNullOrUndefined(hero) && isNullOrUndefined(villain)) return undefined;\n\n  if (typeof hero === \"number\") {\n    return hero;\n  } else if (typeof villain === \"number\") {\n    return villain;\n  }\n\n  const relationshipType = classifyRelationship(0, 0, hero, villain);\n  return RelationshipTypeToPopularity[relationshipType];\n}\n","import React from \"react\";\nimport { selectPlayer } from \"./selectedPortrait\";\nimport { isNullOrUndefined } from \"util\";\nimport { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport { HouseguestPortraitController } from \"./houseguestPortraitController\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\nimport { Tribe } from \"../../images/tribe\";\nimport { Likemap } from \"../../utils/likeMap\";\n\nconst Subtitle = styled.small`\n  font-weight: 100;\n  font-size: small;\n`;\n\nconst MemoryWallPortrait = styled.div`\n  margin: 5px;\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n  color: black;\n  border-radius: 5px;\n  text-align: center;\n  font-weight: 600;\n  max-width: 7rem;\n  min-width: 7rem;\n  word-wrap: break-word;\n  -webkit-transition-property: none;\n  -moz-transition-property: none;\n  -o-transition-property: none;\n  transition-property: none;\n`;\n\nconst Evicted = styled(MemoryWallPortrait)`\n  font-weight: 100;\n  color: grey;\n  background-color: #111111;\n`;\n\nconst Jury = styled(MemoryWallPortrait)`\n  font-weight: 100;\n  color: #c3ae88;\n  background-color: #5d5340;\n  filter: brightness(0.6);\n`;\n\nconst Normal = styled.img`\n  min-width: 100px;\n  max-width: 110px;\n  height: 110px\n  width: -moz-available; /* For Mozzila */\n  width: -webkit-fill-available; /* For Chrome */\n`;\n\nconst Grayscale = styled(Normal)`\n  filter: grayscale(100%);\n`;\n\nconst Sepia = styled(Normal)`\n  filter: sepia(100%);\n`;\n\nexport interface PortraitProps {\n  imageURL: string;\n  name: string;\n  id?: number;\n  relationships?: RelationshipMap | DiscreteRelationshipMap;\n  isEvicted?: boolean;\n  disabled?: boolean;\n  deltaPopularity?: number;\n  detailed?: boolean;\n  superiors?: Set<number>;\n  //\n  likedBy: Likemap;\n  dislikedBy: Likemap;\n  houseSize: number;\n  tribe?: Tribe;\n}\n\nexport interface PortraitState {\n  popularity?: number;\n  displayMode: PortraitDisplayMode;\n  disabled: boolean;\n  likedBy: Likemap;\n  dislikedBy: Likemap;\n}\nexport class HouseguestPortrait extends React.Component<\n  PortraitProps,\n  PortraitState\n> {\n  private controller: HouseguestPortraitController;\n\n  public constructor(props: PortraitProps) {\n    super(props);\n    this.controller = new HouseguestPortraitController(this);\n    this.state = this.controller.defaultState;\n  }\n\n  public componentDidMount() {\n    if (isNullOrUndefined(this.props.id)) {\n      return;\n    }\n    this.controller.subscribe();\n  }\n\n  public componentWillUnmount() {\n    this.controller.unsubscribe();\n  }\n\n  private onClick(): void {\n    if (\n      isNullOrUndefined(this.props.id) ||\n      !this.props.relationships ||\n      this.state.disabled ||\n      this.props.isEvicted\n    ) {\n      return;\n    }\n    const data = {\n      id: this.props.id,\n      relationships: this.props.relationships,\n      isEvicted: !!this.props.isEvicted,\n      popularity: this.state.popularity || 0,\n      superiors: this.props.superiors,\n      tribe: this.props.tribe || null,\n    };\n    selectPlayer(data);\n  }\n\n  public render() {\n    const props = this.props;\n    const state = this.state;\n    const Img = getImageClass(props, state);\n    let subtitle: any[] = [];\n    subtitle = this.state.displayMode.generateSubtitle(\n      props,\n      state,\n      !!props.detailed\n    );\n\n    let Portrait = MemoryWallPortrait;\n    if (state.disabled) {\n      Portrait = Jury;\n    } else if (props.isEvicted) {\n      Portrait = Evicted;\n    }\n    return (\n      <Portrait\n        onClick={() => this.onClick()}\n        style={{\n          backgroundColor: this.controller.backgroundColor(props, this.state),\n        }}\n      >\n        <Img src={props.imageURL} />\n        <br />\n        {props.name}\n        <br />\n        <Subtitle>{subtitle}</Subtitle>\n      </Portrait>\n    );\n  }\n}\n\nfunction getImageClass(props: PortraitProps, state: PortraitState) {\n  let imageClass = props.isEvicted ? Grayscale : Normal;\n  imageClass = state.disabled ? Sepia : imageClass;\n  return imageClass;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ShadowBox = styled.div`\n  box-shadow: ${({ theme }: { theme: ColorTheme }) =>\n    theme.name === \"light\"\n      ? \"0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1)\"\n      : \"\"};\n  border-radius: 6px;\n  margin-left: 3px;\n  margin-right: 3px;\n  margin-bottom: 5px;\n  padding-bottom: 10px;\n  padding-top: 1px;\n  background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nconst StyledBox = styled.div`\n  margin-left: 3px;\n  margin-right: 3px;\n  margin-bottom: 3px;\n  background: ${({ theme }: { theme: ColorTheme }) => theme.bodyArea};\n`;\n\nexport function DividerBox(props: any): JSX.Element {\n  return (\n    <ShadowBox className={props.className || \"\"} style={props.style || {}}>\n      {props.children}\n    </ShadowBox>\n  );\n}\n\nexport function Box(props: any): JSX.Element {\n  return (\n    <StyledBox style={props.style} className={`box ${props.className || \"\"}`}>\n      {props.children}\n    </StyledBox>\n  );\n}\n","import { ProfileHouseguest, HouseguestPortrait } from \"../memoryWall\";\nimport React from \"react\";\n\nexport function houseguestToPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={false} />;\n}\n\nexport function memoryWallPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={true} />;\n}\n","import React from \"react\";\nimport Popover from \"react-tiny-popover\";\nimport styled from \"styled-components\";\n\nconst Text = styled.p`\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n`;\n\ninterface TooltipProps {\n    text: string;\n    children: any;\n}\n\ninterface ToolTipState {\n    visible: boolean;\n}\n\nexport class Tooltip extends React.Component<TooltipProps, ToolTipState> {\n    constructor(props: TooltipProps) {\n        super(props);\n        this.state = { visible: false };\n    }\n\n    public render() {\n        return (\n            <Popover\n                position={[\"top\", \"bottom\"]}\n                isOpen={this.state.visible}\n                content={<Text>{this.props.text}</Text>}\n            >\n                <div\n                    onMouseEnter={() => this.setState({ visible: true })}\n                    onMouseLeave={() => this.setState({ visible: false })}\n                >\n                    {this.props.children}\n                </div>\n            </Popover>\n        );\n    }\n}\n","import React from \"react\";\nimport { ProfileHouseguest } from \"../memoryWall\";\nimport { houseguestToPortrait, memoryWallPortrait } from \"./houseguestToPortrait\";\nimport { Tooltip } from \"../tooltip/tooltip\";\n\nlet key = -1;\n\nfunction PortraitWrapper(props: { centered?: boolean; children: any }): JSX.Element {\n    return (\n        <div\n            key={key++}\n            className={`columns is-gapless is-mobile is-multiline ${props.centered ? \"is-centered\" : \"\"}`}\n        >\n            {props.children}\n        </div>\n    );\n}\n\nexport function Portrait(props: { houseguest: ProfileHouseguest; centered?: boolean }): JSX.Element {\n    const result = (\n        <PortraitWrapper centered={props.centered}>{houseguestToPortrait(props.houseguest)}</PortraitWrapper>\n    );\n    if (props.houseguest.tooltip) {\n        return (\n            <PortraitWrapper centered={props.centered}>\n                <Tooltip text={props.houseguest.tooltip}>{houseguestToPortrait(props.houseguest)}</Tooltip>\n            </PortraitWrapper>\n        );\n    }\n    return result;\n}\n\nexport function Portraits(props: {\n    houseguests: ProfileHouseguest[];\n    centered?: boolean;\n    detailed?: boolean;\n}): JSX.Element {\n    const rows: JSX.Element[] = [];\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    props.houseguests.forEach((houseguest: ProfileHouseguest) => {\n        let result;\n        if (props.detailed) {\n            result = memoryWallPortrait(houseguest, key++);\n        } else {\n            result = houseguestToPortrait(houseguest, key++);\n        }\n        if (houseguest.tooltip) {\n            result = <Tooltip text={houseguest.tooltip}>{result}</Tooltip>;\n        }\n        rows.push(result);\n    });\n    return (\n        <div className={`columns is-gapless is-mobile is-multiline ${props.centered && \"is-centered\"}`}>\n            {rows}\n        </div>\n    );\n}\n","import { Tribe, tribeId, nullTribe } from \"../../images/tribe\";\nimport { selectedTribe$ } from \"../../subjects/subjects\";\nimport {\n  getSelectedPlayers,\n  emptySet,\n  selectedPlayer$,\n} from \"../../subjects/selectedPlayer$\";\n\nexport function selectTribe(t: Tribe) {\n  if (tribeId(t) === tribeId(selectedTribe$.value)) {\n    selectedTribe$.next(nullTribe);\n  } else {\n    selectedTribe$.next(t);\n    const selectedPlayers = getSelectedPlayers();\n    const newSelectedPlayers = emptySet();\n    selectedPlayers.forEach((player) => {\n      const tribe = player.tribe || nullTribe;\n      if (tribeId(tribe) === tribeId(t)) {\n        newSelectedPlayers.set(player.id, player);\n      }\n    });\n    selectedPlayer$.next(newSelectedPlayers);\n  }\n}\n","import React from \"react\";\nimport { DividerBox } from \"../layout/box\";\nimport { Portraits } from \"../playerPortrait/portraits\";\nimport { ProfileHouseguest } from \".\";\nimport styled from \"styled-components\";\nimport { textColor } from \"../../model/color\";\nimport { selectTribe } from \"./selectedTribe\";\nimport { Subscription } from \"rxjs\";\nimport { selectedTribe$ } from \"../../subjects/subjects\";\nimport { Tribe, tribeId } from \"../../images/tribe\";\n\ninterface TribeContainerProps {\n  hgs: ProfileHouseguest[];\n  tribe: Tribe;\n}\n\ninterface TribeContainerState {\n  selected: boolean;\n}\n\nexport class TribeContainer extends React.Component<\n  TribeContainerProps,\n  TribeContainerState\n> {\n  private subs: Subscription[] = [];\n\n  public constructor(props: TribeContainerProps) {\n    super(props);\n    this.state = { selected: false };\n  }\n  public componentDidMount() {\n    this.subs.push(\n      selectedTribe$.subscribe((selected) => {\n        this.setState({\n          selected: tribeId(selected) === tribeId(this.props.tribe),\n        });\n      })\n    );\n  }\n\n  public componentWillUnmount() {\n    this.subs.forEach((sub) => sub.unsubscribe());\n  }\n  private select() {\n    selectTribe(this.props.tribe);\n  }\n\n  public render() {\n    const Hoverable = this.getHoverable(this.props.tribe.color);\n    const tribeName = this.props.tribe.name;\n    return (\n      <DividerBox\n        className={`column ${this.props.hgs.length === 1 ? \"is-narrow\" : \"\"}`}\n        key={tribeName}\n        style={{ textAlign: \"center\", padding: 0 }}\n      >\n        {tribeName !== \"undefined\" && (\n          <p>\n            <Hoverable onClick={this.select.bind(this)}>{tribeName}</Hoverable>\n          </p>\n        )}\n        <div\n          style={{\n            margin: \"auto\",\n            maxWidth: this.props.hgs.length > 7 ? 800 : -1,\n          }}\n        >\n          <Portraits houseguests={this.props.hgs} centered={true}></Portraits>\n        </div>\n      </DividerBox>\n    );\n  }\n  private getHoverable = (color: string) => {\n    const normal = `background-color: ; color: ${color};`;\n    const hilite = `background-color: ${color}; color: ${textColor(color)};`;\n    const selected = this.state.selected;\n    return styled.b`\n      :not(:hover) {\n        ${selected ? hilite : normal}\n      }\n      :hover {\n        ${hilite}\n      }\n    `;\n  };\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { RelationshipMap, DiscreteRelationshipMap } from \"../../utils\";\nimport { Tribe, tribeId, nullTribe } from \"../../images/tribe\";\nimport _ from \"lodash\";\nimport { TribeContainer } from \"./tribeContainer\";\nimport { Likemap } from \"../../utils/likeMap\";\nexport interface IMemoryWallProps {\n  readonly houseguests: ProfileHouseguest[];\n}\n\nexport interface ProfileHouseguest extends PlayerProfile {\n  id?: number;\n  isEvicted?: boolean;\n  disabled?: boolean;\n  tribe?: Tribe;\n  //\n  relationships?: RelationshipMap | DiscreteRelationshipMap;\n  houseSize: number;\n  deltaPopularity?: number;\n  likedBy: Likemap;\n  dislikedBy: Likemap;\n  //\n  hohWins?: number;\n  povWins?: number;\n  nominations?: number;\n  tooltip?: string;\n}\n\nexport function MemoryWall(props: IMemoryWallProps): JSX.Element {\n  const houseguests = props.houseguests;\n  if (!houseguests || houseguests.length === 0) {\n    return <div />;\n  }\n  const houseguestsByTribe = _.groupBy(houseguests, (hg) =>\n    hg.tribe === undefined ? hg.tribe : hg.tribe.name\n  );\n  const priorityMap: { [id: string]: number } = {};\n  _.forEach(houseguestsByTribe, (tribe) => {\n    const hg0 = tribe[0];\n    priorityMap[tribeId(hg0.tribe)] = (hg0.tribe || nullTribe).priority || 0;\n  });\n\n  const tribes: JSX.Element[] = [];\n  _.forEach(houseguestsByTribe, (hgs, name) => {\n    if (name === \"undefined\" && _.size(houseguestsByTribe) > 1) {\n      return;\n    }\n    const tribe: Tribe = hgs[0].tribe ? hgs[0].tribe : nullTribe;\n    tribes.push(<TribeContainer key={tribeId(tribe)} {...{ tribe, hgs }} />);\n  });\n  tribes.sort((a, b) => {\n    return priorityMap[b.key || \"\"] - priorityMap[a.key || \"\"];\n  });\n  return (\n    <div\n      style={{\n        margin: \"auto\",\n        maxWidth: -1,\n      }}\n    >\n      <div className=\"columns is-multiline is-centered\">{tribes}</div>\n    </div>\n  );\n}\n","import styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nexport const HasText = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport const Input = styled.input`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n","import React from \"react\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { HasText } from \"../layout/text\";\nimport { ProfileHouseguest } from \"../memoryWall/memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport { players$ } from \"../../subjects/subjects\";\n\ninterface PregameScreenState {\n  cast: ProfileHouseguest[];\n}\n\nexport class MemoryWallScreen extends React.Component<{}, PregameScreenState> {\n  private subs: Subscription[] = [];\n  public constructor(props: never) {\n    super(props);\n    this.state = { cast: players$.value };\n  }\n\n  public componentDidMount() {\n    this.subs.push(\n      players$.subscribe((cast) => {\n        this.setState({ cast });\n      })\n    );\n  }\n\n  public componentWillUnmount() {\n    this.subs.forEach((sub) => sub.unsubscribe());\n  }\n\n  public render() {\n    if (this.state.cast.length === 0) {\n      return <HasText>Cast is empty.</HasText>;\n    }\n    return (\n      <HasText>\n        <MemoryWall houseguests={this.state.cast} />\n      </HasText>\n    );\n  }\n}\n","import { BehaviorSubject, Subject } from \"rxjs\";\nimport { MemoryWallScreen } from \"../components/memoryWallScreen/memoryWallScreen\";\nimport { Episode, PlayerProfile } from \"../model\";\nimport React from \"react\";\nimport {\n  PortraitDisplayMode,\n  popularityMode,\n} from \"../model/portraitDisplayMode\";\nimport { ColorTheme } from \"../theme/theme\";\nimport { ProfileHouseguest } from \"../components/memoryWall\";\nimport { Tribe, nullTribe, tribeId } from \"../images/tribe\";\nimport {\n  emptySet,\n  getSelectedPlayers,\n  selectedPlayer$,\n} from \"./selectedPlayer$\";\nimport { selectTribe } from \"../components/memoryWall/selectedTribe\";\n\n// What is currently being displayed.\nexport const mainContentStream$ = new BehaviorSubject(<MemoryWallScreen />);\n// Push episodes to this subject to add them to the sidebar. Null resets everything.\nexport const episodes$ = new BehaviorSubject<Episode | null>(null);\n// Forcibly switches to an episode. Used when adding a new episode.\nexport const switchEpisode$ = new Subject<number>();\nexport function newEpisode(episode: Episode | null) {\n  episodes$.next(episode);\n}\nexport function switchSceneRelative(n: number) {\n  switchEpisode$.next(n);\n}\n\nexport const selectedTribe$ = new BehaviorSubject<Tribe>(nullTribe);\n\nexport const players$ = new BehaviorSubject<ProfileHouseguest[]>([]);\n\nexport function players$Next(next: ProfileHouseguest[]) {\n  let tribeValidated = false;\n  let validatedPlayers = emptySet();\n  const selectedTribe = selectedTribe$.value;\n  const selectedPlayers = getSelectedPlayers();\n  next.forEach((hg) => {\n    if (!tribeValidated && tribeId(hg.tribe) === tribeId(selectedTribe)) {\n      tribeValidated = true;\n    }\n    if (!hg.isEvicted && selectedPlayers.has(hg.id || -1)) {\n      validatedPlayers.set(hg.id!, {\n        ...hg,\n        id: hg.id!,\n        relationships: hg.relationships!,\n        isEvicted: hg.isEvicted!,\n        tribe: hg.tribe || null,\n      });\n    }\n  });\n  if (validatedPlayers.size !== selectedPlayers.size) {\n    selectedPlayer$.next(validatedPlayers);\n  }\n  if (!tribeValidated) {\n    selectTribe(nullTribe);\n  }\n  players$.next(next);\n}\n\n// this variable is unused but if you delete it it breaks some race condition or something and the code compiles, but doesn't work anymore.\nexport const cast$ = new BehaviorSubject<PlayerProfile[]>([]);\n\n// The display mode selected by the viewsbar.\nexport const displayMode$ = new BehaviorSubject<PortraitDisplayMode>(\n  popularityMode\n);\n\n// If the screen is fullscreen or not.\nexport const isFullscreen$ = new BehaviorSubject<boolean>(false);\nexport const theme$ = new Subject<ColorTheme>();\n","import React from \"react\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { displayMode$ } from \"../../subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nfunction setDisplayMode(p: PortraitDisplayMode) {\n    displayMode$.next(p);\n}\n\ninterface ViewBarTagProps {\n    mode: PortraitDisplayMode;\n    text: string;\n    disabled?: boolean;\n}\n\nexport class ViewBarTag extends React.Component<ViewBarTagProps, { selected: boolean }> {\n    private sub: Subscription | null = null;\n\n    public constructor(props: ViewBarTagProps) {\n        super(props);\n        this.state = { selected: props.mode === displayMode$.value };\n    }\n\n    public componentDidMount() {\n        this.sub = displayMode$.subscribe({\n            next: (mode) => {\n                if (mode !== this.props.mode) {\n                    this.setState({ selected: false });\n                }\n            },\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    public render() {\n        const name = \"level-item tag is-medium is-light\";\n        const style = getStyle(this.props);\n        return (\n            <span\n                className={name}\n                style={style}\n                onClick={() => {\n                    !this.props.disabled && setDisplayMode(this.props.mode);\n                    !this.props.disabled && this.setState({ selected: true });\n                }}\n            >\n                {styleText(this.props.text, this.state.selected)}\n            </span>\n        );\n    }\n}\n\nfunction styleText(text: string, selected: boolean): JSX.Element {\n    return selected ? <b>{text}</b> : <i>{text}</i>;\n}\n\nfunction getStyle(props: ViewBarTagProps) {\n    return props.disabled\n        ? {}\n        : {\n              background: `linear-gradient(90deg, ${props.mode.minColor.toRgba()} 0%, ${props.mode.maxColor.toRgba()} 100%)`,\n              cursor: \"pointer\",\n          };\n}\n","import React from \"react\";\nimport { popularityMode } from \"../../model/portraitDisplayMode\";\nimport { ViewBarTag } from \"./viewBarTag\";\nimport { Box } from \"../layout/box\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ViewsBox = styled(Box)`\n  background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nexport function ViewsBar() {\n  return (\n    <ViewsBox className=\"level is-mobile\" key=\"viewsbar\">\n      <ViewBarTag mode={popularityMode} text={\"Relationships\"}></ViewBarTag>\n    </ViewsBox>\n  );\n}\n","import {\n  MutableGameState,\n  getById,\n  inJury,\n  nonEvictedHouseguests,\n  GameState,\n  EpisodeType,\n  Episode,\n  InitEpisode,\n} from \"../../model\";\nimport { getFinalists, finalJurySize } from \"../../model/season\";\nimport { Scene } from \"./scene\";\n\nexport const BigBrotherVanilla: EpisodeType = {\n  canPlayWith: (n: number) => {\n    return n > 1;\n  },\n  eliminates: 1,\n  arrowsEnabled: true,\n  hasViewsbar: true,\n};\n\n// Refactoring ideas\n/**\n * Might be best to start passing ids instead of houseguests for HoH/nominees/veto winner\n */\n\nexport function evictHouseguest(gameState: MutableGameState, id: number) {\n  const evictee = getById(gameState, id);\n  if (gameState.currentLog) gameState.currentLog.evicted = evictee.id;\n  evictee.isEvicted = true;\n  if (gameState.remainingPlayers - getFinalists() <= finalJurySize()) {\n  }\n  if (inJury(gameState)) {\n    nonEvictedHouseguests(gameState).forEach((hg) => {\n      hg.superiors.delete(evictee.id);\n    });\n  }\n  gameState.remainingPlayers--;\n}\n\nexport function generateBbVanilla(initialGameState: GameState): null {\n  return null;\n}\nexport class BigBrotherVanillaEpisode extends Episode {\n  readonly title: string;\n  readonly scenes: Scene[];\n  readonly content: JSX.Element;\n  readonly gameState: GameState;\n  readonly type = BigBrotherVanilla;\n\n  public constructor(init: InitEpisode) {\n    super(init);\n    this.title = init.title;\n    this.scenes = init.scenes;\n    this.content = init.content;\n    this.gameState = init.gameState;\n  }\n}\n","import React from \"react\";\nimport { EpisodeType, Episode, InitEpisode } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherFinale: EpisodeType = {\n  canPlayWith: (n: number) => n === 3,\n  eliminates: 2,\n  arrowsEnabled: true,\n  hasViewsbar: true,\n};\n\nexport function generateBbFinale(\n  initialGameState: GameState\n): BigBrotherFinaleEpisode {\n  const title = \"Finale\";\n  const content = (\n    <HasText>\n      Finale Night\n      <NextEpisodeButton />\n    </HasText>\n  );\n  const scenes: Scene[] = [];\n  return new BigBrotherFinaleEpisode({\n    gameState: initialGameState,\n    content,\n    title,\n    scenes,\n    type: BigBrotherFinale,\n  });\n}\n\nexport class BigBrotherFinaleEpisode extends Episode {\n  readonly title: string;\n  readonly scenes: Scene[];\n  readonly content: JSX.Element;\n  readonly gameState: GameState;\n  readonly type = BigBrotherFinale;\n\n  public constructor(init: InitEpisode) {\n    super(init);\n    this.title = init.title;\n    this.scenes = init.scenes;\n    this.content = init.content;\n    this.gameState = init.gameState;\n  }\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface TextProps {\n  noMargin?: boolean;\n  children?: any;\n  style?: any;\n  noTheme?: boolean;\n  className?: string;\n}\n\nconst NoMargin = styled.div`\n  text-align: center;\n  color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\nconst Center = styled.p`\n  text-align: center;\n  color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport function Centered(props: TextProps): JSX.Element {\n  if (props.noMargin) return <NoMargin>{props.children}</NoMargin>;\n  return (\n    <Center style={props.style} className={props.className || \"\"}>\n      {props.children}\n    </Center>\n  );\n}\n\nexport function CenteredBold(props: TextProps): JSX.Element {\n  return (\n    <Centered {...props}>\n      <b style={props.style || {}}>{props.children} </b>\n    </Centered>\n  );\n}\n\nexport function CenteredItallic(props: TextProps): JSX.Element {\n  return (\n    <Centered noMargin={props.noMargin}>\n      <i>{props.children} </i>\n    </Centered>\n  );\n}\n","import React from \"react\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\n\nconst FullscreenIcon = styled.img`\n    position: -webkit-sticky;\n    position: sticky;\n    top: 20px;\n    right: 20px;\n`;\n\nexport function FullscreenButton(): JSX.Element {\n    return (\n        <FullscreenIcon\n            src={\n                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAASElEQVRIiWNgGAUEACMa/z+R6ohWz0Sqi0gFLIRcQAAQDAGa+2DoWzAKRgH1wX8G3OULWfqHfkYbsNIUPR5IrQ/gYLQsGngAAEPgCRZjAdYSAAAAAElFTkSuQmCC\"\n            }\n            className=\"button is-rounded\"\n            onClick={() => {\n                isFullscreen$.next(!isFullscreen$.getValue());\n            }}\n        />\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { EpisodeLog } from \"../../../model/logging/episodelog\";\nimport { CenteredBold, Centered, CenteredItallic } from \"../../layout/centered\";\nimport { GameState, getById } from \"../../../model\";\nimport {\n  VoteType,\n  WinnerVote,\n  RunnerUpVote,\n} from \"../../../model/logging/voteType\";\nimport { FullscreenButton } from \"../../mainPage/fullscreenButton\";\nimport { ColorTheme } from \"../../../theme/theme\";\n\nexport const EndgameTableCell = styled.td`\n  padding: 0.1em 0.4em;\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n`;\n\nconst EndgameTable = styled.table`\n  border: 1px solid\n    ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n  border-collapse: collapse;\n`;\n\nconst Gray = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.grayCell};\n`;\n\nconst White = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) =>\n    theme.lightGrayCell};\n`;\n\nconst Evicted = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.evictedCell};\n`;\n\nexport const WinnerCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.winnerCell};\n`;\n\nexport const RunnerUpCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.runnerUpCell};\n`;\n\nexport const NomineeCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.nomineeCell};\n`;\n\nexport const HohCell = styled(EndgameTableCell)`\n  background-color: ${({ theme }: { theme: ColorTheme }) => theme.hohCell};\n`;\n\nconst BlackRow = styled.tr`\n  height: 0.4em;\n  background-color: #000000;\n`;\n\nexport function generateVotingTable(gameState: GameState): JSX.Element {\n  const masterLog: EpisodeLog[] = gameState.log;\n  const houseguestCells: JSX.Element[][] = [];\n  gameState.houseguests.forEach((hg, i) => {\n    houseguestCells[hg.id] = [\n      <Gray key={`hg-name---${i}`}>\n        <CenteredBold noMargin={true}>{hg.name}</CenteredBold>\n      </Gray>,\n    ];\n  });\n  const evictionOrder: number[] = [];\n  const topRowCells: JSX.Element[] = [];\n  const preVetoCells: JSX.Element[] = [];\n  const vetoCells: JSX.Element[] = [];\n  const postVetoCells: JSX.Element[] = [];\n  const evictedCells: JSX.Element[] = [];\n  const winnerCells: JSX.Element[] = [];\n  masterLog.forEach((log, i) => {\n    generateTopRow(log, i, topRowCells, masterLog.length - 1);\n    generatePreVetoRow(log, i, preVetoCells);\n    generateVetoRow(log, i, vetoCells);\n    generatePostVetoRow(log, i, postVetoCells);\n    generateEvictedRow(log, i, evictedCells, gameState);\n    if (!log) return;\n    evictionOrder.push(log.evicted);\n    if (log.runnerUp !== undefined) evictionOrder.push(log.runnerUp);\n    if (log.winner !== undefined) evictionOrder.push(log.winner);\n    // add each of the votes to the houseguest cells\n    for (const [key, value] of Object.entries(log.votes)) {\n      // typescript for .. in loops kinda suck so i need to do a sketchy type conversion\n      const id: number = (key as unknown) as number;\n      const vote: VoteType = value;\n      houseguestCells[id].push(vote.render(gameState));\n    }\n    if (log.winner !== undefined && log.runnerUp !== undefined) {\n      houseguestCells[log.winner].push(new WinnerVote().render(gameState));\n      houseguestCells[log.runnerUp].push(new RunnerUpVote().render(gameState));\n      evictedCells.push(\n        <RunnerUpCell>\n          <CenteredBold noMargin={true}>\n            {getById(gameState, log.runnerUp).name}\n          </CenteredBold>\n          <Centered noMargin={true}>\n            <small>Finalist</small>\n          </Centered>\n        </RunnerUpCell>\n      );\n      winnerCells.push(\n        <WinnerCell>\n          <CenteredBold noMargin={true}>\n            {getById(gameState, log.winner).name}\n          </CenteredBold>\n          <Centered noMargin={true}>\n            <small>Winner</small>\n          </Centered>\n        </WinnerCell>\n      );\n    }\n  });\n  preVetoCells.push(\n    <White key={`preveto--finale`} rowSpan={3}>\n      <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n    </White>\n  );\n  const winnerRow = <tr>{winnerCells}</tr>;\n  const topRow = <tr>{topRowCells}</tr>;\n  const preVetoRow = <tr>{preVetoCells}</tr>;\n  const vetoRow = <tr>{vetoCells}</tr>;\n  const postVetoRow = <tr>{postVetoCells}</tr>;\n  const blackRow = (\n    <BlackRow>\n      <td colSpan={gameState.houseguests.length} />\n    </BlackRow>\n  );\n  const houseguestRows: JSX.Element[] = [];\n  const evictedRow = <tr>{evictedCells}</tr>;\n  let evictionColSpan = -1;\n  const weeks = evictionOrder.length;\n  evictionOrder.reverse().forEach((id, i) => {\n    if (evictionColSpan > 0) {\n      const weekText = i === 2 ? \"(Finale)\" : `(Week ${weeks - i})`;\n      const isJury = getById(gameState, id).isJury;\n      const colSpan = isJury ? evictionColSpan - 1 : evictionColSpan;\n      const evicted = (\n        <Evicted colSpan={colSpan} key={`evicted-week-${weeks - i}`}>\n          <CenteredItallic noMargin={true}>Evicted</CenteredItallic>\n          <CenteredItallic noMargin={true}>\n            <small>{weekText}</small>\n          </CenteredItallic>\n        </Evicted>\n      );\n      if (!isJury) {\n        houseguestCells[id].push(evicted); // not jury, they dead\n      } else {\n        const tempList = houseguestCells[id].slice(0, -1);\n        tempList.push(evicted);\n        tempList.push(houseguestCells[id][houseguestCells[id].length - 1]);\n        houseguestCells[id] = tempList;\n      }\n    }\n    houseguestRows.push(<tr key={`hgrow--${id}`}>{houseguestCells[id]}</tr>);\n    evictionColSpan++;\n  });\n\n  return (\n    <div>\n      <FullscreenButton />\n      <EndgameTable>\n        <tbody>\n          {topRow}\n          {preVetoRow}\n          {vetoRow}\n          {postVetoRow}\n          {blackRow}\n          {houseguestRows}\n          {blackRow}\n          {evictedRow}\n          {winnerRow}\n        </tbody>\n      </EndgameTable>\n    </div>\n  );\n}\n\nfunction generateEvictedRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[],\n  gameState: GameState\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={i} rowSpan={2}>\n        <CenteredBold noMargin={true}>Evicted</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n\n  const voteTextLine1 =\n    log.soleVoter !== undefined ? `${log.soleVoter}'s choice` : \"\";\n\n  cells.push(\n    <Evicted key={i} rowSpan={2}>\n      <Centered noMargin={true}>\n        <b>{getById(gameState, log.evicted).name}</b>\n        <br />\n        <small>\n          {voteTextLine1} <br />\n          to evict\n        </small>\n      </Centered>\n    </Evicted>\n  );\n}\n\nfunction generatePostVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`postVeto--${i}`}>\n        <CenteredBold noMargin={true}>\n          Nominations\n          <br />\n          <small>(post-veto)</small>\n        </CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  cells.push(\n    <White key={`postVeto--${i}`}>\n      <Centered noMargin={true}>\n        {log.nominationsPostVeto[0]}\n        <br /> {log.nominationsPostVeto[1]}\n      </Centered>\n    </White>\n  );\n}\n\nfunction generateVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`veto--${i}`}>\n        <CenteredBold noMargin={true}>Veto Winner</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  if (log.vetoWinner === undefined) return;\n\n  cells.push(\n    <White key={`veto--${i}`}>\n      <Centered noMargin={true}>{log.vetoWinner}</Centered>\n    </White>\n  );\n}\n\nfunction generatePreVetoRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[]\n) {\n  if (!log) {\n    cells.push(\n      <Gray key={`preveto--${i}`}>\n        <CenteredBold noMargin={true}>\n          Nominations\n          <br />\n          <small>(pre-veto)</small>\n        </CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  if (log.nominationsPreVeto.length === 0) {\n    cells.push(\n      <White key={`preveto--${i}`} rowSpan={2}>\n        <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n      </White>\n    );\n    return;\n  }\n  cells.push(\n    <White key={`preveto--${i}`}>\n      <Centered noMargin={true}>\n        {log.nominationsPreVeto[0]}\n        <br /> {log.nominationsPreVeto[1]}\n      </Centered>\n    </White>\n  );\n}\n\nfunction generateTopRow(\n  log: EpisodeLog | undefined,\n  i: number,\n  cells: JSX.Element[],\n  max: number\n) {\n  if (!log) {\n    cells.push(<Gray key={`toprow--${i}`} />);\n    return;\n  }\n  if (i === max) {\n    cells.push(\n      <Gray key={`toprow--${i}`} colSpan={2}>\n        <CenteredBold noMargin={true}>Finale</CenteredBold>\n      </Gray>\n    );\n    return;\n  }\n  cells.push(\n    <Gray key={`toprow--${i}`}>\n      <CenteredBold noMargin={true}>Week {i}</CenteredBold>\n    </Gray>\n  );\n}\n","import { Episode, InitEpisode, EpisodeType } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { evictHouseguest } from \"./bigBrotherEpisode\";\nimport { generateVotingTable } from \"./scenes/votingTable\";\n\nexport const GameOver: EpisodeType = {\n    canPlayWith: (n: number) => n === 1,\n    eliminates: 1,\n    arrowsEnabled: false,\n    hasViewsbar: false\n};\n\nexport function generateGameOver(gameState: GameState): GameOverEpisode {\n    const title = \"Game Over\";\n    const scenes: Scene[] = [];\n    const content = generateVotingTable(gameState);\n    gameState.houseguests.forEach(hg => {\n        evictHouseguest(gameState, hg.id);\n    });\n    return new GameOverEpisode({ gameState, content, title, scenes, type: GameOver });\n}\n\nexport class GameOverEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { BigBrotherVanilla } from \"../components/episode/bigBrotherEpisode\";\nimport { EpisodeFactory } from \"../components/episode/episodeFactory\";\nimport { GameState } from \"./gameState\";\nimport { EpisodeType, Episode } from \".\";\nimport { BigBrotherFinale } from \"../components/episode/bigBrotherFinale\";\nimport { GameOver } from \"../components/episode/gameOver\";\n\nexport function finalJurySize() {\n  return jurors;\n}\n\nlet jurors = 7;\n\nexport function getFinalists() {\n  return 2;\n}\n\nexport class Season {\n  private factory: EpisodeFactory;\n\n  public constructor() {\n    this.factory = new EpisodeFactory();\n  }\n\n  // In the future, this would all be customizable,\n  // and not just all big brother episodes by default.\n\n  public renderEpisode(gameState: GameState, type: EpisodeType): Episode {\n    return this.factory.nextEpisode(gameState, type);\n  }\n\n  public whichEpisodeType(players: number) {\n    if (players === 3) {\n      return BigBrotherFinale;\n    }\n    if (players === 2) {\n      return GameOver;\n    }\n    return BigBrotherVanilla;\n  }\n}\n","import { Subscription } from \"rxjs\";\nimport { Sidebar } from \"./sidebar\";\nimport { Season } from \"../../model/season\";\nimport { Episode, nonEvictedHouseguests } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport {\n  mainContentStream$,\n  episodes$,\n  switchEpisode$,\n  newEpisode,\n  switchSceneRelative,\n} from \"../../subjects/subjects\";\n\ninterface IndexedScene {\n  scene: Scene;\n  index: number;\n}\n\nconst LEFT = 37;\nconst RIGHT = 39;\n\nexport class SidebarController {\n  private view: Sidebar;\n  private subscriptions: Subscription[] = [];\n  private season: Season = new Season();\n  private scenes: IndexedScene[] = [];\n  private selectedEpisode: number = 0;\n\n  public constructor(view: Sidebar) {\n    this.view = view;\n    this.subscriptions.push(\n      episodes$.subscribe({\n        next: (episode) => this.onNewEpisode(episode),\n      })\n    );\n    this.subscriptions.push(\n      switchEpisode$.subscribe({\n        next: (value: number) => {\n          this.switchSceneRelative(value);\n        },\n      })\n    );\n  }\n\n  public getSelectedEpisode() {\n    return this.selectedEpisode;\n  }\n\n  public async switchToScene(id: number) {\n    mainContentStream$.next(this.scenes[id].scene.render);\n    this.selectedEpisode = this.scenes[id].index;\n    await this.view.setState({ selectedScene: id });\n    // if (getSelectedPlayers() !== null) {\n    //   selectedPlayer$.next(\n    //     getById(\n    //       this.scenes[this.view.state.selectedScene].scene.gameState,\n    //       getSelectedPlayers()!.id\n    //     )\n    //   );\n    // }\n  }\n\n  private switchSceneRelative = (delta: number) => {\n    const selectedScene = this.view.state.selectedScene;\n    const renderedScenes = this.scenes.length;\n    const targetScene = selectedScene + delta;\n    if (targetScene < 0) {\n      return;\n    }\n    const lastEpisode = this.view.state.episodes[\n      this.view.state.episodes.length - 1\n    ];\n    if (targetScene < renderedScenes) {\n      // Go back to an earlier scene\n      this.switchToScene(targetScene);\n    } else if (targetScene === renderedScenes) {\n      // Generate a new scene, then jump to it\n      const currentGameState = lastEpisode.gameState;\n      const newPlayerCount = nonEvictedHouseguests(lastEpisode.gameState)\n        .length;\n      const nextEpisodeType = this.season.whichEpisodeType(newPlayerCount);\n      if (newPlayerCount > 0) {\n        newEpisode(\n          this.season.renderEpisode(currentGameState, nextEpisodeType)\n        );\n        this.switchSceneRelative(1);\n      }\n    }\n  };\n\n  get handleKeyDown(): (e: any) => void {\n    return this._handleKeyDown.bind(this);\n  }\n\n  private _handleKeyDown(event: any) {\n    const state = this.view.state;\n\n    if (\n      state.episodes[this.selectedEpisode] === undefined ||\n      !state.episodes[this.selectedEpisode].type.arrowsEnabled\n    ) {\n      return;\n    }\n    if (event.keyCode === LEFT) {\n      switchSceneRelative(-1);\n    } else if (event.keyCode === RIGHT) {\n      switchSceneRelative(1);\n    }\n  }\n\n  private onNewEpisode(episode: Episode | null) {\n    if (!episode) {\n      this.view.setState({ episodes: [], selectedScene: 0 });\n      this.scenes = [];\n    } else {\n      const newState = { ...this.view.state };\n      // starts at -1: prevent OBOE\n      const latestIndex =\n        this.scenes.length === 0\n          ? -1\n          : this.scenes[this.scenes.length - 1].index;\n      const index = latestIndex + 1;\n      this.scenes.push({ scene: episode, index });\n      episode.scenes.forEach((scene) => this.scenes.push({ scene, index }));\n      newState.episodes.push(episode);\n      this.view.setState(newState);\n    }\n  }\n\n  public destroy() {\n    this.subscriptions.forEach((sub) => sub.unsubscribe());\n  }\n}\n","import React from \"react\";\nimport { SidebarController } from \"./sidebarController\";\nimport { Episode } from \"../../model\";\nimport { Box } from \"../layout/box\";\nimport { HasText } from \"../layout/text\";\ninterface SidebarState {\n  episodes: Episode[];\n  selectedScene: number;\n}\n\nexport class Sidebar extends React.Component<{}, SidebarState> {\n  private controller: SidebarController;\n  public constructor(props: {}) {\n    super(props);\n    this.controller = new SidebarController(this);\n    this.state = { episodes: [], selectedScene: 0 };\n  }\n\n  public componentDidMount() {\n    document.addEventListener(\"keydown\", this.controller.handleKeyDown);\n  }\n\n  public componentWillUnmount() {\n    this.controller.destroy();\n  }\n\n  public render() {\n    return (\n      <Box style={{ minWidth: 180, display: \"none\" }}>\n        <HasText>{this.getEpisodes()}</HasText>\n      </Box>\n    );\n  }\n\n  private getHighlight(title: string, key: number) {\n    if (key === this.state.selectedScene) {\n      return <mark>{title}</mark>;\n    }\n    return title;\n  }\n\n  private getEpisodes() {\n    const result: JSX.Element[] = [];\n    // Weird OBOE to make keys start at 0\n    let episodeKey = -1;\n    let breakKey = 0;\n    this.state.episodes.forEach((episode: Episode) => {\n      const id = ++episodeKey;\n      result.push(\n        <b\n          key={id}\n          onClick={() => {\n            this.controller.switchToScene(id);\n          }}\n        >\n          {this.getHighlight(episode.title, id)}\n        </b>\n      );\n      result.push(<br key={--breakKey} />);\n      // episode.scenes.forEach((scene: Scene) => {\n      //   const id = ++episodeKey;\n      //   if (this.controller.getSelectedEpisode() === episode.gameState.phase) {\n      //     result\n      //       .push\n      //       // <a\n      //       //   key={id}\n      //       //   href={\"\"}\n      //       //   onClick={() => this.controller.switchToScene(id)}\n      //       // >\n      //       //   {this.getHighlight(scene.title, id)}\n      //       // </a>\n      //       ();\n      //     result.push(<br key={--breakKey} />);\n      //   }\n      // });\n    });\n    return result;\n  }\n}\n","import {\n  RelationshipMapper,\n  RelationshipHouseguest,\n} from \"./RelationshipMapper\";\nimport _ from \"lodash\";\n\nexport interface TribeSkeleton {\n  members: string[];\n  name: string;\n  color: string;\n  priority?: number;\n}\n\nexport class MetaRelationshipMapper {\n  private timeline: RelationshipMapper[] = [];\n  private t: number = 0;\n  public episodeStartMarkers: number[] = [0];\n\n  public get time() {\n    return this.t;\n  }\n\n  public constructor(houseguests: RelationshipHouseguest[]) {\n    this.timeline[this.t] = new RelationshipMapper(houseguests);\n    this.t++;\n  }\n\n  public at(t: number) {\n    let time = t;\n\n    if (t >= this.t) time = this.t - 1;\n    if (t < 1) time = 1;\n    return this.timeline[time];\n  }\n\n  private cloneDeep(): RelationshipMapper {\n    return _.cloneDeep(this.timeline[this.t - 1]);\n  }\n\n  private pushToTimeline(newMap: RelationshipMapper) {\n    this.timeline[this.t] = newMap;\n    this.t++;\n  }\n\n  public endEpisode() {\n    this.episodeStartMarkers.push(this.t - 1);\n  }\n\n  public tribeSwap(tribes: TribeSkeleton[]) {\n    const newMap = this.cloneDeep();\n    newMap.dropYourBuffs();\n    tribes.forEach((tribeSkeleton) => {\n      newMap.tribe({ ...tribeSkeleton }, tribeSkeleton.members);\n    });\n    this.pushToTimeline(newMap);\n  }\n\n  public like(a: string, b: string) {\n    const newMap = this.cloneDeep();\n    newMap.like(a, b);\n    this.pushToTimeline(newMap);\n  }\n\n  public friends(a: string, b: string) {\n    const newMap = this.cloneDeep();\n    newMap.friends(a, b);\n    this.pushToTimeline(newMap);\n  }\n\n  public dislike(a: string, b: string) {\n    const newMap = this.cloneDeep();\n    newMap.dislike(a, b);\n    this.pushToTimeline(newMap);\n  }\n\n  public neutral(a: string, b: string) {\n    const newMap = this.cloneDeep();\n    newMap.neutral(a, b);\n    this.pushToTimeline(newMap);\n  }\n  public enemies(a: string, b: string) {\n    const newMap = this.cloneDeep();\n    newMap.enemies(a, b);\n    this.pushToTimeline(newMap);\n  }\n  public alliance(a: string[]) {\n    const newMap = this.cloneDeep();\n    newMap.alliance(a);\n    this.pushToTimeline(newMap);\n  }\n\n  public evict(a: string) {\n    const newMap = this.cloneDeep();\n    newMap.evict(a);\n    this.pushToTimeline(newMap);\n  }\n  public unevict(a: string) {\n    const newMap = this.cloneDeep();\n    newMap.unevict(a);\n    this.pushToTimeline(newMap);\n  }\n}\n","import { newDiscreteRelationshipMap } from \"../utils\";\nimport { RelationshipHouseguest } from \"./RelationshipMapper\";\nimport { MetaRelationshipMapper } from \"./MetaRelationshipMapper\";\n\nconst master_kohga = \"master kohga\";\nconst master = \"master kohga\";\nconst revali = \"revali\";\nconst teebo = \"teebo\";\nconst kass = \"kass\";\nconst link = \"link\";\nconst chio = \"chio\";\nconst roscoe = \"roscoe\";\nconst riju = \"riju\";\nconst magda = \"magda\";\nconst ancient_oven = \"ancient oven\";\nconst oven = \"ancient oven\";\nconst patrica = \"patrica\";\nconst patricia = \"patrica\";\nconst oaki = \"oaki\";\nconst mipha = \"mipha\";\nconst prince_sidon = \"prince sidon\";\nconst sidon = \"prince sidon\";\nconst epona = \"epona\";\nconst robbie = \"robbie\";\nconst karson = \"karson\";\nconst urbosa = \"urbosa\";\nconst hunnie = \"hunnie\";\nconst pelison = \"pelison\";\nconst horse = \"royal white horse\";\nfunction importAll(\n  context: __WebpackModuleApi.RequireContext\n): MetaRelationshipMapper {\n  const profiles: RelationshipHouseguest[] = [];\n  setupProfiles(context, profiles, new Set<string>(), new Set<string>());\n  const r: MetaRelationshipMapper = new MetaRelationshipMapper(profiles);\n\n  const tribeSwap = r.tribeSwap.bind(r);\n  const like = r.like.bind(r);\n  const friends = r.friends.bind(r);\n  const dislike = r.dislike.bind(r);\n  const alliance = r.alliance.bind(r);\n  const neutral = r.neutral.bind(r);\n  const enemies = r.enemies.bind(r);\n  const evict = r.evict.bind(r);\n  const unevict = r.unevict.bind(r);\n  const endEpisode = r.endEpisode.bind(r);\n  tribeSwap([\n    {\n      name: \"Wisdom\",\n      color: \"#635cb9\",\n      priority: -1,\n      members: [\n        \"ancient oven\",\n        \"epona\",\n        \"hunnie\",\n        \"karson\",\n        \"mipha\",\n        \"pelison\",\n        \"urbosa\",\n      ],\n    },\n    {\n      name: \"Power\",\n      color: \"#c70134\",\n      priority: 1,\n      members: [\n        \"Kass\",\n        \"magda\",\n        \"master kohga\",\n        \"patrica\",\n        \"revali\",\n        \"roscoe\",\n        \"teebo\",\n      ],\n    },\n    {\n      name: \"Courage\",\n      color: \"#7d8d4e\",\n      members: [\n        \"Link\",\n        \"chio\",\n        \"oaki\",\n        \"prince sidon\",\n        \"royal white horse\",\n        \"robbie\",\n        \"riju\",\n      ],\n    },\n  ]);\n  dislike(magda, patrica);\n  dislike(magda, roscoe);\n  dislike(magda, kass);\n  like(magda, revali);\n  like(epona, hunnie);\n  like(epona, urbosa);\n  like(epona, pelison);\n  dislike(epona, ancient_oven);\n  like(master_kohga, revali);\n  like(master_kohga, kass);\n  dislike(master_kohga, teebo);\n  friends(chio, link);\n  like(chio, riju);\n  dislike(chio, robbie);\n  like(magda, master_kohga);\n  dislike(master_kohga, roscoe);\n  like(roscoe, revali);\n  like(roscoe, master_kohga);\n  like(roscoe, magda);\n  like(roscoe, kass);\n  like(roscoe, patrica);\n  like(roscoe, teebo);\n  like(pelison, mipha);\n  like(pelison, urbosa);\n  like(pelison, hunnie);\n  like(revali, magda);\n  like(revali, master_kohga);\n  like(revali, kass);\n  like(revali, roscoe);\n  dislike(revali, patrica);\n  dislike(revali, teebo);\n  like(chio, oaki);\n  dislike(robbie, chio);\n  like(chio, prince_sidon);\n  like(oaki, prince_sidon);\n  like(oaki, chio);\n  like(oaki, riju);\n  like(oaki, link);\n  like(link, robbie);\n  like(link, oaki);\n  like(mipha, oven);\n  dislike(epona, karson);\n  like(epona, mipha);\n  like(robbie, riju);\n  like(robbie, link);\n  like(mipha, urbosa);\n  like(mipha, epona);\n  like(sidon, oaki);\n  like(urbosa, epona);\n  alliance([teebo, roscoe, kass]);\n  like(revali, teebo);\n  dislike(revali, patrica);\n  like(pelison, oven);\n  like(pelison, mipha);\n  like(oven, epona);\n  like(oaki, sidon);\n  like(robbie, horse);\n  dislike(robbie, link);\n  like(robbie, oaki);\n  like(oaki, riju);\n  dislike(oaki, link);\n  like(sidon, link);\n  like(riju, link);\n  dislike(roscoe, patrica);\n  dislike(roscoe, master);\n  dislike(roscoe, magda);\n  like(teebo, kass);\n  dislike(teebo, patricia);\n  like(kass, master);\n  like(master, magda);\n  friends(sidon, horse);\n  dislike(sidon, robbie);\n  dislike(sidon, riju);\n  like(riju, robbie);\n  like(riju, oaki);\n  like(riju, chio);\n  dislike(riju, horse);\n  // posted update 1\n  dislike(mipha, hunnie);\n  neutral(mipha, oven);\n  neutral(magda, kass);\n  like(magda, teebo);\n  like(hunnie, urbosa);\n  dislike(robbie, link);\n  neutral(robbie, oaki);\n  like(robbie, sidon);\n  dislike(oaki, robbie);\n  dislike(chio, horse);\n  like(patricia, roscoe);\n  like(patricia, magda);\n  like(patricia, kass);\n  dislike(patricia, revali);\n  dislike(patricia, master);\n  dislike(patricia, teebo);\n  like(mipha, oven);\n  neutral(mipha, hunnie);\n  dislike(mipha, karson);\n  like(sidon, robbie);\n  dislike(link, robbie);\n  dislike(chio, riju);\n  dislike(oaki, link);\n  dislike(sidon, link);\n  like(hunnie, epona);\n  like(hunnie, pelison);\n  like(hunnie, mipha);\n  neutral(sidon, robbie);\n  neutral(sidon, horse);\n  like(pelison, epona);\n  like(karson, mipha);\n  like(karson, pelison);\n  dislike(mipha, urbosa);\n  enemies(teebo, patricia);\n  like(oven, urbosa);\n  dislike(oven, karson);\n  dislike(oven, hunnie);\n  dislike(teebo, magda);\n  like(patricia, teebo);\n  neutral(teebo, patricia);\n  dislike(kass, revali);\n  dislike(kass, magda);\n  dislike(horse, chio);\n  dislike(master, patricia);\n  neutral(link, chio);\n  like(link, sidon);\n  like(link, riju);\n  like(sidon, robbie);\n  like(sidon, horse);\n  like(riju, sidon);\n  friends(robbie, oaki);\n  dislike(oaki, horse);\n  dislike(karson, pelison);\n  dislike(link, chio);\n  like(magda, kass);\n  alliance([roscoe, teebo, kass, patricia]);\n  neutral(oaki, chio);\n  dislike(revali, master);\n  evict(magda);\n  evict(chio);\n  evict(karson);\n  endEpisode();\n  /////////////////// EPISODE 2 BEGINS //////////////////////////////////\n\n  tribeSwap([\n    {\n      name: \"Gerudo Town\",\n      color: \"#FE7555\",\n      members: [epona, horse, teebo],\n    },\n    {\n      name: \"Kakariko Village\",\n      color: \"#761536\",\n      members: [kass, sidon, urbosa],\n      priority: -2,\n    },\n    {\n      name: \"Zora's Domain\",\n      color: \"#635cb9\",\n      members: [mipha, riju, patrica],\n      priority: -1,\n    },\n    {\n      name: \"Korok Forest\",\n      color: \"#7d8d4e\",\n      members: [oaki, revali, pelison],\n    },\n    {\n      name: \"Goron City\",\n      color: \"#C70134\",\n      members: [link, oven, roscoe],\n    },\n    {\n      name: \"Rito Village\",\n      color: \"#FCE78E\",\n      members: [robbie, master, hunnie],\n    },\n  ]);\n\n  dislike(oven, hunnie);\n  like(epona, karson);\n  dislike(urbosa, pelison);\n  like(oaki, revali);\n  like(epona, horse);\n  dislike(master, hunnie);\n  dislike(master, robbie);\n  dislike(oaki, pelison);\n  dislike(robbie, hunnie);\n  like(sidon, urbosa);\n  dislike(sidon, revali);\n  dislike(sidon, kass);\n  dislike(mipha, riju);\n  like(mipha, patricia);\n  dislike(hunnie, oven);\n  neutral(oaki, pelison);\n  dislike(epona, pelison);\n  like(riju, mipha);\n  friends(roscoe, oven);\n  like(robbie, master);\n  like(patricia, mipha);\n  dislike(mipha, riju);\n  tribeSwap([\n    {\n      name: \"Gerudo-Kakariko\",\n      color: \"#FE7555\",\n      members: [epona, horse, teebo, kass, sidon, urbosa],\n    },\n\n    {\n      name: \"Zora's Domain\",\n      color: \"#635cb9\",\n      members: [mipha, riju, patrica],\n    },\n\n    {\n      name: \"Korok Forest\",\n      color: \"#7d8d4e\",\n      members: [oaki, revali, pelison],\n    },\n\n    {\n      name: \"Rito-Goron\",\n      color: \"#FCE78E\",\n      members: [robbie, master, hunnie, link, oven, roscoe],\n    },\n  ]);\n  dislike(link, robbie);\n  like(horse, epona);\n  friends(robbie, master);\n  friends(robbie, link);\n  dislike(robbie, roscoe);\n  neutral(master, roscoe);\n  neutral(roscoe, master);\n  dislike(teebo, epona);\n  dislike(teebo, urbosa);\n  dislike(epona, kass);\n  dislike(epona, teebo);\n  neutral(sidon, kass);\n  like(epona, sidon);\n  dislike(sidon, teebo);\n  like(sidon, kass);\n  dislike(link, roscoe);\n  like(hunnie, link);\n  like(hunnie, oven);\n  like(hunnie, master);\n  friends(epona, sidon);\n  like(pelison, revali);\n  alliance([riju, mipha, patricia]);\n  dislike(roscoe, hunnie);\n  like(roscoe, master);\n  like(epona, kass);\n  friends(link, robbie);\n  dislike(hunnie, master);\n  dislike(sidon, horse);\n  dislike(robbie, oven);\n  like(pelison, hunnie);\n  like(pelison, oaki);\n  like(sidon, patricia);\n  evict(roscoe);\n  evict(teebo);\n  endEpisode();\n  //////////////////////// episode 3 ends\n  r.tribeSwap([\n    {\n      name: \"Stamina Vessel\",\n      color: \"#7d8d4e\",\n      members: [master, sidon, patricia, oaki, oven],\n    },\n    {\n      name: \"Heart Container\",\n      color: \"#c70134\",\n      members: [revali, link, robbie, mipha, urbosa],\n    },\n    {\n      name: \"Spirit Orb\",\n      color: \"#761536\",\n      members: [kass, riju, horse, hunnie, pelison],\n    },\n    { name: \"Exile\", color: \"#202020\", priority: -1, members: [epona] },\n  ]);\n  dislike(sidon, revali);\n  friends(revali, master);\n  like(oaki, mipha);\n  friends(oaki, riju);\n  like(robbie, revali);\n  dislike(robbie, kass);\n  dislike(robbie, patricia);\n  dislike(riju, mipha);\n  enemies(horse, riju);\n  friends(oaki, revali);\n  dislike(robbie, mipha);\n  dislike(robbie, urbosa);\n  like(revali, robbie);\n  dislike(urbosa, horse);\n  dislike(urbosa, sidon);\n  like(pelison, riju);\n  dislike(pelison, urbosa);\n  friends(riju, mipha);\n  dislike(horse, pelison);\n  dislike(riju, oven);\n  like(patricia, sidon);\n  friends(sidon, revali);\n  dislike(oaki, pelison);\n  neutral(master, patrica);\n  neutral(patricia, master);\n  neutral(horse, riju);\n  neutral(riju, horse);\n  enemies(hunnie, pelison);\n  friends(oaki, patrica);\n  like(kass, sidon);\n  like(kass, horse);\n  like(kass, epona);\n  dislike(link, riju);\n  dislike(hunnie, riju);\n  like(hunnie, pelison);\n  like(hunnie, master);\n  like(horse, kass);\n  like(horse, oaki);\n  like(horse, riju);\n  neutral(horse, pelison);\n  friends(master, epona);\n  neutral(sidon, oaki);\n  friends(urbosa, revali);\n  dislike(revali, mipha);\n  like(riju, urbosa);\n  like(hunnie, kass);\n  like(hunnie, horse);\n  like(pelison, hunnie);\n  dislike(epona, patrica);\n  dislike(patrica, urbosa);\n  dislike(patrica, pelison);\n  neutral(patrica, riju);\n  dislike(patrica, link);\n  dislike(patrica, horse);\n  dislike(master, oaki);\n  dislike(epona, oaki);\n  dislike(sidon, oaki);\n  evict(oaki);\n\n  endEpisode();\n  //////////////////////// episode 4 ends\n  tribeSwap([\n    {\n      name: \"Heart Container\",\n      color: \"#c70134\",\n      members: [revali, link, robbie, mipha, urbosa],\n    },\n    {\n      name: \"Spirit Orb\",\n      color: \"#761536\",\n      members: [kass, riju, horse, hunnie, pelison],\n    },\n    {\n      name: \"Stamina Vessel\",\n      color: \"#7d8d4e\",\n      members: [master, sidon, patricia, epona, oven],\n    },\n  ]);\n  dislike(urbosa, mipha);\n  dislike(sidon, revali);\n  neutral(sidon, link);\n  dislike(sidon, mipha);\n  dislike(sidon, patricia);\n  dislike(sidon, hunnie);\n  like(sidon, pelison);\n  dislike(pelison, riju);\n  dislike(pelison, horse);\n  dislike(hunnie, horse);\n  like(pelison, kass);\n  like(pelison, horse);\n  like(revali, link);\n  dislike(link, patricia);\n  dislike(link, mipha);\n  dislike(mipha, robbie);\n  dislike(urbosa, robbie);\n  dislike(revali, robbie);\n  friends(master, sidon);\n  neutral(sidon, urbosa);\n  dislike(mipha, link);\n  evict(robbie);\n  evict(riju);\n  evict(oven);\n  endEpisode();\n  //////////////////////// episode 5 ends\n\n  tribeSwap([\n    {\n      name: \"Naboris\",\n      color: \"#FE7555\",\n      members: [master_kohga, urbosa, kass],\n    },\n    { name: \"Medoh\", color: \"#FCE78E\", members: [revali, epona, horse] },\n    { name: \"Rudania\", color: \"#C70134\", members: [sidon, mipha, hunnie] },\n    { name: \"Ruta\", color: \"#635CB9\", members: [patrica, link, pelison] },\n  ]);\n  dislike(mipha, sidon);\n  dislike(patricia, horse);\n  like(pelison, patricia);\n  dislike(urbosa, sidon);\n  dislike(urbosa, kass);\n  dislike(urbosa, epona);\n  neutral(revali, kass);\n  like(master, hunnie);\n  dislike(master, kass);\n  dislike(hunnie, sidon);\n  dislike(epona, revali);\n  neutral(epona, mipha);\n  dislike(kass, urbosa);\n  like(revali, urbosa);\n  dislike(revali, epona);\n  dislike(revali, horse);\n  tribeSwap([\n    {\n      name: \"Naboris-Ruta\",\n      color: \"#FE7555\",\n      members: [master_kohga, urbosa, kass, patrica, link, pelison],\n    },\n    { name: \"Medoh\", color: \"#FCE78E\", members: [revali, epona, horse] },\n    { name: \"Rudania\", color: \"#C70134\", members: [sidon, mipha, hunnie] },\n  ]);\n  dislike(kass, patricia);\n  dislike(kass, link);\n  dislike(kass, mipha);\n  like(mipha, sidon);\n  like(hunnie, sidon);\n  like(hunnie, horse);\n  dislike(master, horse);\n  dislike(urbosa, patricia);\n  friends(urbosa, master);\n  like(master, kass);\n  dislike(master, pelison);\n  dislike(master, mipha);\n  like(urbosa, link);\n  alliance([horse, epona, revali]);\n  dislike(horse, link);\n  dislike(kass, pelison);\n  dislike(epona, sidon);\n  dislike(revali, kass);\n  neutral(revali, link);\n  dislike(revali, sidon);\n  dislike(revali, pelison);\n  like(horse, urbosa);\n  like(mipha, urbosa);\n  dislike(sidon, link);\n  like(link, urbosa);\n  like(urbosa, pelison);\n  dislike(epona, link);\n  dislike(epona, mipha);\n  dislike(master, link);\n  evict(pelison);\n  endEpisode();\n  //////////////////////// episode 6 ends\n  tribeSwap([\n    {\n      name: \"Tarrey Town\",\n      color: \"#de4861\",\n      members: [\n        revali,\n        kass,\n        master,\n        patrica,\n        sidon,\n        link,\n        horse,\n        mipha,\n        epona,\n        urbosa,\n        hunnie,\n      ],\n    },\n  ]);\n  like(link, revali);\n  neutral(master, hunnie);\n  neutral(mipha, urbosa);\n  like(urbosa, mipha);\n  dislike(link, horse);\n  friends(urbosa, sidon);\n  dislike(horse, mipha);\n  dislike(horse, kass);\n  dislike(horse, patricia);\n  /////// surprise returnee twist\n\n  tribeSwap([\n    {\n      name: \"Tarrey Town\",\n      color: \"#de4861\",\n      members: [\n        revali,\n        kass,\n        master,\n        patrica,\n        sidon,\n        link,\n        horse,\n        mipha,\n        epona,\n        urbosa,\n        hunnie,\n        oaki,\n        oven,\n      ],\n    },\n  ]);\n  unevict(oven);\n  unevict(oaki);\n  endEpisode();\n  /////////////// episode 7 ends\n  like(epona, link);\n  friends(oaki, oven);\n  like(urbosa, oven);\n  dislike(sidon, oven);\n  dislike(sidon, oaki);\n  dislike(link, sidon);\n  like(oaki, patricia);\n  like(oaki, mipha);\n  dislike(oven, sidon);\n  dislike(oven, kass);\n  dislike(oven, patricia);\n  dislike(master, oven);\n  like(hunnie, oven);\n  dislike(link, horse);\n  like(epona, link);\n  dislike(oven, sidon);\n  dislike(oven, master);\n  dislike(oven, revali);\n  dislike(urbosa, oaki);\n  dislike(urbosa, patricia);\n  like(epona, patricia);\n  dislike(oaki, sidon);\n  dislike(oaki, master);\n  dislike(kass, oaki);\n  like(kass, patricia);\n  dislike(kass, horse);\n  like(kass, urbosa);\n  like(horse, hunnie);\n  like(horse, master);\n  neutral(horse, kass);\n  neutral(horse, oaki);\n  dislike(horse, oven);\n  like(urbosa, kass);\n  dislike(kass, oven);\n  dislike(kass, hunnie);\n  dislike(oaki, hunnie);\n  neutral(master, oaki);\n  neutral(oaki, master);\n  neutral(master, oven);\n  dislike(horse, oaki);\n  dislike(urbosa, mipha);\n  like(oaki, sidon);\n  like(epona, oven);\n  dislike(epona, hunnie);\n  dislike(epona, patrica);\n  neutral(epona, link);\n  like(mipha, hunnie);\n  like(mipha, urbosa);\n  like(mipha, oaki);\n  neutral(mipha, epona);\n  neutral(mipha, link);\n  dislike(mipha, horse);\n  dislike(mipha, master);\n  dislike(mipha, kass);\n  dislike(patricia, oven);\n  like(master, oven);\n  dislike(master, oaki);\n  dislike(master, patrica);\n  like(master, hunnie);\n  like(sidon, horse);\n  dislike(epona, link);\n  dislike(revali, link);\n  like(mipha, patricia);\n  dislike(urbosa, patricia);\n  friends(master, urbosa);\n  like(master, oven);\n  dislike(oven, horse);\n  friends(epona, kass);\n  evict(link);\n  endEpisode();\n  /////////////// episode 8 begins\n  dislike(hunnie, oaki);\n  dislike(hunnie, patrica);\n  like(oaki, hunnie);\n  dislike(urbosa, kass);\n  dislike(hunnie, revali);\n  dislike(epona, horse);\n  dislike(sidon, kass);\n  dislike(sidon, horse);\n  dislike(oaki, revali);\n  like(sidon, hunnie);\n  like(epona, hunnie);\n  evict(mipha);\n  endEpisode();\n  //////////// episode 9 begins\n  like(patricia, hunnie);\n  neutral(patricia, oven);\n  neutral(patricia, horse);\n  neutral(patricia, revali);\n  dislike(patricia, sidon);\n  dislike(master, hunnie);\n  dislike(oven, revali);\n  like(sidon, kass);\n  like(sidon, horse);\n  neutral(sidon, hunnie);\n  neutral(sidon, revali);\n  dislike(revali, oaki);\n  like(revali, sidon);\n  like(revali, hunnie);\n  friends(horse, oaki);\n  friends(horse, patrica);\n  like(horse, oven);\n  like(oaki, epona);\n  dislike(oaki, sidon);\n  dislike(oaki, master);\n  dislike(oaki, kass);\n  like(oaki, urbosa);\n  /// challenge ends\n  like(oven, hunnie);\n  like(patricia, oven);\n  dislike(urbosa, hunnie);\n  dislike(revali, sidon);\n  like(revali, oven);\n  dislike(revali, horse);\n  dislike(master, epona);\n  like(master, hunnie);\n  dislike(sidon, hunnie);\n  dislike(hunnie, epona);\n  dislike(oven, patricia);\n  evict(horse);\n  endEpisode();\n  ////// episode 10 begins\n\n  tribeSwap([\n    {\n      name: \"Divine Trial\",\n      color: \"#FCE78E\",\n      members: [epona, master_kohga, urbosa, kass, hunnie],\n      priority: 1,\n    },\n    {\n      name: \"Lost Woods\",\n      color: \"#B8B8B8\",\n      members: [oven, revali, sidon, patricia, oaki],\n    },\n  ]);\n  dislike(sidon, kass);\n  dislike(epona, kass);\n  dislike(epona, hunnie);\n  like(master, epona);\n  dislike(master, urbosa);\n  like(patricia, sidon);\n  dislike(patricia, oaki);\n  dislike(sidon, epona);\n  neutral(oaki, sidon);\n  dislike(patricia, oven);\n  like(urbosa, hunnie);\n  like(oven, patricia);\n  neutral(sidon, oaki);\n  like(sidon, revali);\n  dislike(master, hunnie);\n  like(hunnie, patrica);\n  dislike(kass, urbosa);\n  like(oaki, sidon);\n  dislike(oaki, patrica);\n  like(revali, sidon);\n  like(master, hunnie);\n  dislike(urbosa, hunnie);\n  evict(patricia);\n  evict(hunnie);\n  endEpisode();\n  //// episode 11 begins\n\n  tribeSwap([\n    {\n      name: \"Hyrule Castle\",\n      color: \"#95654E\",\n      members: [oaki, sidon, mipha, urbosa, kass, revali, epona, oven, master],\n    },\n  ]);\n  like(sidon, oven);\n  dislike(sidon, epona);\n  dislike(sidon, kass);\n  dislike(sidon, urbosa);\n  r.unevict(mipha);\n  dislike(mipha, urbosa);\n  dislike(mipha, kass);\n  dislike(urbosa, sidon);\n  neutral(urbosa, epona);\n  neutral(urbosa, oaki);\n  like(sidon, mipha);\n  neutral(revali, oaki);\n  dislike(mipha, epona);\n  neutral(kass, oven);\n  neutral(kass, revali);\n  alliance([oaki, oven, mipha]);\n  neutral(oaki, master);\n  dislike(oaki, urbosa);\n  dislike(kass, oven);\n  dislike(sidon, oven);\n  dislike(oaki, epona);\n  like(sidon, kass);\n  dislike(oaki, oven);\n  friends(revali, kass);\n  dislike(master, oven);\n  dislike(mipha, oven);\n  like(master, oaki);\n  dislike(mipha, revali);\n  evict(oaki);\n  endEpisode();\n  /////////// episode 13 begins\n  dislike(revali, epona);\n  neutral(master, oven);\n  friends(mipha, kass);\n  friends(mipha, epona);\n  dislike(epona, revali);\n  alliance([urbosa, oven, revali]);\n  neutral(oven, epona);\n  neutral(epona, oven);\n  dislike(urbosa, master);\n  like(urbosa, epona);\n  dislike(mipha, epona);\n  like(mipha, oven);\n  enemies(kass, revali);\n  dislike(kass, mipha);\n  dislike(master, revali);\n  like(revali, kass);\n  friends(sidon, epona);\n  enemies(revali, kass);\n  like(master, urbosa);\n  dislike(sidon, mipha);\n  dislike(mipha, kass);\n  friends(oven, epona);\n  neutral(mipha, sidon);\n  neutral(sidon, mipha);\n  evict(kass);\n  endEpisode();\n  /////////// episode 14 begins\n  enemies(sidon, mipha);\n  dislike(revali, urbosa);\n  enemies(oven, epona);\n  enemies(mipha, epona);\n  enemies(revali, sidon);\n  like(master, revali);\n  like(sidon, mipha);\n  neutral(urbosa, epona);\n  dislike(master, urbosa);\n  dislike(master, revali);\n  evict(oven);\n  endEpisode();\n  /////// episode 15 begins\n  like(master, revali);\n  like(urbosa, epona);\n  like(revali, mipha);\n  dislike(sidon, epona);\n  like(sidon, revali);\n  like(master, mipha);\n  dislike(master, epona);\n  like(mipha, revali);\n  dislike(epona, urbosa);\n  evict(sidon);\n  endEpisode();\n  /////////// episode 16 begins\n  dislike(urbosa, epona);\n  like(urbosa, master);\n  evict(epona);\n  endEpisode();\n  ////////// episode 17 begins\n  friends(master, mipha);\n  like(urbosa, mipha);\n  dislike(urbosa, master);\n  evict(master);\n  endEpisode();\n  return r;\n}\n\n////////////////// safe space below here\n\nexport const initialProfiles: MetaRelationshipMapper = importAll(\n  require.context(\"./src\", false, /.png/)\n);\n\nfunction setupProfiles(\n  context: __WebpackModuleApi.RequireContext,\n  profiles: RelationshipHouseguest[],\n  evictedHouseguests: Set<string>,\n  jurors: Set<string>\n) {\n  const houseSize = context.keys().length;\n  context.keys().forEach((item: string, i: number) => {\n    const name = item.replace(\".png\", \"\").replace(\"./\", \"\");\n    profiles.push({\n      name,\n      imageURL: context(item),\n      id: i,\n      houseSize,\n      isEvicted: evictedHouseguests.has(name.toLowerCase()),\n      disabled: jurors.has(name.toLowerCase()),\n      relationships: newDiscreteRelationshipMap(context.length - 1, i),\n      likedBy: {},\n      dislikedBy: {},\n    });\n  });\n}\n\n// function randomInt(\n//   a: number,\n//   b: number,\n//   rng: prand.RandomGenerator\n// ): [number, prand.RandomGenerator] {\n//   let result: number;\n//   [result, rng] = prand.uniformIntDistribution(a, b, rng);\n//   return [result, rng];\n// }\n// function randomChoice(\n//   a: (number | boolean | undefined)[],\n//   rng: prand.RandomGenerator\n// ): [number | boolean | undefined, prand.RandomGenerator] {\n//   const [result, rng2] = randomInt(0, a.length - 1, rng);\n//   return [a[result], rng2];\n// }\n\n// function randomRelationships(r: RelationshipMapper) {\n//   let castNames = \"\";\n//   r.houseguests.forEach((houseguest) => (castNames += houseguest.name));\n//   let rng = prand.xorshift128plus(hashcode(castNames));\n//   const hgs = r.houseguests;\n//   for (let i = 0; i < hgs.length; i++) {\n//     const hero = hgs[i].name;\n//     for (let j = i + 1; j < hgs.length; j++) {\n//       const villain = hgs[j].name;\n//       let r1;\n//       let r2;\n//       [r1, rng] = randomChoice([true, false, undefined], rng);\n//       [r2, rng] = randomChoice([true, false, undefined], rng);\n//       r.setRelationship(\n//         hero,\n//         villain,\n//         r1 as any,\n//         \"likedBy\",\n//         \"dislikedBy\",\n//         \"relationships\"\n//       );\n//       r.setRelationship(\n//         villain,\n//         hero,\n//         r2 as any,\n//         \"likedBy\",\n//         \"dislikedBy\",\n//         \"relationships\"\n//       );\n//     }\n//   }\n// }\n","import React from \"react\";\nimport { Box } from \"../layout/box\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { RelationshipMapper } from \"../../images/RelationshipMapper\";\nimport { initialProfiles } from \"../../images/initialProfiles\";\nimport { players$Next } from \"../../subjects/subjects\";\nimport { MetaRelationshipMapper } from \"../../images/MetaRelationshipMapper\";\nimport { HasText } from \"../layout/text\";\nimport { CenteredBold } from \"../layout/centered\";\nimport { primary, secondary } from \"../../App\";\nimport { isNullOrUndefined } from \"util\";\n\ninterface TopbarProps {\n  style?: any;\n}\ninterface TopbarState {\n  rMapper: RelationshipMapper;\n  metaRmapper: MetaRelationshipMapper;\n  time: number;\n  selectedEpisode: number;\n}\nexport class Topbar extends React.Component<TopbarProps, TopbarState> {\n  public constructor(props: TopbarProps) {\n    super(props);\n    this.state = {\n      metaRmapper: initialProfiles,\n      time: 1,\n      selectedEpisode: 1,\n      rMapper: initialProfiles.at(1),\n    };\n  }\n\n  private handleEpisodeChange = (event: any, selectedEpisode: any) => {\n    this.setState({ selectedEpisode });\n  };\n\n  public componentDidMount() {\n    players$Next(this.state.rMapper.houseguests);\n  }\n\n  private handleTimeChange = (event: any, time: any) => {\n    this.setState({ time });\n  };\n\n  public componentDidUpdate(prevProps: TopbarProps, prevState: TopbarState) {\n    const metaMapper = this.state.metaRmapper;\n    const selectedEpisode = this.state.selectedEpisode;\n    if (prevState.selectedEpisode !== this.state.selectedEpisode) {\n      // going forwards in time ? 1 : 0.\n      const offset =\n        prevState.selectedEpisode < this.state.selectedEpisode ? 1 : 0;\n      const time =\n        metaMapper.episodeStartMarkers[selectedEpisode - offset] + offset; // this works, trust me.\n      players$Next(metaMapper.at(time).houseguests);\n      this.setState({ time });\n    } else if (prevState.time !== this.state.time) {\n      players$Next(metaMapper.at(this.state.time).houseguests);\n    }\n  }\n\n  public render(): JSX.Element {\n    const style = { ...{ marginTop: 30 }, ...(this.props.style || {}) };\n    const metaMapper = this.state.metaRmapper;\n    const min =\n      metaMapper.episodeStartMarkers[this.state.selectedEpisode - 1] + 1;\n    const max = metaMapper.episodeStartMarkers[this.state.selectedEpisode];\n    const disabled = min >= max || max === undefined;\n    return (\n      <Box className=\"\" style={style}>\n        <HasText className=\"columns is-gapless is-vcentered\">\n          <div className=\"column is-1\">\n            <CenteredBold style={{ color: primary }}>Episode</CenteredBold>\n          </div>\n          <div className=\"column \">\n            <Slider\n              color=\"primary\"\n              marks={true}\n              step={1}\n              defaultValue={1}\n              min={1}\n              onChange={this.handleEpisodeChange}\n              max={metaMapper.episodeStartMarkers.length}\n              valueLabelDisplay=\"on\"\n              aria-labelledby=\"episode-slider\"\n            />\n          </div>\n        </HasText>\n        <HasText className=\"columns is-vcentered\">\n          <div className=\"column is-1\">\n            <CenteredBold style={{ color: disabled ? \"#BDBDBD\" : secondary }}>\n              Timeline\n            </CenteredBold>\n          </div>\n          <div className=\"column\">\n            <Slider\n              color=\"secondary\"\n              aria-labelledby=\"timeline-slider\"\n              value={this.state.time}\n              onChange={this.handleTimeChange}\n              min={min}\n              max={isNullOrUndefined(max) ? min + 1 : max}\n              disabled={disabled}\n              valueLabelDisplay=\"off\"\n            />\n          </div>\n        </HasText>\n      </Box>\n    );\n  }\n}\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport { mainContentStream$ } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\n\nconst MainContentAreaWrapper = styled(Box)`\n    overflow-x: auto;\n`;\n\nexport class MainContentArea extends React.Component<{}, { content: any }> {\n    // a simple class that displays whatever it gets fed through the main content stream.\n\n    private contentStream: any;\n\n    public constructor(props: any) {\n        super(props);\n        this.state = { content: null };\n    }\n\n    public componentDidMount() {\n        this.contentStream = mainContentStream$.subscribe((content) => {\n            this.setState({ content });\n        });\n    }\n\n    public componentDidUpdate(prevProps: never, prevState: any) {\n        if (prevState.content !== this.state.content) {\n            window.scrollTo(0, 0);\n        }\n    }\n\n    public componentWillUnmount() {\n        this.contentStream.unsubscribe();\n    }\n\n    public render() {\n        return <MainContentAreaWrapper>{this.state.content}</MainContentAreaWrapper>;\n    }\n}\n","import React from \"react\";\nimport { Centered } from \"../layout/centered\";\nimport { HasText } from \"../layout/text\";\nimport { Subscription } from \"rxjs\";\nimport {\n  enableMultiSelection$,\n  selectedPlayer$,\n  emptySet,\n} from \"../../subjects/selectedPlayer$\";\n\ninterface GroupProps {\n  hook: (s: string) => void;\n}\n\ninterface GroupState {\n  groupSelectOn: boolean;\n  count: number;\n}\n\nexport class GroupButtons extends React.Component<GroupProps, GroupState> {\n  private subs: Subscription[] = [];\n\n  public constructor(props: any) {\n    super(props);\n    this.state = { groupSelectOn: false, count: 0 };\n  }\n\n  public componentDidMount() {\n    this.subs.push(\n      enableMultiSelection$.subscribe((groupSelectOn) =>\n        this.setState({ groupSelectOn })\n      )\n    );\n    this.subs.push(\n      selectedPlayer$.subscribe((set) => {\n        this.setState({ count: set.size });\n      })\n    );\n  }\n\n  public componentWillUnmount() {\n    this.subs.forEach((sub) => sub.unsubscribe);\n  }\n\n  private cancel() {\n    this.props.hook(\"\");\n    enableMultiSelection$.next(false);\n    selectedPlayer$.next(emptySet());\n  }\n\n  public render() {\n    const isGroupSelectOn = this.state.groupSelectOn;\n    const setState = (b: boolean) => {\n      b ? this.props.hook(\"group\") : this.props.hook(\"\");\n      enableMultiSelection$.next(b);\n    };\n    return (\n      <Centered>\n        {!isGroupSelectOn && (\n          <button className=\"button is-primary\" onClick={() => setState(true)}>\n            Select Group\n          </button>\n        )}\n        {isGroupSelectOn && [\n          <HasText key=\"x_selected\">{`${this.state.count} selected`}</HasText>,\n          <Centered key=\"buttons\" className=\"buttons is-centered\">\n            <button\n              key=\"cancel\"\n              className=\"button is-small is-warning\"\n              onClick={this.cancel.bind(this)}\n            >\n              Cancel\n            </button>\n            <button\n              key=\"done\"\n              className={\"button is-small is-primary\"}\n              disabled={this.state.count < 2}\n              onClick={() => setState(false)}\n            >\n              Done\n            </button>\n          </Centered>,\n        ]}\n      </Centered>\n    );\n  }\n}\n","import { Box } from \"../layout/box\";\nimport { GroupButtons } from \"./groupButtons\";\nimport React, { useState } from \"react\";\n\nexport function RightSidebar() {\n  const [selected, select] = useState(\"\");\n  return (\n    <Box style={{ width: 180, height: \"100%\" }}>\n      {(!selected || selected === \"group\") && <GroupButtons hook={select} />}\n    </Box>\n  );\n}\n","import \"./bulma.scss\";\nimport React from \"react\";\nimport { Sidebar } from \"../sidebar/sidebar\";\nimport { Topbar } from \"../topbar/topBar\";\nimport { MainContentArea } from \"./mainContentArea\";\nimport { MainPageController } from \"./mainPageController\";\nimport { RightSidebar } from \"../sidebar/rightSidebar\";\n\ninterface MainPageProps {\n  controller: MainPageController;\n}\n\ninterface MainPageState {\n  fullscreen: boolean;\n}\n\nexport class MainPage extends React.Component<MainPageProps, MainPageState> {\n  public constructor(props: MainPageProps) {\n    super(props);\n    this.state = { fullscreen: false };\n    props.controller.inject(this);\n  }\n  public componentDidMount() {\n    this.props.controller.subscribe();\n  }\n  public componentWillUnmount() {\n    this.props.controller.unsubscribe();\n  }\n\n  public render() {\n    const fullscreen = this.state.fullscreen;\n    const hideOnFullscreen = { display: fullscreen ? \"none\" : \"\" };\n    const wrapperStyle = fullscreen\n      ? { margin: \"auto\" }\n      : { margin: \"auto\", maxWidth: 1380, overflow: \"hidden\" };\n    return (\n      <div style={wrapperStyle}>\n        <Topbar style={hideOnFullscreen} />\n        <Sidebar />\n        <div className=\"columns\">\n          <div className=\"column\" style={{ overflowX: \"hidden\" }}>\n            <MainContentArea />\n          </div>\n          <div className=\"column is-narrow\">\n            <RightSidebar />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { MainPage } from \"./mainPage\";\nimport { Subscription } from \"rxjs\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\n\nexport class MainPageController {\n    private view: MainPage = new MainPage({ controller: this });\n    private subscriptions: Subscription[] = [];\n    public inject(page: MainPage) {\n        this.view = page;\n    }\n\n    public subscribe(): void {\n        this.unsubscribe();\n        this.subscriptions.push(\n            isFullscreen$.subscribe((fullscreen: boolean) => {\n                this.view.setState({ fullscreen });\n            })\n        );\n    }\n\n    public unsubscribe(): void {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n}\n","export interface ColorTheme {\n    name: string;\n    bg: string;\n    text: string;\n    toggleBorder: string;\n    gradient: string;\n    bodyArea: string;\n    link: string;\n    mark: string;\n    overlay: string;\n    evictedCell: string;\n    grayCell: string;\n    winnerCell: string;\n    lightGrayCell: string;\n    runnerUpCell: string;\n    nomineeCell: string;\n    hohCell: string;\n    portraitBorder: string;\n    tableCellBorder: string;\n}\n\nexport const lightTheme: ColorTheme = {\n    name: \"light\",\n    bg: \"#fff\",\n    text: \"#363537\",\n    toggleBorder: \"#FFF\",\n    gradient: \"linear-gradient(#39598A, #79D7ED)\",\n    bodyArea: \"#fff\",\n    link: \"blue\",\n    mark: \"yellow\",\n    overlay: \"fff\",\n    evictedCell: \"#fa8072\",\n    grayCell: \"#eaecf0\",\n    lightGrayCell: \"#f8f9fa\",\n    winnerCell: \"#73fb76\",\n    runnerUpCell: \"#d1e8ef\",\n    nomineeCell: \"#959ffd\",\n    hohCell: \"#CCFFCC\",\n    portraitBorder: \"gray\",\n    tableCellBorder: \"#a2a9b1\",\n};\n\nexport const darkTheme: ColorTheme = {\n    name: \"dark\",\n    bg: \"#121212\",\n    text: \"#FAFAFA\",\n    bodyArea: \"#363537\",\n    toggleBorder: \"#6B8096\",\n    gradient: \"linear-gradient(#091236, #1E215D)\",\n    link: \"lightblue\",\n    mark: \"#7e006d\",\n    overlay: \"#444346\",\n    evictedCell: \"#9d4c43\",\n    grayCell: \"#5e5e5e\",\n    lightGrayCell: \"#404040\",\n    runnerUpCell: \"#9fbec882\",\n    nomineeCell: \"#6c75d0\",\n    winnerCell: \"#00ac04\",\n    hohCell: \"#3f783f\",\n    portraitBorder: \"#484848\",\n    tableCellBorder: \"#53575b\",\n};\n","import { createGlobalStyle } from \"styled-components\";\nimport { ColorTheme } from \"./theme\";\n\nexport const GlobalStyles = createGlobalStyle`\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n  div {\n    transition: all 0.25s linear;\n  }\n\n  body {\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bg};\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n       transition: all 0.25s linear;\n  }`;\n","import React from \"react\";\nimport { MainPage } from \"./components/mainPage/mainPage\";\nimport { MainPageController } from \"./components/mainPage/mainPageController\";\nimport { ThemeProvider } from \"styled-components\";\nimport { ColorTheme, darkTheme } from \"./theme/theme\";\nimport { GlobalStyles } from \"./theme/globalTheme\";\nimport { theme$ } from \"./subjects/subjects\";\nimport { Subscription } from \"rxjs\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core\";\n\nexport const primary = \"#33fff9\";\nexport const secondary = \"#f933ff\";\n\nconst muiTheme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n    primary: { main: primary },\n    secondary: { main: secondary },\n  },\n});\n\nclass App extends React.Component<{}, { theme: ColorTheme }> {\n  private sub: Subscription | null = null;\n  public constructor(props: any) {\n    super(props);\n    this.state = {\n      theme: darkTheme,\n    };\n  }\n\n  public componentDidMount() {\n    this.sub = theme$.subscribe((theme) => {\n      this.setState({ theme });\n    });\n  }\n\n  public componentWillUnmount() {\n    if (this.sub) this.sub.unsubscribe();\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={muiTheme}>\n        <ThemeProvider theme={this.state.theme}>\n          <>\n            <GlobalStyles />\n            <MainPage controller={new MainPageController()} />\n          </>\n        </ThemeProvider>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {});\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {});\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}